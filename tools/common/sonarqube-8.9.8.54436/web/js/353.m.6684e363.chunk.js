(window.webpackJsonp=window.webpackJsonp||[]).push([[353],{1074:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return O}));var r=a(311),n=a(2),s=a(312),i=a(331),l=a.n(i),o=a(348),c=a.n(o),m=a(322),u=a(31),h=a(385),p=a(391),d=a(378),b=a(411),f=a(483);function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){g(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function g(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class O extends n.PureComponent{constructor(e){super(e),this.mounted=!1,this.getParams=({activation:e,rule:t}=this.props)=>{const a={};if(t&&t.params){for(const e of t.params)a[e.key]=e.defaultValue||"";if(e&&e.params)for(const t of e.params)a[t.key]=t.value}return a},this.getQualityProfilesWithDepth=({profiles:e}=this.props)=>Object(f.g)(e.filter(e=>!e.isBuiltIn&&e.actions&&e.actions.edit&&e.language===this.props.rule.lang)).map(e=>y({},e,{depth:e.depth-1})),this.handleFormSubmit=e=>{e.preventDefault(),this.setState({submitting:!0});const t={key:this.state.profile,params:this.state.params,rule:this.props.rule.key,severity:this.state.severity};Object(h.a)(t).then(()=>this.props.onDone(t.severity)).then(()=>{this.mounted&&(this.setState({submitting:!1}),this.props.onClose())},()=>{this.mounted&&this.setState({submitting:!1})})},this.handleParameterChange=e=>{const{name:t,value:a}=e.currentTarget;this.setState(e=>({params:y({},e.params,{[t]:a})}))},this.handleProfileChange=({value:e})=>{this.setState({profile:e})},this.handleSeverityChange=({value:e})=>{this.setState({severity:e})},this.renderSeverityOption=({value:e})=>n.createElement(p.a,{severity:e});const t=this.getQualityProfilesWithDepth(e);this.state={params:this.getParams(e),profile:t.length>0?t[0].key:"",severity:e.activation?e.activation.severity:e.rule.severity,submitting:!1}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}render(){const{activation:e,rule:t}=this.props,{profile:a,severity:i,submitting:o}=this.state,{params:h=[]}=t,p=this.getQualityProfilesWithDepth(),f=!!t.templateKey,v=p.length<=0,y=!!e;return n.createElement(l.a,{contentLabel:this.props.modalHeader,onRequestClose:this.props.onClose,size:"small"},n.createElement("form",{onSubmit:this.handleFormSubmit},n.createElement("div",{className:"modal-head"},n.createElement("h2",null,this.props.modalHeader)),n.createElement("div",{className:r("modal-body",{"modal-container":h.length>0})},!y&&v&&n.createElement(m.Alert,{variant:"info"},Object(u.translate)("coding_rules.active_in_all_profiles")),n.createElement("div",{className:"modal-field"},n.createElement("label",null,Object(u.translate)("coding_rules.quality_profile")),n.createElement(c.a,{className:"js-profile",clearable:!1,disabled:o||1===p.length,onChange:this.handleProfileChange,options:p.map(e=>({label:"   ".repeat(e.depth)+e.name,value:e.key})),value:a})),n.createElement("div",{className:"modal-field"},n.createElement("label",null,Object(u.translate)("severity")),n.createElement(c.a,{className:"js-severity",clearable:!1,disabled:o,onChange:this.handleSeverityChange,optionRenderer:this.renderSeverityOption,options:d.h.map(e=>({label:Object(u.translate)("severity",e),value:e})),searchable:!1,value:i,valueRenderer:this.renderSeverityOption})),f?n.createElement("div",{className:"modal-field"},n.createElement("p",{className:"note"},Object(u.translate)("coding_rules.custom_rule.activation_notice"))):h.map(e=>n.createElement("div",{className:"modal-field",key:e.key},n.createElement("label",{title:e.key},e.key),"TEXT"===e.type?n.createElement("textarea",{disabled:o,name:e.key,onChange:this.handleParameterChange,placeholder:e.defaultValue,rows:3,value:this.state.params[e.key]||""}):n.createElement("input",{disabled:o,name:e.key,onChange:this.handleParameterChange,placeholder:e.defaultValue,type:"text",value:this.state.params[e.key]||""}),void 0!==e.htmlDesc&&n.createElement("div",{className:"note",dangerouslySetInnerHTML:{__html:Object(b.a)(e.htmlDesc)}})))),n.createElement("footer",{className:"modal-foot"},o&&n.createElement("i",{className:"spinner spacer-right"}),n.createElement(s.SubmitButton,{disabled:o||v},y?Object(u.translate)("save"):Object(u.translate)("coding_rules.activate")),n.createElement(s.ResetButtonLink,{disabled:o,onClick:this.props.onClose},Object(u.translate)("cancel")))))}}},391:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var r=a(2),n=a(450),s=a.n(n),i=a(31);function l({className:e,severity:t}){return t?r.createElement("span",{className:e},r.createElement(s.a,{className:"little-spacer-right",severity:t}),Object(i.translate)("severity",t)):null}},411:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return s}));var r=a(566);function n(e){return Object(r.sanitize)(e,{ALLOWED_TAGS:["b","br","code","i","li","p","strong","ul","a"],ALLOWED_ATTR:["target","href"]})}function s(e){return Object(r.sanitize)(e,{USE_PROFILES:{html:!0}})}}}]);
//# sourceMappingURL=353.m.6684e363.chunk.js.map