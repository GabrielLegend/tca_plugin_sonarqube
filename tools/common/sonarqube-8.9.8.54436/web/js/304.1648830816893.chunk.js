(window.webpackJsonp=window.webpackJsonp||[]).push([[304],{1035:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return f})),n.d(t,"g",(function(){return h})),n.d(t,"f",(function(){return b})),n.d(t,"h",(function(){return g})),n.d(t,"i",(function(){return y})),n.d(t,"j",(function(){return v}));var a=n(933),r=n.n(a),c=n(896),i=n(129),s=n(826),o=n(779),l=n(858),u=["VERSION","QUALITY_GATE","QUALITY_PROFILE","OTHER"],d=["QUALITY_GATE","DEFINITION_CHANGE","OTHER"];function p(e,t){return e.category!==t.category||f(e,t)}function m(e,t){return!r()(e.customMetrics,t.customMetrics)}function f(e,t){return!r()(e.from,t.from)||!r()(e.to,t.to)}function h(e,t){return e.graph!==t.graph}function b(e,t){return e.reduce((function(e,n){var a=e[e.length-1],r=n.events.find((function(e){return"VERSION"===e.category}));if(r){var s={version:r.name,key:r.key,byDay:{}};!a||Object.keys(a.byDay).length>0?e.push(s):e[e.length-1]=s,a=s}else a||(a={version:null,key:null,byDay:{}},e.push(a));var o=c(Object(i.parseDate)(n.date)).getTime().toString(),l=!0;if(t.category||t.from||t.to){var u=!t.from||n.date>=t.from,d=!t.to||n.date<=t.to,p=!t.category||null!=n.events.find((function(e){return e.category===t.category}));l=u&&d&&p}return l&&(a.byDay[o]||(a.byDay[o]=[]),a.byDay[o].push(n)),e}),[])}function g(e){return{category:Object(s.parseAsString)(e.category),customMetrics:Object(s.parseAsArray)(e.custom_metrics,s.parseAsString),from:Object(s.parseAsDate)(e.from),graph:(t=e.graph,n=Object(s.parseAsString)(t),Object.keys(l.a).includes(n)?n:o.a),project:Object(s.parseAsString)(e.id),to:Object(s.parseAsDate)(e.to),selectedDate:Object(s.parseAsDate)(e.selected_date)};var t,n}function y(e){return Object(s.cleanQuery)({category:Object(s.serializeString)(e.category),from:Object(s.serializeDate)(e.from),project:Object(s.serializeString)(e.project),to:Object(s.serializeDate)(e.to)})}function v(e){return Object(s.cleanQuery)({category:Object(s.serializeString)(e.category),custom_metrics:Object(s.serializeStringArray)(e.customMetrics),from:Object(s.serializeDate)(e.from),graph:(t=e.graph,t===o.a?void 0:t),id:Object(s.serializeString)(e.project),to:Object(s.serializeDate)(e.to),selected_date:Object(s.serializeDate)(e.selectedDate)});var t}},1047:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(13),r=a.createContext({branchLike:void 0,component:void 0})},1102:function(e,t,n){"use strict";n.d(t,"e",(function(){return c})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return l}));var a=n(49),r=n(673);function c(e){return Object(a.getJSON)("/api/project_analyses/search",e).catch(r.a)}function i(e,t,n,c){var i={analysis:e,name:t};return n&&(i.category=n),c&&(i.description=c),Object(a.postJSON)("/api/project_analyses/create_event",i).then((function(e){return e.event}),r.a)}function s(e){return Object(a.post)("/api/project_analyses/delete_event",{event:e}).catch(r.a)}function o(e,t,n){var c={event:e};return t&&(c.name=t),n&&(c.description=n),Object(a.postJSON)("/api/project_analyses/update_event",c).then((function(e){return e.event}),r.a)}function l(e){return Object(a.post)("/api/project_analyses/delete",{analysis:e}).catch(r.a)}},1104:function(e,t,n){"use strict";n.d(t,"b",(function(){return g})),n.d(t,"a",(function(){return y}));var a,r=n(13),c=n(665),i=n(667),s=n(661),o=n(755),l=n.n(o),u=n(683),d=n.n(u),p=n(176),m=n(754),f=n(677),h=n(670),b=(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});function g(e){return"DEFINITION_CHANGE"===e.category&&void 0!==e.definitionChange}var y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={expanded:!1},t.stopPropagation=function(e){e.stopPropagation()},t.toggleProjectsList=function(){t.setState((function(e){return{expanded:!e.expanded}}))},t.renderProjectLink=function(e,n){return r.createElement(i.c,{onClick:t.stopPropagation,title:e.name,to:Object(h.v)(e.key,n)},Object(m.limitComponentName)(e.name,28))},t.renderBranch=function(e){return void 0===e&&(e=Object(p.translate)("branches.main_branch")),r.createElement("span",{className:"nowrap",title:e},r.createElement(l.a,{className:"little-spacer-left text-text-top"}),e)},t}return b(t,e),t.prototype.renderProjectChange=function(e){var t=!this.props.branchLike||Object(f.g)(this.props.branchLike);if("ADDED"===e.changeType){var n=t?"event.definition_change.added":"event.definition_change.branch_added";return r.createElement("div",{className:"text-ellipsis"},r.createElement(c.FormattedMessage,{defaultMessage:Object(p.translate)(n),id:n,values:{project:this.renderProjectLink(e,e.branch),branch:this.renderBranch(e.branch)}}))}if("REMOVED"===e.changeType){n=t?"event.definition_change.removed":"event.definition_change.branch_removed";return r.createElement("div",{className:"text-ellipsis"},r.createElement(c.FormattedMessage,{defaultMessage:Object(p.translate)(n),id:n,values:{project:this.renderProjectLink(e,e.branch),branch:this.renderBranch(e.branch)}}))}return"BRANCH_CHANGED"===e.changeType?r.createElement(c.FormattedMessage,{defaultMessage:Object(p.translate)("event.definition_change.branch_replaced"),id:"event.definition_change.branch_replaced",values:{project:this.renderProjectLink(e,e.newBranch),oldBranch:this.renderBranch(e.oldBranch),newBranch:this.renderBranch(e.newBranch)}}):null},t.prototype.render=function(){var e=this,t=this.props.event,n=this.state.expanded;return r.createElement(r.Fragment,null,r.createElement("span",{className:"note"},Object(p.translate)("event.category",t.category),":"),r.createElement("div",null,r.createElement(s.ResetButtonLink,{className:"project-activity-event-inner-more-link",onClick:this.toggleProjectsList,stopPropagation:!0},n?Object(p.translate)("hide"):Object(p.translate)("more"),r.createElement(d.a,{className:"little-spacer-left",turned:n}))),n&&r.createElement("ul",{className:"spacer-left spacer-top"},t.definitionChange.projects.map((function(t){return r.createElement("li",{className:"display-flex-center spacer-top",key:t.key},e.renderProjectChange(t))}))))},t}(r.PureComponent)},1105:function(e,t,n){"use strict";n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return b}));var a,r=n(13),c=n(665),i=n(667),s=n(661),o=n(683),l=n.n(o),u=n(735),d=n.n(u),p=n(176),m=n(670),f=(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});function h(e){return"QUALITY_GATE"===e.category&&void 0!==e.qualityGate}var b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={expanded:!1},t.stopPropagation=function(e){e.stopPropagation()},t.toggleProjectsList=function(){t.setState((function(e){return{expanded:!e.expanded}}))},t}return f(t,e),t.prototype.render=function(){var e=this,t=this.props.event,n=this.state.expanded;return r.createElement(r.Fragment,null,r.createElement("span",{className:"note spacer-right"},Object(p.translate)("event.category",t.category),":"),t.qualityGate.stillFailing?r.createElement(c.FormattedMessage,{defaultMessage:Object(p.translate)("event.quality_gate.still_x"),id:"event.quality_gate.still_x",values:{status:r.createElement(d.a,{level:t.qualityGate.status,small:!0})}}):r.createElement(d.a,{level:t.qualityGate.status,small:!0}),r.createElement("div",null,t.qualityGate.failing.length>0&&r.createElement(s.ResetButtonLink,{className:"project-activity-event-inner-more-link",onClick:this.toggleProjectsList,stopPropagation:!0},n?Object(p.translate)("hide"):Object(p.translate)("more"),r.createElement(l.a,{className:"little-spacer-left",turned:n}))),n&&r.createElement("ul",{className:"spacer-left spacer-top"},t.qualityGate.failing.map((function(n){return r.createElement("li",{className:"display-flex-center spacer-top",key:n.key},r.createElement(d.a,{"aria-label":Object(p.translate)("quality_gates.status"),className:"spacer-right",level:t.qualityGate.status,small:!0}),r.createElement("div",{className:"flex-1 text-ellipsis"},r.createElement(i.c,{onClick:e.stopPropagation,title:n.name,to:Object(m.v)(n.key,n.branch)},r.createElement("span",{"aria-label":Object(p.translateWithParameters)("project_x",n.name)},n.name))))}))))},t}(r.PureComponent)},1107:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return o}));var a=n(49),r=n(673);function c(e){return Object(a.getJSON)("/api/new_code_periods/show",e).catch(r.a)}function i(e){return Object(a.post)("/api/new_code_periods/set",e).catch(r.a)}function s(e){return Object(a.post)("/api/new_code_periods/unset",e).catch(r.a)}function o(e){return Object(a.getJSON)("/api/new_code_periods/list",e).catch(r.a)}},1108:function(e,t,n){"use strict";function a(e){var t=parseInt(e,10);return!(e.length<1||isNaN(t)||t<1||String(t)!==e)}function r(e){var t=e.analysis,n=e.days,a=e.referenceBranch;switch(e.type){case"NUMBER_OF_DAYS":return n;case"REFERENCE_BRANCH":return a;case"SPECIFIC_ANALYSIS":return t;default:return}}function c(e){var t=e.analysis,n=void 0===t?"":t,r=e.currentSetting,c=e.currentSettingValue,i=e.days,s=e.overrideGeneralSetting,o=e.referenceBranch,l=void 0===o?"":o,u=e.selected;return{isChanged:r||void 0===s?!1===s||u!==r||"NUMBER_OF_DAYS"===u&&i!==c||"SPECIFIC_ANALYSIS"===u&&n!==c||"REFERENCE_BRANCH"===u&&l!==c:s,isValid:!1===s||"PREVIOUS_VERSION"===u||"SPECIFIC_ANALYSIS"===u&&n.length>0||"NUMBER_OF_DAYS"===u&&a(i)||"REFERENCE_BRANCH"===u&&l.length>0}}n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return c}))},1153:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(13),r=n(1008),c=n.n(r),i=n(899),s=n.n(i),o=n(695),l=n.n(o),u=n(176);function d(e){var t=e.className,n=e.days,r=e.disabled,i=e.isChanged,o=e.isValid,d=e.onChangeDays,p=e.onSelect,m=e.selected;return a.createElement(c.a,{className:t,disabled:r,onClick:function(){return p("NUMBER_OF_DAYS")},selected:m,title:Object(u.translate)("baseline.number_days")},a.createElement(a.Fragment,null,a.createElement("p",{className:"big-spacer-bottom"},Object(u.translate)("baseline.number_days.description")),m&&a.createElement(a.Fragment,null,a.createElement(l.a,null),a.createElement(s.a,{error:void 0,id:"baseline_number_of_days",isInvalid:i&&!o,isValid:i&&o,label:Object(u.translate)("baseline.specify_days"),required:!0},a.createElement("input",{onChange:function(e){return d(e.currentTarget.value)},type:"text",value:n})))))}},1154:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(13),r=n(1008),c=n.n(r),i=n(176);function s(e){var t=e.disabled,n=e.isDefault,r=e.onSelect,s=e.selected;return a.createElement(c.a,{disabled:t,onClick:function(){return r("PREVIOUS_VERSION")},selected:s,title:Object(i.translate)("baseline.previous_version")+(n?" ("+Object(i.translate)("default")+")":"")},a.createElement("p",null,Object(i.translate)("baseline.previous_version.description")))}},1328:function(e,t,n){"use strict";var a=n(679),r=n.n(a),c=n(13),i=n(660),s=n(661),o=n(966),l=n.n(o),u=n(176),d=n(666),p=n.n(d),m=n(1047),f=n(1104),h=n(1105);function b(e){var t=e.event;if(Object(h.b)(t))return c.createElement(h.a,{event:t});if(Object(f.b)(t))return c.createElement(m.a.Consumer,null,(function(e){var n=e.branchLike;return c.createElement(f.a,{branchLike:n,event:t})}));var n=c.createElement("span",{className:"text-middle"},c.createElement("span",{className:"note little-spacer-right"},Object(u.translate)("event.category",t.category),":"),c.createElement("strong",{className:"spacer-right"},t.name));return t.description?c.createElement(p.a,{overlay:t.description},n):n}var g,y=n(706),v=n.n(y),E=(g=function(e,t){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}g(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),S=function(e){function t(t){var n=e.call(this,t)||this;return n.changeInput=function(e){n.setState({name:e.target.value})},n.handleSubmit=function(){return n.props.changeEvent(n.props.event.key,n.state.name)},n.state={name:t.event.name},n}return E(t,e),t.prototype.render=function(){var e=this.state.name;return c.createElement(v.a,{confirmButtonText:Object(u.translate)("change_verb"),confirmDisable:!e||e===this.props.event.name,header:this.props.header,onClose:this.props.onClose,onConfirm:this.handleSubmit,size:"small"},c.createElement("div",{className:"modal-field"},c.createElement("label",null,Object(u.translate)("name")),c.createElement("input",{autoFocus:!0,onChange:this.changeInput,type:"text",value:e})))},t}(c.PureComponent);function _(e){var t=e.analysisKey,n=e.event,a=e.header,r=e.removeEventQuestion;return c.createElement(v.a,{confirmButtonText:Object(u.translate)("delete"),header:a,isDestructive:!0,onClose:e.onClose,onConfirm:function(){return e.onConfirm(t,n.key)}},r)}var O=c.memo((function(e){var t=e.analysisKey,n=e.event,a=e.canAdmin,r=e.isFirst,o=c.useState(!1),d=o[0],p=o[1],m=c.useState(!1),f=m[0],h=m[1],g="OTHER"===n.category,y="VERSION"===n.category,v=(g||y)&&e.onChange,E=(g||y&&!r)&&e.onDelete,O=a&&(v||E);return c.createElement("div",{className:"project-activity-event"},c.createElement(l.a,{className:i("project-activity-event-icon little-spacer-right text-middle",n.category)}),c.createElement(b,{event:n}),O&&c.createElement("span",{className:"nowrap"},v&&c.createElement(s.EditButton,{"aria-label":Object(u.translate)("project_activity.events.tooltip.edit"),className:"button-small","data-test":"project-activity__edit-event",onClick:function(){return p(!0)},stopPropagation:!0}),E&&c.createElement(s.DeleteButton,{"aria-label":Object(u.translate)("project_activity.events.tooltip.delete"),className:"button-small","data-test":"project-activity__delete-event",onClick:function(){return h(!0)},stopPropagation:!0})),d&&e.onChange&&c.createElement(S,{changeEvent:e.onChange,event:n,header:y?Object(u.translate)("project_activity.change_version"):Object(u.translate)("project_activity.change_custom_event"),onClose:function(){return p(!1)}}),f&&e.onDelete&&c.createElement(_,{analysisKey:t,event:n,header:y?Object(u.translate)("project_activity.remove_version"):Object(u.translate)("project_activity.remove_custom_event"),onClose:function(){return h(!1)},onConfirm:e.onDelete,removeEventQuestion:Object(u.translate)("project_activity."+(y?"remove_version":"remove_custom_event")+".question")}))}));t.a=c.memo((function(e){var t=e.analysisKey,n=e.canAdmin,a=e.events,i=e.isFirst,s=r()(a,(function(e){return"VERSION"===e.category?1:0}),"category");return c.createElement("div",{className:"big-spacer-top"},s.map((function(a){return c.createElement(O,{analysisKey:t,canAdmin:n,event:a,isFirst:i,key:a.key,onChange:e.onChange,onDelete:e.onDelete})})))}))},2039:function(e,t,n){var a=n(662),r=n(2040);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var c={insert:"head",singleton:!1},i=(a(r,c),r.locals?r.locals:{});e.exports=i},2040:function(e,t,n){(t=n(663)(!1)).push([e.i,".project-baseline{padding:32px}.project-baseline-setting{display:flex;flex-direction:column;max-height:60vh;padding-top:2px}.project-baseline-selector .general-setting{margin-left:7px}.branch-baseline-selector>hr{margin:0 -32px 32px}.branch-baseline-setting-modal{min-height:450px;display:flex;flex-direction:column}.branch-analysis-list-wrapper{display:flex;flex-direction:column;overflow:hidden;position:relative;min-height:200px}.branch-analysis-list{overflow-y:auto;padding-left:12px;padding-right:15px;min-height:50px}.branch-analysis-list>ul{padding-top:18px}.branch-analysis-date{margin-bottom:16px;font-size:15px;font-weight:700}.branch-analysis-day{margin-top:8px;margin-bottom:24px}.branch-analysis{display:flex;justify-content:space-between;cursor:pointer;padding:8px;border-top:1px solid #e6e6e6;border-bottom:1px solid #e6e6e6}.branch-analysis+.branch-analysis{border-top:none}.branch-analysis:hover{background-color:#cae3f2}.branch-analysis>.project-activity-events{flex:1 0 50%}.branch-analysis-time{width:150px}.branch-analysis-version-badge{margin-left:-12px;padding-top:8px;padding-bottom:8px;background-color:#fff}.branch-analysis-version-badge.sticky+.branch-analysis-days-list{padding-top:36px}.branch-analysis-version-badge.first,.branch-analysis-version-badge.sticky{position:absolute;top:1px;left:13px;right:16px;padding-top:24px;z-index:1}.branch-analysis-version-badge .badge{max-width:385px;border-radius:0 2px 2px 0;font-weight:700;font-size:12px;letter-spacing:0;overflow:hidden;text-overflow:ellipsis}.branch-setting-warning{background-color:#fcf8e3!important}.project-activity-event-icon.VERSION{color:#4b9fd5}.project-activity-event-icon.QUALITY_GATE{color:#9139d4}.project-activity-event-icon.QUALITY_PROFILE{color:#ccc}.project-activity-event-icon.DEFINITION_CHANGE{color:#33a759}.project-activity-event-icon.OTHER{color:#442d1b}",""]),e.exports=t},2199:function(e,t,n){"use strict";n.r(t);var a=n(674),r=n(676),c=n(731),i=n.n(c),s=n(660),o=n(13),l=n(804),u=n.n(l),d=n(668),p=n.n(d),m=n(176),f=n(1107),h=n(690),b=n(677),g=(n(2039),n(1108)),y=n(665),v=n(667);function E(e){var t=e.canAdmin;return o.createElement("header",{className:"page-header"},o.createElement("h1",{className:"page-title"},Object(m.translate)("project_baseline.page")),o.createElement("p",{className:"page-description"},o.createElement(y.FormattedMessage,{defaultMessage:Object(m.translate)("project_baseline.page.description"),id:"project_baseline.page.description",values:{link:o.createElement(v.c,{to:"/documentation/project-administration/new-code-period/"},Object(m.translate)("project_baseline.page.description.link"))}}),o.createElement("br",null),t&&o.createElement(y.FormattedMessage,{defaultMessage:Object(m.translate)("project_baseline.page.description2"),id:"project_baseline.page.description2",values:{link:o.createElement(v.c,{to:"/admin/settings?category=new_code_period"},Object(m.translate)("project_baseline.page.description2.link"))}})))}var S=n(661),_=n(680),O=n.n(_),j=n(129),N=n(1008),C=n.n(N);function A(e){var t=e.disabled,n=e.onSelect,a=e.selected;return o.createElement(C.a,{disabled:t,onClick:function(){return n("SPECIFIC_ANALYSIS")},selected:a,title:Object(m.translate)("baseline.specific_analysis")},o.createElement("p",{className:"big-spacer-bottom"},Object(m.translate)("baseline.specific_analysis.description")))}var P=n(1153),k=n(1154),B=n(1002),R=n.n(B),w=n(666),x=n.n(w),I=n(825),D=n.n(I),F=n(688),L=n.n(F),V=n(695),M=n.n(V);function T(e){return e.isInvalid?o.createElement(x.a,{overlay:Object(m.translateWithParameters)("baseline.reference_branch.does_not_exist",e.value)},o.createElement("span",null,e.value," ",o.createElement(D.a,null))):o.createElement(o.Fragment,null,o.createElement("span",{title:e.disabled?Object(m.translate)("baseline.reference_branch.cannot_be_itself"):void 0},e.value),e.isMain&&o.createElement("div",{className:"badge spacer-left"},Object(m.translate)("branches.main_branch")))}function U(e){var t=e.branchList,n=e.className,a=e.disabled,r=e.referenceBranch,c=e.selected,i=e.settingLevel,s=t.find((function(e){return e.value===r}))||{value:r,isMain:!1,isInvalid:!0};return o.createElement(C.a,{className:n,disabled:a,onClick:function(){return e.onSelect("REFERENCE_BRANCH")},selected:c,title:Object(m.translate)("baseline.reference_branch")},o.createElement(o.Fragment,null,o.createElement("p",null,Object(m.translate)("baseline.reference_branch.description")),c&&o.createElement(o.Fragment,null,"project"===i&&o.createElement("p",{className:"spacer-top"},Object(m.translate)("baseline.reference_branch.description2")),o.createElement("div",{className:"big-spacer-top display-flex-column"},o.createElement(M.a,{className:"spacer-bottom"}),o.createElement("label",{className:"text-middle",htmlFor:"reference_branch"},o.createElement("strong",null,Object(m.translate)("baseline.reference_branch.choose")),o.createElement(L.a,null)),o.createElement(R.a,{autofocus:!1,className:"little-spacer-top spacer-bottom",defaultOptions:t,minimumQueryLength:1,onSearch:function(e){return Promise.resolve(t.filter((function(t){return t.value.includes(e)})))},onSelect:function(t){return e.onChangeReferenceBranch(t.value)},renderOption:T,value:s})))))}var Y=n(1081),G=n.n(Y),H=n(799),z=n(783),q=n(1102),K=n(746),Q=n.n(K),W=n(697),J=n.n(W),X=n(712),Z=n.n(X),$=n(922),ee=n.n($),te=n(1328),ne=n(1035);function ae(e){var t=e.analyses,n=e.loading,a=e.range,r=e.selectedAnalysisKey,c=o.useMemo((function(){return Object(ne.f)(t,{category:""})}),[t]),i=c.length>1||1===c.length&&Object.keys(c[0].byDay).length>0;return o.createElement(o.Fragment,null,o.createElement("div",{className:"spacer-bottom"},Object(m.translate)("baseline.analysis_from"),o.createElement(J.a,{autoBlur:!0,className:"input-medium spacer-left",clearable:!1,onChange:e.handleRangeChange,options:[{label:Object(m.translate)("baseline.branch_analyses.ranges.30days"),value:30},{label:Object(m.translate)("baseline.branch_analyses.ranges.allTime"),value:0}],searchable:!1,value:a})),o.createElement("div",{className:"branch-analysis-list-wrapper"},o.createElement("div",{className:"bordered branch-analysis-list",onScroll:e.handleScroll,ref:e.registerScrollableNode},n&&o.createElement(p.a,{className:"big-spacer-top"}),n||i?o.createElement("ul",null,c.map((function(n,a){var c=Object.keys(n.byDay);return c.length<=0?null:o.createElement("li",{key:n.key||"noversion"},n.version&&o.createElement("div",{className:s("branch-analysis-version-badge",{first:0===a,sticky:e.shouldStick(n.version)}),ref:e.registerBadgeNode(n.version)},o.createElement(x.a,{mouseEnterDelay:.5,overlay:Object(m.translate)("version")+" "+n.version},o.createElement("span",{className:"badge"},n.version))),o.createElement("ul",{className:"branch-analysis-days-list"},c.map((function(a){return o.createElement("li",{className:"branch-analysis-day","data-day":Object(j.toShortNotSoISOString)(Number(a)),key:a},o.createElement("div",{className:"branch-analysis-date"},o.createElement(Z.a,{date:Number(a),long:!0})),o.createElement("ul",{className:"branch-analysis-analyses-list"},null!=n.byDay[a]&&n.byDay[a].map((function(n){return function(e){var t=e.analysis,n=e.isFirst,a=e.onSelectAnalysis,r=e.selectedAnalysisKey;return o.createElement("li",{className:s("branch-analysis",{selected:t.key===r}),"data-date":Object(j.parseDate)(t.date).valueOf(),key:t.key,onClick:function(){return a(t)}},o.createElement("div",{className:"branch-analysis-time spacer-right"},o.createElement(ee.a,{date:Object(j.parseDate)(t.date),long:!1},(function(e){return o.createElement("time",{className:"text-middle",dateTime:Object(j.parseDate)(t.date).toISOString()},e)}))),t.events.length>0&&o.createElement(te.a,{analysisKey:t.key,events:t.events,isFirst:n}),o.createElement("div",{className:"analysis-selection-button"},o.createElement(Q.a,{checked:t.key===r,onCheck:function(){},value:""})))}({analysis:n,selectedAnalysisKey:r,isFirst:t[0].key===n.key,onSelectAnalysis:e.onSelectAnalysis})}))))}))))}))):o.createElement("div",{className:"big-spacer-top big-spacer-bottom strong"},Object(m.translate)("baseline.no_analyses")))))}var re,ce=(re=function(e,t){return(re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}re(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),ie=function(){return(ie=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},se=function(e){function t(t){var n=e.call(this,t)||this;return n.mounted=!1,n.badges={},n.state={analyses:[],loading:!0,range:30,scroll:0},n.handleScroll=function(e){e.currentTarget&&n.updateScroll(e.currentTarget.scrollTop)},n.updateScroll=function(e){n.setState({scroll:e})},n.registerBadgeNode=function(e){return function(t){t&&(t.getAttribute("originOffsetTop")||t.setAttribute("originOffsetTop",String(t.offsetTop)),n.badges[e]=t)}},n.shouldStick=function(e){var t=n.badges[e];return!!t&&Number(t.getAttribute("originOffsetTop"))<n.state.scroll+10},n.handleRangeChange=function(e){var t=e.value;n.setState({range:t},(function(){return n.fetchAnalyses()}))},n.updateScroll=G()(n.updateScroll,20),n}return ce(t,e),t.prototype.componentDidMount=function(){this.mounted=!0,this.fetchAnalyses(!0)},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.scrollToSelected=function(){var e=document.querySelector(".branch-analysis.selected");this.scrollableNode&&e&&Object(z.scrollToElement)(e,{parent:this.scrollableNode,bottomOffset:40})},t.prototype.fetchAnalyses=function(e){var t=this;void 0===e&&(e=!1);var n=this.props,a=n.analysis,r=n.branch,c=n.component,i=this.state.range;return this.setState({loading:!0}),Object(q.e)({branch:r,project:c,from:i?Object(j.toShortNotSoISOString)(Object(H.subDays)(new Date,i)):void 0}).then((function(n){e&&a&&!n.analyses.find((function(e){return e.key===a}))?t.handleRangeChange({value:0}):t.setState({analyses:n.analyses.map((function(e){return ie(ie({},e),{date:Object(j.parseDate)(e.date)})})),loading:!1},(function(){t.scrollToSelected()}))}))},t.prototype.render=function(){var e=this,t=this.props,n=t.analysis,a=t.onSelectAnalysis,r=this.state,c=r.analyses,i=r.loading,s=r.range;return o.createElement(ae,{analyses:c,handleRangeChange:this.handleRangeChange,handleScroll:this.handleScroll,loading:i,onSelectAnalysis:a,range:s,registerBadgeNode:this.registerBadgeNode,registerScrollableNode:function(t){e.scrollableNode=t},selectedAnalysisKey:n,shouldStick:this.shouldStick})},t}(o.PureComponent),oe=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),le=function(e){function t(t){var n=e.call(this,t)||this;n.mounted=!1,n.branchToOption=function(e){return{value:e.name,isMain:e.isMain,disabled:e.name===n.props.branch.name}},n.handleSubmit=function(e){e.preventDefault();var t=n.props,a=t.branch,r=t.component,c=n.state,i=c.analysis,s=c.analysisDate,o=c.days,l=c.referenceBranch,u=c.selected,d=Object(g.a)({type:u,analysis:i,days:o,referenceBranch:l});u&&(n.setState({saving:!0}),Object(f.d)({project:r,type:u,value:d,branch:a.name}).then((function(){n.setState({saving:!1}),n.props.onClose(a.name,{type:u,value:d,effectiveValue:s&&Object(j.toNotSoISOString)(s)})}),(function(){n.setState({saving:!1})})))},n.requestClose=function(){return n.props.onClose()},n.handleSelectAnalysis=function(e){return n.setState({analysis:e.key,analysisDate:e.date})},n.handleSelectDays=function(e){return n.setState({days:e})},n.handleSelectReferenceBranch=function(e){return n.setState({referenceBranch:e})},n.handleSelectSetting=function(e){return n.setState({selected:e})};var a=t.branchList.filter((function(e){return e.name!==t.branch.name})),r=a.length>0?a[0].name:"";return n.state={analysis:n.getValueFromProps("SPECIFIC_ANALYSIS")||"",days:n.getValueFromProps("NUMBER_OF_DAYS")||"30",referenceBranch:n.getValueFromProps("REFERENCE_BRANCH")||r,saving:!1,selected:n.props.branch.newCodePeriod&&n.props.branch.newCodePeriod.type},n}return oe(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.getValueFromProps=function(e){return this.props.branch.newCodePeriod&&this.props.branch.newCodePeriod.type===e?this.props.branch.newCodePeriod.value:null},t.prototype.render=function(){var e=this.props,t=e.branch,n=e.branchList,a=this.state,r=a.analysis,c=a.days,i=a.referenceBranch,s=a.saving,l=a.selected,u=Object(m.translateWithParameters)("baseline.new_code_period_for_branch_x",t.name),d=t.newCodePeriod&&t.newCodePeriod.type,f=t.newCodePeriod&&t.newCodePeriod.value,h=Object(g.c)({analysis:r,currentSetting:d,currentSettingValue:f,days:c,referenceBranch:i,selected:l}),b=h.isChanged,y=h.isValid;return o.createElement(O.a,{contentLabel:u,onRequestClose:this.requestClose,size:"large"},o.createElement("header",{className:"modal-head"},o.createElement("h2",null,u)),o.createElement("form",{onSubmit:this.handleSubmit},o.createElement("div",{className:"modal-body modal-container branch-baseline-setting-modal"},o.createElement("div",{className:"display-flex-row huge-spacer-bottom",role:"radiogroup"},o.createElement(k.a,{isDefault:!1,onSelect:this.handleSelectSetting,selected:"PREVIOUS_VERSION"===l}),o.createElement(P.a,{days:c,isChanged:b,isValid:y,onChangeDays:this.handleSelectDays,onSelect:this.handleSelectSetting,selected:"NUMBER_OF_DAYS"===l}),o.createElement(A,{onSelect:this.handleSelectSetting,selected:"SPECIFIC_ANALYSIS"===l}),o.createElement(U,{branchList:n.map(this.branchToOption),onChangeReferenceBranch:this.handleSelectReferenceBranch,onSelect:this.handleSelectSetting,referenceBranch:i,selected:"REFERENCE_BRANCH"===l,settingLevel:"branch"})),"SPECIFIC_ANALYSIS"===l&&o.createElement(se,{analysis:r,branch:t.name,component:this.props.component,onSelectAnalysis:this.handleSelectAnalysis})),o.createElement("footer",{className:"modal-foot"},o.createElement(p.a,{className:"spacer-right",loading:s}),o.createElement(S.SubmitButton,{disabled:!b||s||!y},Object(m.translate)("save")),o.createElement(S.ResetButtonLink,{onClick:this.props.onClose},Object(m.translate)("cancel")))))},t}(o.PureComponent),ue=n(723),de=n.n(ue),pe=n(1308),me=n.n(pe),fe=n(714),he=n.n(fe),be=n(944);function ge(e){var t,n,a=e.branch,r=e.existingBranches,c=e.inheritedSetting;return!function(e,t){return!e.newCodePeriod&&"REFERENCE_BRANCH"===t.type&&e.name===t.value}(a,c)?function(e,t){return e.newCodePeriod&&e.newCodePeriod.value&&"REFERENCE_BRANCH"===e.newCodePeriod.type&&!t.includes(e.newCodePeriod.value)}(a,r)&&(n=Object(m.translateWithParameters)("baseline.reference_branch.does_not_exist",(null===(t=a.newCodePeriod)||void 0===t?void 0:t.value)||"")):n=Object(m.translateWithParameters)("baseline.reference_branch.invalid_branch_setting",a.name),o.createElement("tr",{className:n?"branch-setting-warning":""},o.createElement("td",{className:"nowrap"},o.createElement(be.a,{branchLike:a,className:"little-spacer-right"}),a.name,a.isMain&&o.createElement("div",{className:"badge spacer-left"},Object(m.translate)("branches.main_branch"))),o.createElement("td",{className:"huge-spacer-right nowrap"},o.createElement(x.a,{overlay:n},o.createElement("span",null,n&&o.createElement(me.a,{className:"little-spacer-right"}),a.newCodePeriod?function(e){switch(e.type){case"SPECIFIC_ANALYSIS":return o.createElement(o.Fragment,null,Object(m.translate)("baseline.specific_analysis")+": ",e.effectiveValue?o.createElement(he.a,{date:e.effectiveValue}):"?");case"NUMBER_OF_DAYS":return Object(m.translate)("baseline.number_days")+": "+e.value;case"PREVIOUS_VERSION":return Object(m.translate)("baseline.previous_version");case"REFERENCE_BRANCH":return Object(m.translate)("baseline.reference_branch")+": "+e.value;default:return e.type}}(a.newCodePeriod):Object(m.translate)("branch_list.default_setting")))),o.createElement("td",{className:"text-right"},o.createElement(de.a,null,o.createElement(ue.ActionsDropdownItem,{onClick:function(){return e.onOpenEditModal(a)}},Object(m.translate)("edit")),a.newCodePeriod&&o.createElement(ue.ActionsDropdownItem,{onClick:function(){return e.onResetToDefault(a.name)}},Object(m.translate)("reset_to_default")))))}var ye=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),ve=function(){return(ve=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Ee=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={branches:[],loading:!0},t.updateBranchNewCodePeriod=function(e,n){var a=t.state.branches,r=a.find((function(t){return t.name===e}));return r&&(r.newCodePeriod=n),a.slice(0)},t.openEditModal=function(e){t.setState({editedBranch:e})},t.closeEditModal=function(e,n){e?t.setState({branches:t.updateBranchNewCodePeriod(e,n),editedBranch:void 0}):t.setState({editedBranch:void 0})},t.resetToDefault=function(e){return Object(f.c)({project:t.props.component.key,branch:e}).then((function(){t.setState({branches:t.updateBranchNewCodePeriod(e,void 0)})}))},t}return ye(t,e),t.prototype.componentDidMount=function(){this.mounted=!0,this.fetchBranches()},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.sortAndFilterBranches=function(e){return void 0===e&&(e=[]),Object(b.j)(e.filter(b.f))},t.prototype.fetchBranches=function(){var e=this,t=this.props.component.key;this.setState({loading:!0}),Object(f.b)({project:t}).then((function(t){var n=t.newCodePeriods?t.newCodePeriods.filter((function(e){return!e.inherited})):[],a=e.props.branchList.map((function(e){var t=n.find((function(t){return t.branchKey===e.name}));if(!t)return e;var a=t.type,r=void 0===a?"PREVIOUS_VERSION":a,c=t.value,i=t.effectiveValue;return ve(ve({},e),{newCodePeriod:{type:r,value:c,effectiveValue:i}})}));e.setState({branches:a,loading:!1})}),(function(){e.setState({loading:!1})}))},t.prototype.render=function(){var e=this,t=this.props,n=t.branchList,a=t.inheritedSetting,r=this.state,c=r.branches,i=r.editedBranch,s=r.loading;return c.length<1?null:s?o.createElement(p.a,null):o.createElement(o.Fragment,null,o.createElement("table",{className:"data zebra"},o.createElement("thead",null,o.createElement("tr",null,o.createElement("th",null,Object(m.translate)("branch_list.branch")),o.createElement("th",{className:"nowrap huge-spacer-right"},Object(m.translate)("branch_list.current_setting")),o.createElement("th",{className:"thin nowrap"},Object(m.translate)("branch_list.actions")))),o.createElement("tbody",null,c.map((function(t){return o.createElement(ge,{branch:t,existingBranches:n.map((function(e){return e.name})),inheritedSetting:a,key:t.name,onOpenEditModal:e.openEditModal,onResetToDefault:e.resetToDefault})})))),i&&o.createElement(le,{branch:i,branchList:n,component:this.props.component.key,onClose:this.closeEditModal}))},t}(o.PureComponent),Se=n(671);function _e(e){return{value:e.name,isMain:e.isMain}}function Oe(e){var t=e.analysis,n=e.branch,a=e.branchList,r=e.branchesEnabled,c=e.component,i=e.currentSetting,l=e.currentSettingValue,u=e.days,d=e.generalSetting,f=e.overrideGeneralSetting,h=e.referenceBranch,b=e.saving,y=e.selected,v=Object(g.c)({analysis:t,currentSetting:i,currentSettingValue:l,days:u,overrideGeneralSetting:f,referenceBranch:h,selected:y}),E=v.isChanged,_=v.isValid;return o.createElement("form",{className:"project-baseline-selector",onSubmit:e.onSubmit},o.createElement("div",{className:"big-spacer-top spacer-bottom",role:"radiogroup"},o.createElement(Q.a,{checked:!f,className:"big-spacer-bottom",onCheck:function(){return e.onToggleSpecificSetting(!1)},value:"general"},Object(m.translate)("project_baseline.general_setting")),o.createElement("div",{className:"big-spacer-left"},function(e){var t,n;return"NUMBER_OF_DAYS"===e.type?(t=Object(m.translate)("baseline.number_days")+" ("+Object(m.translateWithParameters)("duration.days",e.value||"?")+")",n=Object(m.translate)("baseline.number_days.description")):(t=Object(m.translate)("baseline.previous_version"),n=Object(m.translate)("baseline.previous_version.description")),o.createElement("div",{className:"general-setting"},o.createElement("strong",null,t),": ",n)}(d)),o.createElement(Q.a,{checked:f,className:"huge-spacer-top",onCheck:function(){return e.onToggleSpecificSetting(!0)},value:"specific"},Object(m.translate)("project_baseline.specific_setting"))),o.createElement("div",{className:"big-spacer-left big-spacer-right project-baseline-setting"},o.createElement("div",{className:"display-flex-row big-spacer-bottom",role:"radiogroup"},o.createElement(k.a,{disabled:!f,onSelect:e.onSelectSetting,selected:f&&"PREVIOUS_VERSION"===y}),o.createElement(P.a,{days:u,disabled:!f,isChanged:E,isValid:_,onChangeDays:e.onSelectDays,onSelect:e.onSelectSetting,selected:f&&"NUMBER_OF_DAYS"===y}),r?o.createElement(U,{branchList:a.map(_e),disabled:!f,onChangeReferenceBranch:e.onSelectReferenceBranch,onSelect:e.onSelectSetting,referenceBranch:h||"",selected:f&&"REFERENCE_BRANCH"===y,settingLevel:"project"}):o.createElement(A,{disabled:!f,onSelect:e.onSelectSetting,selected:f&&"SPECIFIC_ANALYSIS"===y})),"SPECIFIC_ANALYSIS"===y&&o.createElement(se,{analysis:t||"",branch:n.name,component:c,onSelectAnalysis:e.onSelectAnalysis})),o.createElement("div",{className:s("big-spacer-top",{invisible:!E})},o.createElement(Se.Alert,{variant:"info",className:"spacer-bottom"},Object(m.translate)("baseline.next_analysis_notice")),o.createElement(p.a,{className:"spacer-right",loading:b}),o.createElement(S.SubmitButton,{disabled:b||!_||!E},Object(m.translate)("save")),o.createElement(S.ResetButtonLink,{className:"spacer-left",onClick:e.onCancel},Object(m.translate)("cancel"))))}var je=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),Ne={type:"PREVIOUS_VERSION"},Ce=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={branchList:[],days:"30",loading:!0,saving:!1},t.resetSuccess=i()((function(){return t.setState({success:void 0})}),3e3),t.resetSetting=function(){t.setState({saving:!0}),Object(f.c)({project:t.props.component.key}).then((function(){t.setState({saving:!1,currentSetting:void 0,selected:void 0,success:!0}),t.resetSuccess()}),(function(){t.setState({saving:!1})}))},t.handleSelectAnalysis=function(e){return t.setState({analysis:e.key})},t.handleSelectDays=function(e){return t.setState({days:e})},t.handleSelectReferenceBranch=function(e){t.setState({referenceBranch:e})},t.handleCancel=function(){return t.setState((function(e){var n=e.generalSetting,a=void 0===n?Ne:n,r=e.currentSetting,c=e.currentSettingValue;return t.getUpdatedState({generalSetting:a,currentSetting:r,currentSettingValue:c})}))},t.handleSelectSetting=function(e){return t.setState({selected:e})},t.handleToggleSpecificSetting=function(e){return t.setState({overrideGeneralSetting:e})},t.handleSubmit=function(e){e.preventDefault();var n=t.props.component,a=t.state,r=a.analysis,c=a.days,i=a.selected,s=a.referenceBranch;if(a.overrideGeneralSetting){var o=Object(g.a)({type:i,analysis:r,days:c,referenceBranch:s});i&&(t.setState({saving:!0}),Object(f.d)({project:n.key,type:i,value:o}).then((function(){t.setState({saving:!1,currentSetting:i,currentSettingValue:o||void 0,success:!0}),t.resetSuccess()}),(function(){t.setState({saving:!1})})))}else t.resetSetting()},t}return je(t,e),t.prototype.componentDidMount=function(){this.mounted=!0,this.fetchLeakPeriodSetting(),this.sortAndFilterBranches(this.props.branchLikes)},t.prototype.componentDidUpdate=function(e){e.branchLikes!==this.props.branchLikes&&this.sortAndFilterBranches(this.props.branchLikes)},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.getUpdatedState=function(e){var t=e.currentSetting,n=e.currentSettingValue,a=e.generalSetting,r=this.state.referenceBranch,c="NUMBER_OF_DAYS"===a.type&&a.value||"30";return{loading:!1,currentSetting:t,currentSettingValue:n,generalSetting:a,selected:t||a.type,overrideGeneralSetting:Boolean(t),days:"NUMBER_OF_DAYS"===t&&n||c,analysis:"SPECIFIC_ANALYSIS"===t&&n||"",referenceBranch:"REFERENCE_BRANCH"===t&&n||r}},t.prototype.sortAndFilterBranches=function(e){void 0===e&&(e=[]);var t=Object(b.j)(e.filter(b.f));this.setState({branchList:t,referenceBranch:t[0].name})},t.prototype.fetchLeakPeriodSetting=function(){var e=this,t=this.props,n=t.branchLike,a=t.branchesEnabled,r=t.component;this.setState({loading:!0}),Promise.all([Object(f.a)(),Object(f.a)({branch:a?void 0:n.name,project:r.key})]).then((function(t){var n=t[0],a=t[1];if(e.mounted){n.type||(n=Ne);var r=a.value,c=a.inherited?void 0:a.type||"PREVIOUS_VERSION";e.setState(e.getUpdatedState({generalSetting:n,currentSetting:c,currentSettingValue:r}))}}),(function(){e.setState({loading:!1})}))},t.prototype.render=function(){var e=this.props,t=e.branchesEnabled,n=e.canAdmin,a=e.component,r=e.branchLike,c=this.state,i=c.analysis,l=c.branchList,d=c.currentSetting,f=c.days,b=c.generalSetting,g=c.loading,y=c.currentSettingValue,v=c.overrideGeneralSetting,S=c.referenceBranch,_=c.saving,O=c.selected,j=c.success;return o.createElement(o.Fragment,null,o.createElement(h.a,{suggestions:"project_baseline"}),o.createElement("div",{className:"page page-limited"},o.createElement(E,{canAdmin:!!n}),g?o.createElement(p.a,null):o.createElement("div",{className:"panel-white project-baseline"},t&&o.createElement("h2",null,Object(m.translate)("project_baseline.default_setting")),b&&void 0!==v&&o.createElement(Oe,{analysis:i,branch:r,branchList:l,branchesEnabled:t,component:a.key,currentSetting:d,currentSettingValue:y,days:f,generalSetting:b,onCancel:this.handleCancel,onSelectAnalysis:this.handleSelectAnalysis,onSelectDays:this.handleSelectDays,onSelectReferenceBranch:this.handleSelectReferenceBranch,onSelectSetting:this.handleSelectSetting,onSubmit:this.handleSubmit,onToggleSpecificSetting:this.handleToggleSpecificSetting,overrideGeneralSetting:v,referenceBranch:S,saving:_,selected:O}),o.createElement("div",{className:s("spacer-top",{invisible:_||!j})},o.createElement("span",{className:"text-success"},o.createElement(u.a,{className:"spacer-right"}),Object(m.translate)("settings.state.saved"))),b&&t&&o.createElement("div",{className:"huge-spacer-top branch-baseline-selector"},o.createElement("hr",null),o.createElement("h2",null,Object(m.translate)("project_baseline.configure_branches")),o.createElement(Ee,{branchList:l,component:a,inheritedSetting:d?{type:d,value:y}:b})))))},t}(o.PureComponent);t.default=Object(a.b)((function(e){return{branchesEnabled:Object(r.getAppState)(e).branchesEnabled,canAdmin:Object(r.getAppState)(e).canAdmin}}))(Ce)},690:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a,r=n(13),c=n(728),i=(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});function s(e){var t=e.suggestions;return r.createElement(c.a.Consumer,null,(function(e){var n=e.addSuggestions,a=e.removeSuggestions;return r.createElement(o,{addSuggestions:n,removeSuggestions:a,suggestions:t})}))}var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.componentDidMount=function(){this.props.addSuggestions(this.props.suggestions)},t.prototype.componentDidUpdate=function(e){e.suggestions!==this.props.suggestions&&(this.props.removeSuggestions(this.props.suggestions),this.props.addSuggestions(e.suggestions))},t.prototype.componentWillUnmount=function(){this.props.removeSuggestions(this.props.suggestions)},t.prototype.render=function(){return null},t}(r.PureComponent)},779:function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"j",(function(){return _})),n.d(t,"e",(function(){return O})),n.d(t,"h",(function(){return j})),n.d(t,"i",(function(){return N})),n.d(t,"g",(function(){return C})),n.d(t,"d",(function(){return A})),n.d(t,"f",(function(){return P})),n.d(t,"l",(function(){return k})),n.d(t,"b",(function(){return B})),n.d(t,"k",(function(){return R})),n.d(t,"c",(function(){return w}));var a,r,c=n(679),i=n.n(c),s=n(733),o=n.n(s),l=n(880),u=n.n(l),d=n(1003),p=n.n(d),m=n(176),f=n(93),h=n(707),b=n(744),g=n(858),y=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var a=Array(e),r=0;for(t=0;t<n;t++)for(var c=arguments[t],i=0,s=c.length;i<s;i++,r++)a[r]=c[i];return a},v=g.a.issues,E=((a={})[g.a.issues]=[b.a.bugs,b.a.code_smells,b.a.vulnerabilities],a[g.a.coverage]=[b.a.lines_to_cover,b.a.uncovered_lines],a[g.a.duplications]=[b.a.ncloc,b.a.duplicated_lines],a),S=((r={})[g.a.issues]=E[g.a.issues].concat([b.a.reliability_rating,b.a.security_rating,b.a.sqale_rating]),r[g.a.coverage]=y(E[g.a.coverage],[b.a.coverage]),r[g.a.duplications]=y(E[g.a.duplications],[b.a.duplicated_lines_density]),r);function _(e){return e===g.a.custom}function O(e){void 0===e&&(e=!1);var t=[g.a.issues,g.a.coverage,g.a.duplications];return e?t:y(t,[g.a.custom])}function j(e){return e.data.some((function(e){return Boolean(e.y||0===e.y)}))}function N(e){return e.some((function(e){return e.data&&e.data.length>1}))}function C(e){return e.length>0?e[0].type:"INT"}function A(e,t){return _(e)?t:E[e]}function P(e,t){return _(e)?t:S[e]}function k(e,t,n){return u()(o()(e,(function(e){return e.type})),(function(e){return p()(e,n)})).slice(0,t)}function B(e,t,n,a){return a.length<=0||void 0===e?[]:i()(e.filter((function(e){return a.indexOf(e.metric)>=0})).map((function(a){if(a.metric===b.a.uncovered_lines&&!_(t))return function(e,t){var n=t.find((function(e){return e.metric===b.a.lines_to_cover}));return{data:n?e.history.map((function(e,t){return{x:e.date,y:Number(n.history[t].value)-Number(e.value)}})):[],name:"covered_lines",translatedName:Object(m.translate)("project_activity.custom_metric.covered_lines"),type:"INT"}}(a,e);var r=function(e,t){if(Array.isArray(t))return t.find((function(t){return t.key===e}));return t[e]}(a.metric,n);return{data:a.history.map((function(e){return{x:e.date,y:r&&"LEVEL"===r.type?e.value:Number(e.value)}})),name:a.metric,translatedName:r?Object(m.getLocalizedMetricName)(r):Object(h.localizeMetric)(a.metric),type:r?r.type:"INT"}})),(function(e){return a.indexOf("covered_lines"===e.name?"uncovered_lines":e.name)}))}function R(e,t,n,a){void 0===a&&(a=[]),Object(f.save)(e,n,t),_(n)&&Object(f.save)(e+".custom",a.join(","),t)}function w(e,t){var n=Object(f.get)(e+".custom",t);return{graph:Object(f.get)(e,t)||v,customGraphs:n?n.split(","):[]}}},858:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.issues="issues",e.coverage="coverage",e.duplications="duplications",e.custom="custom"}(a||(a={}))},944:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(13),r=n(755),c=n.n(r),i=n(876),s=n.n(i),o=n(677),l=function(){return(l=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},u=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};function d(e){var t=e.branchLike,n=u(e,["branchLike"]);return Object(o.h)(t)?a.createElement(s.a,l({},n)):a.createElement(c.a,l({},n))}}}]);
//# sourceMappingURL=304.1648830816893.chunk.js.map