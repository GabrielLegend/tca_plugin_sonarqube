{"version":3,"sources":["webpack:///./src/main/js/apps/account/profile/UserExternalIdentity.tsx","webpack:///./src/main/js/apps/account/profile/Profile.tsx","webpack:///./node_modules/sonar-ui-common/components/controls/HelpTooltip.js","webpack:///./node_modules/sonar-ui-common/components/controls/HelpTooltip.css?2512","webpack:///./node_modules/sonar-ui-common/components/controls/HelpTooltip.css","webpack:///./src/main/js/components/hoc/whenLoggedIn.tsx"],"names":["mounted","state","loading","this","fetchIdentityProviders","prevProps","user","props","setState","then","r","identityProviders","providers","identityProvider","find","provider","key","externalProvider","catch","className","style","backgroundColor","color","secondFontColor","alt","name","height","src","iconPath","width","externalIdentity","Profile","currentUser","isExternalProvider","local","login","id","renderLogin","email","renderEmail","groups","length","map","group","title","renderUserGroups","scmAccounts","overlay","scmAccount","renderScmAccounts","whenLoggedIn","__assign","Object","assign","t","s","i","n","arguments","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","defineProperty","exports","value","classNames","React","HelpIcon_1","theme_1","Tooltip_1","HelpTooltip","_a","_b","size","createElement","default","mouseLeaveDelay","onShow","placement","children","ThemeConsumer","theme","fill","colors","gray71","DarkHelpTooltip","transparentBlack","fillInner","white","api","content","__esModule","module","options","exported","locals","___CSS_LOADER_API_IMPORT___","push","WrappedComponent","Wrapper","displayName"],"mappings":"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","file":"js/342.m.3d6b4c03.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { getTextColor } from 'sonar-ui-common/helpers/colors';\nimport { getBaseUrl } from 'sonar-ui-common/helpers/urls';\nimport { getIdentityProviders } from '../../../api/users';\nimport { colors } from '../../../app/theme';\n\nexport interface UserExternalIdentityProps {\n  user: T.LoggedInUser;\n}\n\ninterface State {\n  identityProvider?: T.IdentityProvider;\n  loading: boolean;\n}\n\nexport default class UserExternalIdentity extends React.PureComponent<\n  UserExternalIdentityProps,\n  State\n> {\n  mounted = false;\n  state: State = {\n    loading: true\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchIdentityProviders();\n  }\n\n  componentDidUpdate(prevProps: UserExternalIdentityProps) {\n    if (prevProps.user !== this.props.user) {\n      this.fetchIdentityProviders();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchIdentityProviders() {\n    this.setState({ loading: true });\n    getIdentityProviders()\n      .then(r => r.identityProviders)\n      .then(providers => {\n        if (this.mounted) {\n          const identityProvider = providers.find(\n            provider => provider.key === this.props.user.externalProvider\n          );\n          this.setState({ loading: false, identityProvider });\n        }\n      })\n      .catch(() => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      });\n  }\n\n  render() {\n    const { user } = this.props;\n    const { loading, identityProvider } = this.state;\n\n    if (loading) {\n      return null;\n    }\n\n    if (!identityProvider) {\n      return (\n        <div>\n          {user.externalProvider}\n          {': '}\n          {user.externalIdentity}\n        </div>\n      );\n    }\n\n    return (\n      <div\n        className=\"identity-provider\"\n        style={{\n          backgroundColor: identityProvider.backgroundColor,\n          color: getTextColor(identityProvider.backgroundColor, colors.secondFontColor)\n        }}>\n        <img\n          alt={identityProvider.name}\n          className=\"little-spacer-right\"\n          height=\"14\"\n          src={getBaseUrl() + identityProvider.iconPath}\n          width=\"14\"\n        />{' '}\n        {user.externalIdentity}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport HelpTooltip from 'sonar-ui-common/components/controls/HelpTooltip';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { whenLoggedIn } from '../../../components/hoc/whenLoggedIn';\nimport UserExternalIdentity from './UserExternalIdentity';\n\nexport interface ProfileProps {\n  currentUser: T.LoggedInUser;\n}\n\nexport function Profile({ currentUser }: ProfileProps) {\n  const isExternalProvider = !currentUser.local && currentUser.externalProvider !== 'sonarqube';\n\n  return (\n    <div className=\"account-body account-container account-profile\">\n      <div className=\"boxed-group\">\n        {renderLogin()}\n        {renderEmail()}\n        {renderUserGroups()}\n        {renderScmAccounts()}\n      </div>\n    </div>\n  );\n\n  function renderLogin() {\n    if (!currentUser.login && !isExternalProvider) {\n      return null;\n    }\n\n    return (\n      <div className=\"boxed-group-inner\">\n        <h2 className=\"spacer-bottom\">{translate('my_profile.login')}</h2>\n        {currentUser.login && (\n          <p className=\"spacer-bottom\" id=\"login\">\n            {currentUser.login}\n          </p>\n        )}\n        {isExternalProvider && <UserExternalIdentity user={currentUser} />}\n      </div>\n    );\n  }\n\n  function renderEmail() {\n    if (!currentUser.email) {\n      return null;\n    }\n\n    return (\n      <div className=\"boxed-group-inner\">\n        <h2 className=\"spacer-bottom\">{translate('my_profile.email')}</h2>\n        <div className=\"spacer-bottom\">\n          <p id=\"email\">{currentUser.email}</p>\n        </div>\n      </div>\n    );\n  }\n\n  function renderUserGroups() {\n    if (!currentUser.groups || currentUser.groups.length === 0) {\n      return null;\n    }\n\n    return (\n      <div className=\"boxed-group-inner\">\n        <h2 className=\"spacer-bottom\">{translate('my_profile.groups')}</h2>\n        <ul id=\"groups\">\n          {currentUser.groups.map(group => (\n            <li className=\"little-spacer-bottom\" key={group} title={group}>\n              {group}\n            </li>\n          ))}\n        </ul>\n      </div>\n    );\n  }\n\n  function renderScmAccounts() {\n    if (\n      !currentUser.login &&\n      !currentUser.email &&\n      (!currentUser.scmAccounts || currentUser.scmAccounts.length === 0)\n    ) {\n      return null;\n    }\n\n    return (\n      <div className=\"boxed-group-inner\">\n        <h2 className=\"spacer-bottom\">\n          {translate('my_profile.scm_accounts')}\n          <HelpTooltip\n            className=\"little-spacer-left\"\n            overlay={translate('my_profile.scm_accounts.tooltip')}\n          />\n        </h2>\n        <ul id=\"scm-accounts\">\n          {currentUser.login && (\n            <li className=\"little-spacer-bottom text-ellipsis\" title={currentUser.login}>\n              {currentUser.login}\n            </li>\n          )}\n\n          {currentUser.email && (\n            <li className=\"little-spacer-bottom text-ellipsis\" title={currentUser.email}>\n              {currentUser.email}\n            </li>\n          )}\n\n          {currentUser.scmAccounts &&\n            currentUser.scmAccounts.length > 0 &&\n            currentUser.scmAccounts.map(scmAccount => (\n              <li className=\"little-spacer-bottom\" key={scmAccount} title={scmAccount}>\n                {scmAccount}\n              </li>\n            ))}\n        </ul>\n      </div>\n    );\n  }\n}\n\nexport default whenLoggedIn(Profile);\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar classNames = require(\"classnames\");\nvar React = require(\"react\");\nvar HelpIcon_1 = require(\"../icons/HelpIcon\");\nvar theme_1 = require(\"../theme\");\nrequire(\"./HelpTooltip.css\");\nvar Tooltip_1 = require(\"./Tooltip\");\nfunction HelpTooltip(_a) {\n    var _b = _a.size, size = _b === void 0 ? 12 : _b, props = __rest(_a, [\"size\"]);\n    return (React.createElement(\"div\", { className: classNames('help-tooltip', props.className) },\n        React.createElement(Tooltip_1.default, { mouseLeaveDelay: 0.25, onShow: props.onShow, overlay: props.overlay, placement: props.placement },\n            React.createElement(\"span\", { className: \"display-inline-flex-center\" }, props.children || (React.createElement(theme_1.ThemeConsumer, null, function (theme) { return React.createElement(HelpIcon_1.default, { fill: theme.colors.gray71, size: size }); }))))));\n}\nexports.default = HelpTooltip;\nfunction DarkHelpTooltip(_a) {\n    var _b = _a.size, size = _b === void 0 ? 12 : _b, props = __rest(_a, [\"size\"]);\n    return (React.createElement(HelpTooltip, __assign({}, props),\n        React.createElement(theme_1.ThemeConsumer, null, function (_a) {\n            var colors = _a.colors;\n            return (React.createElement(HelpIcon_1.default, { fill: colors.transparentBlack, fillInner: colors.white, size: size }));\n        })));\n}\nexports.DarkHelpTooltip = DarkHelpTooltip;\n//# sourceMappingURL=HelpTooltip.js.map","var api = require(\"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../css-loader/dist/cjs.js??ref--6-1!../../../postcss-loader/src/index.js??postcss!./HelpTooltip.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".help-tooltip{display:inline-flex;align-items:center;vertical-align:middle}.help-toolip-link{display:block;width:12px;height:12px;border:none}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport handleRequiredAuthentication from 'sonar-ui-common/helpers/handleRequiredAuthentication';\nimport { isLoggedIn } from '../../helpers/users';\nimport { getWrappedDisplayName } from './utils';\nimport { withCurrentUser } from './withCurrentUser';\n\nexport function whenLoggedIn<P>(WrappedComponent: React.ComponentType<P>) {\n  class Wrapper extends React.Component<P & { currentUser: T.CurrentUser }> {\n    static displayName = getWrappedDisplayName(WrappedComponent, 'whenLoggedIn');\n\n    componentDidMount() {\n      if (!isLoggedIn(this.props.currentUser)) {\n        handleRequiredAuthentication();\n      }\n    }\n\n    render() {\n      if (isLoggedIn(this.props.currentUser)) {\n        return <WrappedComponent {...this.props} />;\n      } else {\n        return null;\n      }\n    }\n  }\n\n  return withCurrentUser(Wrapper);\n}\n"],"sourceRoot":""}