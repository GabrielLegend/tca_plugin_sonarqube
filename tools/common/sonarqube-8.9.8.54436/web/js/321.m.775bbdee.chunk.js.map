{"version":3,"sources":["webpack:///./src/main/js/apps/permissions/project/components/AllHoldersList.tsx","webpack:///./src/main/js/apps/permissions/project/components/PageHeader.tsx","webpack:///./src/main/js/apps/permissions/project/components/PublicProjectDisclaimer.tsx","webpack:///./src/main/js/apps/permissions/project/components/App.tsx","webpack:///./src/main/js/apps/permissions/project/components/AppContainer.ts","webpack:///./src/main/js/apps/permissions/utils.ts","webpack:///./src/main/js/api/permissions.ts","webpack:///./src/main/js/apps/permissions/styles.css?a730","webpack:///./src/main/js/apps/permissions/styles.css","webpack:///./src/main/js/apps/permissions/shared/components/SearchForm.tsx","webpack:///./src/main/js/apps/permissions/shared/components/PermissionCell.tsx","webpack:///./src/main/js/apps/permissions/shared/components/GroupHolder.tsx","webpack:///./src/main/js/apps/permissions/shared/components/PermissionHeader.tsx","webpack:///./src/main/js/apps/permissions/shared/components/UserHolder.tsx","webpack:///./src/main/js/apps/permissions/shared/components/HoldersList.tsx","webpack:///./src/main/js/components/common/VisibilitySelector.tsx","webpack:///./src/main/js/apps/permissions/project/components/ApplyTemplate.tsx"],"names":["handleToggleUser","user","permission","permissions","includes","this","props","revokePermissionFromUser","login","grantPermissionToUser","handleToggleGroup","group","revokePermissionFromGroup","name","grantPermissionToGroup","handleSelectPermission","onPermissionSelect","filter","groups","groupsPaging","users","usersPaging","order","component","qualifier","visibility","count","total","length","HoldersList","onSelectPermission","onToggleGroup","onToggleUser","query","selectedPermission","SearchForm","onFilter","onFilterChange","onSearch","onQueryChange","loadMore","onLoadMore","mounted","state","applyTemplateModal","handleApplyTemplate","setState","handleApplyTemplateClose","configuration","canApplyPermissionTemplate","description","visibilityDescription","undefined","className","loading","onClick","ApplyTemplate","onApply","loadHolders","onClose","project","PublicProjectDisclaimer","onConfirm","confirmButtonText","header","Alert","variant","super","stopLoading","loadUsersAndGroups","userPage","groupsPage","getUsers","projectKey","key","q","p","Promise","resolve","paging","getGroups","all","then","usersResponse","groupsResponse","pageIndex","handleFilterChange","handleQueryChange","handlePermissionSelect","addPermissionToGroup","map","candidate","addPermissionToUser","removePermissionFromGroup","removePermissionFromUser","groupName","handleVisibilityChange","openDisclaimer","turnProjectToPrivate","turnProjectToPublic","onComponentChange","disclaimer","closeDisclaimer","canTurnToPrivate","canUpdateProjectVisibilityToPrivate","id","defer","title","VisibilitySelector","onChange","currentUser","PERMISSIONS_ORDER_FOR_PROJECT_TEMPLATE","PERMISSIONS_ORDER_GLOBAL","category","PERMISSIONS_ORDER_FOR_VIEW","PERMISSIONS_ORDER_BY_QUALIFIER","TRK","VW","SVW","APP","DEV","convertToPermissionDefinition","l10nPrefix","getMessage","messageKey","cloudMessageKey","filterPermissions","hasApplicationsEnabled","hasPortfoliosEnabled","convertToPermissionDefinitions","isPermissionDefinitionGroup","Boolean","data","catch","getPermissionTemplates","createPermissionTemplate","updatePermissionTemplate","deletePermissionTemplate","setDefaultPermissionTemplate","templateId","applyTemplateToProject","bulkApplyTemplate","grantTemplatePermissionToUser","revokeTemplatePermissionFromUser","grantTemplatePermissionToGroup","revokeTemplatePermissionFromGroup","addProjectCreatorToTemplate","removeProjectCreatorFromTemplate","getPermissionsUsersForComponent","ps","getPermissionsGroupsForComponent","getGlobalPermissionsUsers","getGlobalPermissionsGroups","getPermissionTemplateUsers","r","getPermissionTemplateGroups","changeProjectVisibility","changeProjectDefaultVisibility","projectVisibility","api","content","__esModule","default","module","i","options","exported","locals","exports","___CSS_LOADER_API_IMPORT___","push","filterOptions","value","label","onCheck","minLength","placeholder","permissionItem","checked","disabled","selected","handleCheck","_checked","onToggle","style","whiteSpace","handlePermissionClick","event","preventDefault","currentTarget","blur","getTooltipOverlay","InstanceMessage","message","showPublicProjectsWarning","overlay","href","permissionCells","Avatar","hash","avatar","size","email","initialPermissionsCount","handleGroupToggle","handleUserToggle","getItemInitialPermissionsCount","item","isPermissionUser","prevProps","columns","colSpan","items","itemWithPermissions","itemWithoutPermissions","children","renderEmpty","renderItem","showDetails","done","fetchPermissionTemplates","permissionTemplates","handleSubmit","permissionTemplate","reject","handlePermissionTemplateChange","onSubmit","onCloseClick","onFormSubmit","submitting","htmlFor","clearable"],"mappings":"4OA8Ce,MAAM,UAAuB,gBAA5C,c,oBACE,KAAAA,iBAAmB,CAACC,EAAwBC,IACpBD,EAAKE,YAAYC,SAASF,GAGvCG,KAAKC,MAAMC,yBAAyBN,EAAKO,MAAON,GAEhDG,KAAKC,MAAMG,sBAAsBR,EAAKO,MAAON,GAIxD,KAAAQ,kBAAoB,CAACC,EAA0BT,IACvBS,EAAMR,YAAYC,SAASF,GAGxCG,KAAKC,MAAMM,0BAA0BD,EAAME,KAAMX,GAEjDG,KAAKC,MAAMQ,uBAAuBH,EAAME,KAAMX,GAIzD,KAAAa,uBAA0Bb,IACxBG,KAAKC,MAAMU,mBAAmBd,IAGhC,SACE,MAAM,OAAEe,EAAF,OAAUC,EAAV,aAAkBC,EAAlB,MAAgCC,EAAhC,YAAuCC,GAAgBhB,KAAKC,MAClE,IAAIgB,EAAQ,IAA+BjB,KAAKC,MAAMiB,UAAUC,WAClC,WAA1BnB,KAAKC,MAAMmB,aACbH,EAAQ,IAAQA,EAAO,OAAQ,eAEjC,MAAMnB,EAAc,YAA+BmB,EAAO,iBAE1D,IAAII,EAAQ,EACRC,EAAQ,EAUZ,MATe,UAAXV,IACFS,GAASR,EAAOU,OAChBD,GAASR,EAAeA,EAAaQ,MAAQT,EAAOU,QAEvC,WAAXX,IACFS,GAASN,EAAMQ,OACfD,GAASN,EAAcA,EAAYM,MAAQP,EAAMQ,QAIjD,gCACE,gBAACC,EAAA,EAAW,CACVZ,OAAQZ,KAAKC,MAAMW,OACnBC,OAAQb,KAAKC,MAAMY,OACnBY,mBAAoBzB,KAAKU,uBACzBgB,cAAe1B,KAAKK,kBACpBsB,aAAc3B,KAAKL,iBACnBG,YAAaA,EACb8B,MAAO5B,KAAKC,MAAM2B,MAClBC,mBAAoB7B,KAAKC,MAAM4B,mBAC/Bd,MAAOf,KAAKC,MAAMc,OAClB,gBAACe,EAAA,EAAU,CACTlB,OAAQZ,KAAKC,MAAMW,OACnBmB,SAAU/B,KAAKC,MAAM+B,eACrBC,SAAUjC,KAAKC,MAAMiC,cACrBN,MAAO5B,KAAKC,MAAM2B,SAGtB,gBAAC,IAAU,CAACP,MAAOA,EAAOc,SAAUnC,KAAKC,MAAMmC,WAAYd,MAAOA,M,+BC1E3D,MAAM,UAAmB,gBAAxC,c,oBACE,KAAAe,SAAU,EACV,KAAAC,MAAe,CAAEC,oBAAoB,GAUrC,KAAAC,oBAAsB,KACpBxC,KAAKyC,SAAS,CAAEF,oBAAoB,KAGtC,KAAAG,yBAA2B,KACrB1C,KAAKqC,SACPrC,KAAKyC,SAAS,CAAEF,oBAAoB,KAdxC,oBACEvC,KAAKqC,SAAU,EAGjB,uBACErC,KAAKqC,SAAU,EAajB,SACE,MAAM,UAAEnB,GAAclB,KAAKC,OACrB,cAAE0C,GAAkBzB,EACpB0B,EACa,MAAjBD,GAAyBA,EAAcC,2BAEzC,IAAIC,EAAc,oBAAU,2BACxB,YAAgB3B,EAAUC,WAC5B0B,EAAc,oBAAU,oCACf,YAAc3B,EAAUC,aACjC0B,EAAc,oBAAU,uCAG1B,MAAMC,EACoB,QAAxB5B,EAAUC,WAAuBD,EAAUE,WACvC,oBAAU,aAAcF,EAAUE,WAAY,cAAeF,EAAUC,gBACvE4B,EAEN,OACE,0BAAQC,UAAU,eAChB,sBAAIA,UAAU,cAAc,oBAAU,qBAErChD,KAAKC,MAAMgD,SAAW,qBAAGD,UAAU,YAEnCJ,GACC,uBAAKI,UAAU,gBACb,gBAAC,SAAM,CAACA,UAAU,oBAAoBE,QAASlD,KAAKwC,qBACjD,oBAAU,iCAGZxC,KAAKsC,MAAMC,oBACV,gBAACY,EAAA,EAAa,CACZC,QAASpD,KAAKC,MAAMoD,YACpBC,QAAStD,KAAK0C,yBACda,QAASrC,KAMjB,uBAAK8B,UAAU,oBACb,yBAAIH,GACHC,GAAyB,yBAAIA,M,+BClEzB,SAASU,GAAwB,UAAEtC,EAAF,QAAaoC,EAAb,UAAsBG,IACpE,MAAM,UAAEtC,GAAcD,EACtB,OACE,gBAAC,IAAY,CACXwC,kBAAmB,oBAAU,uCAAwCvC,GACrEwC,OAAQ,kCAAwB,iCAAkCzC,EAAUV,MAC5E8C,QAASA,EACTG,UAAWA,GACX,gBAACG,EAAA,MAAK,CAACC,QAAQ,WACZ,oBAAU,+DAAgE1C,IAE7E,yBAAI,oBAAU,uDAAwDA,K,urBCG7D,MAAM,UAAY,gBAG/B,YAAYlB,GACV6D,MAAM7D,GAHR,KAAAoC,SAAU,EAuBV,KAAA0B,YAAc,KACR/D,KAAKqC,SACPrC,KAAKyC,SAAS,CAAEQ,SAAS,KAI7B,KAAAe,mBAAqB,CAACC,EAAmBC,KACvC,MAAM,UAAEhD,GAAclB,KAAKC,OACrB,OAAEW,EAAF,MAAUgB,EAAV,mBAAiBC,GAAuB7B,KAAKsC,MAE7C6B,EACO,WAAXvD,EACI,IAAoC,CAClCwD,WAAYlD,EAAUmD,IACtBC,EAAG1C,QAASmB,EACZlD,WAAYgC,EACZ0C,EAAGN,IAELO,QAAQC,QAAQ,CAAEC,YAAQ3B,EAAWhC,MAAO,KAE5C4D,EACO,UAAX/D,EACI,IAAqC,CACnCwD,WAAYlD,EAAUmD,IACtBC,EAAG1C,QAASmB,EACZlD,WAAYgC,EACZ0C,EAAGL,IAELM,QAAQC,QAAQ,CAAEC,YAAQ3B,EAAWlC,OAAQ,KAEnD,OAAO2D,QAAQI,IAAI,CAACT,EAAUQ,KAGhC,KAAAtB,YAAc,KACZrD,KAAKyC,SAAS,CAAEQ,SAAS,IAClBjD,KAAKgE,qBAAqBa,KAAK,EAAEC,EAAeC,MACjD/E,KAAKqC,SACPrC,KAAKyC,SAAS,CACZ5B,OAAQkE,EAAelE,OACvBC,aAAciE,EAAeL,OAC7BzB,SAAS,EACTlC,MAAO+D,EAAc/D,MACrBC,YAAa8D,EAAcJ,UAG9B1E,KAAK+D,cAGV,KAAA3B,WAAa,KACX,MAAM,YAAEpB,EAAF,aAAeF,GAAiBd,KAAKsC,MAE3C,OADAtC,KAAKyC,SAAS,CAAEQ,SAAS,IAClBjD,KAAKgE,mBACVhD,EAAcA,EAAYgE,UAAY,EAAI,EAC1ClE,EAAeA,EAAakE,UAAY,EAAI,GAC5CH,KAAK,EAAEC,EAAeC,MAClB/E,KAAKqC,SACPrC,KAAKyC,SAAS,EAAG5B,SAAQE,YAAX,CACZF,OAAQ,IAAIA,KAAWkE,EAAelE,QACtCC,aAAciE,EAAeL,OAC7BzB,SAAS,EACTlC,MAAO,IAAIA,KAAU+D,EAAc/D,OACnCC,YAAa8D,EAAcJ,WAG9B1E,KAAK+D,cAGV,KAAAkB,mBAAsBrE,IAChBZ,KAAKqC,SACPrC,KAAKyC,SAAS,CAAE7B,UAAUZ,KAAKqD,cAInC,KAAA6B,kBAAqBtD,IACf5B,KAAKqC,SACPrC,KAAKyC,SAAS,CAAEb,SAAS5B,KAAKqD,cAIlC,KAAA8B,uBAA0BtD,IACpB7B,KAAKqC,SACPrC,KAAKyC,SACFH,IAAD,CACET,mBACES,EAAMT,qBAAuBA,OAAqBkB,EAAYlB,IAElE7B,KAAKqD,cAKX,KAAA+B,qBAAuB,CAAC9E,EAAeT,IAC9BG,KAAKsC,MAAMzB,OAAOwE,IAAIC,GAC3BA,EAAU9E,OAASF,EAAnB,KACSgF,EADT,CACoBxF,YAAa,IAAIwF,EAAUxF,YAAaD,KACxDyF,GAIR,KAAAC,oBAAsB,CAAC3F,EAAcC,IAC5BG,KAAKsC,MAAMvB,MAAMsE,IAAIC,GAC1BA,EAAUnF,QAAUP,EAApB,KACS0F,EADT,CACoBxF,YAAa,IAAIwF,EAAUxF,YAAaD,KACxDyF,GAIR,KAAAE,0BAA4B,CAAClF,EAAeT,IACnCG,KAAKsC,MAAMzB,OAAOwE,IAAIC,GAC3BA,EAAU9E,OAASF,EAAnB,KACSgF,EADT,CACoBxF,YAAa,IAAQwF,EAAUxF,YAAaD,KAC5DyF,GAIR,KAAAG,yBAA2B,CAAC7F,EAAcC,IACjCG,KAAKsC,MAAMvB,MAAMsE,IAAIC,GAC1BA,EAAUnF,QAAUP,EAApB,KACS0F,EADT,CACoBxF,YAAa,IAAQwF,EAAUxF,YAAaD,KAC5DyF,GAIR,KAAA7E,uBAAyB,CAACH,EAAeT,IACnCG,KAAKqC,SACPrC,KAAKyC,SAAS,CACZQ,SAAS,EACTpC,OAAQb,KAAKoF,qBAAqB9E,EAAOT,KAEpC,IACmB,CACtBuE,WAAYpE,KAAKC,MAAMiB,UAAUmD,IACjCqB,UAAWpF,EACXT,eAEDgF,KAAK7E,KAAK+D,YAAa,KAClB/D,KAAKqC,SACPrC,KAAKyC,SAAS,CACZQ,SAAS,EACTpC,OAAQb,KAAKwF,0BAA0BlF,EAAOT,QAKjD2E,QAAQC,UAGjB,KAAArE,sBAAwB,CAACR,EAAcC,IACjCG,KAAKqC,SACPrC,KAAKyC,SAAS,CACZQ,SAAS,EACTlC,MAAOf,KAAKuF,oBAAoB3F,EAAMC,KAEjC,IACkB,CACrBuE,WAAYpE,KAAKC,MAAMiB,UAAUmD,IACjClE,MAAOP,EACPC,eAEDgF,KAAK7E,KAAK+D,YAAa,KAClB/D,KAAKqC,SACPrC,KAAKyC,SAAS,CACZQ,SAAS,EACTlC,MAAOf,KAAKyF,yBAAyB7F,EAAMC,QAK9C2E,QAAQC,UAGjB,KAAAlE,0BAA4B,CAACD,EAAeT,IACtCG,KAAKqC,SACPrC,KAAKyC,SAAS,CACZQ,SAAS,EACTpC,OAAQb,KAAKwF,0BAA0BlF,EAAOT,KAEzC,IACsB,CACzBuE,WAAYpE,KAAKC,MAAMiB,UAAUmD,IACjCqB,UAAWpF,EACXT,eAEDgF,KAAK7E,KAAK+D,YAAa,KAClB/D,KAAKqC,SACPrC,KAAKyC,SAAS,CACZQ,SAAS,EACTpC,OAAQb,KAAKoF,qBAAqB9E,EAAOT,QAK5C2E,QAAQC,UAGjB,KAAAvE,yBAA2B,CAACN,EAAcC,IACpCG,KAAKqC,SACPrC,KAAKyC,SAAS,CACZQ,SAAS,EACTlC,MAAOf,KAAKyF,yBAAyB7F,EAAMC,KAEtC,IACqB,CACxBuE,WAAYpE,KAAKC,MAAMiB,UAAUmD,IACjClE,MAAOP,EACPC,eAEDgF,KAAK7E,KAAK+D,YAAa,KAClB/D,KAAKqC,SACPrC,KAAKyC,SAAS,CACZQ,SAAS,EACTlC,MAAOf,KAAKuF,oBAAoB3F,EAAMC,QAKzC2E,QAAQC,UAGjB,KAAAkB,uBAA0BvE,IACL,WAAfA,EACFpB,KAAK4F,iBAEL5F,KAAK6F,wBAIT,KAAAC,oBAAsB,KACpB9F,KAAKC,MAAM8F,kBAAkB,CAAE3E,WAAY,WAC3C,IAA4BpB,KAAKC,MAAMiB,UAAUmD,IAAK,UAAUQ,KAC9D,KACE7E,KAAKqD,eAEP,KACErD,KAAKC,MAAM8F,kBAAkB,CAC3B3E,WAAY,eAMpB,KAAAyE,qBAAuB,KACrB7F,KAAKC,MAAM8F,kBAAkB,CAAE3E,WAAY,YAC3C,IAA4BpB,KAAKC,MAAMiB,UAAUmD,IAAK,WAAWQ,KAC/D,KACE7E,KAAKqD,eAEP,KACErD,KAAKC,MAAM8F,kBAAkB,CAC3B3E,WAAY,cAMpB,KAAAwE,eAAiB,KACX5F,KAAKqC,SACPrC,KAAKyC,SAAS,CAAEuD,YAAY,KAIhC,KAAAC,gBAAkB,KACZjG,KAAKqC,SACPrC,KAAKyC,SAAS,CAAEuD,YAAY,KA1R9BhG,KAAKsC,MAAQ,CACX0D,YAAY,EACZpF,OAAQ,MACRC,OAAQ,GACRoC,SAAS,EACTrB,MAAO,GACPb,MAAO,IAIX,oBACEf,KAAKqC,SAAU,EACfrC,KAAKqD,cAGP,uBACErD,KAAKqC,SAAU,EA8QjB,SACE,MAAM,UAAEnB,GAAclB,KAAKC,MACrBiG,EACJhF,EAAUyB,eAAiBzB,EAAUyB,cAAcwD,oCAErD,OACE,uBAAKnD,UAAU,oBAAoBoD,GAAG,4BACpC,gBAAC,IAAM,CAACC,OAAO,EAAOC,MAAO,oBAAU,sBAEvC,gBAAC,EAAU,CACTpF,UAAWA,EACXmC,YAAarD,KAAKqD,YAClBJ,QAASjD,KAAKsC,MAAMW,UAEtB,2BACE,gBAACsD,EAAA,EAAkB,CACjBL,iBAAkBA,EAClBlD,UAAU,mCACVwD,SAAUxG,KAAK2F,uBACfvE,WAAYF,EAAUE,aAEvBpB,KAAKsC,MAAM0D,YACV,gBAACxC,EAAuB,CACtBtC,UAAWA,EACXoC,QAAStD,KAAKiG,gBACdxC,UAAWzD,KAAK8F,uBAItB,gBAAC,EAAc,CACb5E,UAAWA,EACXN,OAAQZ,KAAKsC,MAAM1B,OACnBH,uBAAwBT,KAAKS,uBAC7BL,sBAAuBJ,KAAKI,sBAC5BS,OAAQb,KAAKsC,MAAMzB,OACnBC,aAAcd,KAAKsC,MAAMxB,aACzBkB,eAAgBhC,KAAKiF,mBACrB7C,WAAYpC,KAAKoC,WACjBzB,mBAAoBX,KAAKmF,uBACzBjD,cAAelC,KAAKkF,kBACpBtD,MAAO5B,KAAKsC,MAAMV,MAClBrB,0BAA2BP,KAAKO,0BAChCL,yBAA0BF,KAAKE,yBAC/B2B,mBAAoB7B,KAAKsC,MAAMT,mBAC/Bd,MAAOf,KAAKsC,MAAMvB,MAClBC,YAAahB,KAAKsC,MAAMtB,YACxBI,WAAYF,EAAUE,eCrWjB,sBAJUkB,IAAD,CACtBmE,YAAa,yBAAenE,KAGf,CAAyB,I,slBCLjC,MAAMoE,EAAyC,CACpD,OACA,aACA,aACA,uBACA,QACA,QAGWC,EAA2B,CACtC,QACA,CAAEC,SAAU,aAAc9G,YAAa,CAAC,YAAa,iBACrD,OACA,CAAE8G,SAAU,UAAW9G,YAAa,CAAC,eAAgB,qBAAsB,sBAGhE+G,EAA6B,CAAC,OAAQ,SAItCC,EAAmD,CAC9DC,IAAKL,EACLM,GAAIH,EACJI,IAAKJ,EACLK,IAAKL,EACLM,IAPuC,CAAC,OAAQ,UAUlD,SAASC,EAA8BvH,EAAoBwH,GACzD,MAAMC,EAAcC,IAClB,MAAMC,EAAe,UAAMD,EAAN,eACrB,OAAO,0BAAkB,qBAAWC,GAChC,oBAAUA,GACV,oBAAUD,IAMhB,MAAO,CACLlD,IAAKxE,EACLW,KALW8G,EAAW,GAAD,OAAID,EAAJ,YAAkBxH,IAMvCgD,YALkByE,EAAW,GAAD,OAAID,EAAJ,YAAkBxH,EAAlB,WASzB,SAAS4H,EACd3H,EACA4H,EACAC,GAEA,OAAO7H,EAAYuF,IAAIxF,GACK,iBAAfA,GAAmD,YAAxBA,EAAW+G,S,+VACxC,CAAP,GACK/G,EADL,CAEEC,YAAaD,EAAWC,YAAYc,OAAO2D,GAEjC,iBAANA,GACO,qBAANA,GAA4BoD,GACtB,uBAANpD,GAA8BmD,KAKhC7H,GAIJ,SAAS+H,EACd9H,EACAuH,GAEA,OAAOvH,EAAYuF,IAAIxF,GACK,iBAAfA,EACF,CACL+G,SAAU/G,EAAW+G,SACrB9G,YAAaD,EAAWC,YAAYuF,IAAIxF,GACtCuH,EAA8BvH,EAAYwH,KAIzCD,EAA8BvH,EAAYwH,IAI9C,SAASQ,EACdhI,GAEA,OAAOiI,QAAQjI,GAAeA,EAA2C+G,Y,iCC9G3E,s2BAyBO,SAASxG,EAAsB2H,GAKpC,OAAO,eAAK,4BAA6BA,GAAMC,MAAM,KAGhD,SAAS9H,EAAyB6H,GAKvC,OAAO,eAAK,+BAAgCA,GAAMC,MAAM,KAGnD,SAASvH,EAAuBsH,GAKrC,OAAO,eAAK,6BAA8BA,GAAMC,MAAM,KAGjD,SAASzH,EAA0BwH,GAKxC,OAAO,eAAK,gCAAiCA,GAAMC,MAAM,KASpD,SAASC,IAEd,OAAO,kBADK,qCAIP,SAASC,EAAyBH,GACvC,OAAO,mBAAS,mCAAoCA,GAG/C,SAASI,EAAyBJ,GACvC,OAAO,eAAK,mCAAoCA,GAG3C,SAASK,EAAyBL,GACvC,OAAO,eAAK,mCAAoCA,GAAMC,MAAM,KAMvD,SAASK,EAA6BC,EAAoBnH,GAC/D,OAAO,eAAK,wCAAyC,CAAEmH,aAAYnH,cAG9D,SAASoH,EAAuBR,GACrC,OAAO,eAAK,kCAAmCA,GAAMC,MAAM,KAGtD,SAASQ,EAAkBT,GAChC,OAAO,eAAK,uCAAwCA,GAG/C,SAASU,EAA8BV,GAK5C,OAAO,eAAK,wCAAyCA,GAGhD,SAASW,EAAiCX,GAK/C,OAAO,eAAK,6CAA8CA,GAGrD,SAASY,EAA+BZ,GAC7C,OAAO,eAAK,yCAA0CA,GAGjD,SAASa,EAAkCb,GAChD,OAAO,eAAK,8CAA+CA,GAGtD,SAASc,EAA4BP,EAAoBzI,GAC9D,OAAO,eAAK,mDAAoD,CAAEyI,aAAYzI,eAGzE,SAASiJ,EACdR,EACAzI,GAEA,OAAO,eAAK,wDAAyD,CAAEyI,aAAYzI,eAG9E,SAASkJ,EAAgChB,GAU9C,OAHKA,EAAKiB,KACRjB,EAAKiB,GAnHS,KAqHT,kBAAQ,yBAA0BjB,GAAMC,MAAM,KAGhD,SAASiB,EAAiClB,GAU/C,OAHKA,EAAKiB,KACRjB,EAAKiB,GAhIS,KAkIT,kBAAQ,0BAA2BjB,GAAMC,MAAM,KAGjD,SAASkB,EAA0BnB,GASxC,OAHKA,EAAKiB,KACRjB,EAAKiB,GA5IS,KA8IT,kBAAQ,yBAA0BjB,GAGpC,SAASoB,EAA2BpB,GASzC,OAHKA,EAAKiB,KACRjB,EAAKiB,GAxJS,KA0JT,kBAAQ,0BAA2BjB,GAGrC,SAASqB,EACdd,EACA1G,EACA/B,GAEA,MAAMkI,EAAoB,CAAEO,aAAYU,GAlKxB,KAyKhB,OANIpH,IACFmG,EAAKzD,EAAI1C,GAEP/B,IACFkI,EAAKlI,WAAaA,GAEb,kBAAQ,kCAAmCkI,GAAMlD,KAAKwE,GAAKA,EAAEtI,OAG/D,SAASuI,EACdhB,EACA1G,EACA/B,GAEA,MAAMkI,EAAoB,CAAEO,aAAYU,GAjLxB,KAwLhB,OANIpH,IACFmG,EAAKzD,EAAI1C,GAEP/B,IACFkI,EAAKlI,WAAaA,GAEb,kBAAQ,mCAAoCkI,GAAMlD,KAAKwE,GAAKA,EAAExI,QAGhE,SAAS0I,EACdhG,EACAnC,GAEA,OAAO,eAAK,kCAAmC,CAAEmC,UAASnC,eAAc4G,MAAM,KAGzE,SAASwB,EACdC,GAEA,OAAO,eAAK,0CAA2C,CAAEA,sBAAqBzB,MAC5E,O,oBC7NJ,IAAI0B,EAAM,EAAQ,KACFC,EAAU,EAAQ,KAIC,iBAFvBA,EAAUA,EAAQC,WAAaD,EAAQE,QAAUF,KAG/CA,EAAU,CAAC,CAACG,EAAOC,EAAIJ,EAAS,MAG9C,IAAIK,EAAU,CAEd,OAAiB,OACjB,WAAoB,GAIhBC,GAFSP,EAAIC,EAASK,GAEXL,EAAQO,OAASP,EAAQO,OAAS,IAIjDJ,EAAOK,QAAUF,G,qBClBjBE,EADkC,EAAQ,IAChCC,EAA4B,IAE9BC,KAAK,CAACP,EAAOC,EAAI,qVAAwV,KAEjXD,EAAOK,QAAUA,G,iCCNjB,yFA+Be,SAASrI,EAAW7B,GACjC,MAAMqK,EAAgB,CACpB,CAAEC,MAAO,MAAOC,MAAO,oBAAU,QACjC,CAAED,MAAO,QAASC,MAAO,oBAAU,eACnC,CAAED,MAAO,SAAUC,MAAO,oBAAU,sBAGtC,OACE,uBAAKxH,UAAU,oBACb,gBAAC,IAAW,CACVxC,KAAK,kBACLiK,QAASxK,EAAM8B,SACfiI,QAASM,EACTC,MAAOtK,EAAMW,SAGf,uBAAKoC,UAAU,sBACb,gBAAC,IAAS,CACR0H,UAAW,EACXlE,SAAUvG,EAAMgC,SAChB0I,YAAa,oBAAU,qCACvBJ,MAAOtK,EAAM2B,Y,kMCpBR,MAAM,UAAuB,gBAC1C,SACE,MAAM,QAAEqB,EAAF,QAAWwH,EAAX,WAAoB5K,EAApB,eAAgC+K,EAAhC,mBAAgD/I,GAAuB7B,KAAKC,MAClF,OAAI,YAA4BJ,GAE5B,sBAAImD,UAAU,eACXnD,EAAWC,YAAYuF,IAAIxF,GAC1B,uBAAKwE,IAAKxE,EAAWwE,KACnB,gBAAC,IAAQ,CACPwG,QAASD,EAAe9K,YAAYC,SAASF,EAAWwE,KACxDyG,SAAU7H,EAAQlD,SAASF,EAAWwE,KACtC+B,GAAIvG,EAAWwE,IACfoG,QAASA,GACT,wBAAMzH,UAAU,sBAAsBnD,EAAWW,UAQzD,sBACEwC,UAAW,EAAW,4CAA6C,CACjE+H,SAAUlL,EAAWwE,MAAQxC,KAE/B,gBAAC,IAAQ,CACPgJ,QAASD,EAAe9K,YAAYC,SAASF,EAAWwE,KACxDyG,SAAU7H,EAAQlD,SAASF,EAAWwE,KACtC+B,GAAIvG,EAAWwE,IACfoG,QAASA,MCzBN,MAAM,UAAoB,gBAAzC,c,oBACE,KAAApI,SAAU,EACV,KAAAC,MAAe,CAAEW,QAAS,IAU1B,KAAAc,YAAelE,IACTG,KAAKqC,SACPrC,KAAKyC,SAASH,IAAK,CAAOW,QAAS,IAAQX,EAAMW,QAASpD,OAI9D,KAAAmL,YAAc,CAACC,EAAmBpL,UACbkD,IAAflD,IACFG,KAAKyC,SAASH,IAAK,CAAOW,QAAS,IAAIX,EAAMW,QAASpD,MACtDG,KAAKC,MAAMiL,SAASlL,KAAKC,MAAMK,MAAOT,GAAYgF,KAChD,IAAM7E,KAAK+D,YAAYlE,GACvB,IAAMG,KAAK+D,YAAYlE,MAnB7B,oBACEG,KAAKqC,SAAU,EAGjB,uBACErC,KAAKqC,SAAU,EAmBjB,SACE,MAAM,MAAE/B,GAAUN,KAAKC,MAEvB,OACE,0BACE,sBAAI+C,UAAU,sBACZ,uBAAKA,UAAU,uBACb,gBAAC,IAAS,CAACA,UAAU,qBACrB,uBAAKA,UAAU,iBACb,uBAAKA,UAAU,+BACb,8BAAS1C,EAAME,OAEjB,uBAAKwC,UAAU,oBAAoBmI,MAAO,CAAEC,WAAY,WACrD9K,EAAMuC,gBAKd7C,KAAKC,MAAMH,YAAYuF,IAAIxF,GAC1B,gBAAC,EAAc,CACbwE,IAAK,YAA4BxE,GAAcA,EAAW+G,SAAW/G,EAAWwE,IAChFpB,QAASjD,KAAKsC,MAAMW,QACpBwH,QAASzK,KAAKgL,YACdnL,WAAYA,EACZ+K,eAAgBtK,EAChBuB,mBAAoB7B,KAAKC,MAAM4B,wB,0DCtD5B,MAAM,UAAyB,gBAA9C,c,oBACE,KAAAwJ,sBAAyBC,IACvBA,EAAMC,iBACND,EAAME,cAAcC,OACpB,MAAM,WAAE5L,GAAeG,KAAKC,MACxBD,KAAKC,MAAMwB,qBAAuB,YAA4B5B,IAChEG,KAAKC,MAAMwB,mBAAmB5B,EAAWwE,MAI7C,KAAAqH,kBAAoB,KAClB,MAAM,WAAE7L,GAAeG,KAAKC,MAE5B,OAAI,YAA4BJ,GACvBA,EAAWC,YAAYuF,IAAIxF,GAChC,gBAAC,WAAc,CAACwE,IAAKxE,EAAWwE,KAC9B,qBAAGrB,UAAU,uBAAuBnD,EAAWW,KAAU,KACzD,gBAACmL,EAAA,EAAe,CAACtH,IAAKxE,EAAWwE,IAAKuH,QAAS/L,EAAWgD,cAC1D,6BAIA7C,KAAKC,MAAM4L,2BAA6B,CAAC,OAAQ,cAAc9L,SAASF,EAAWwE,KAEnF,2BACE,gBAACsH,EAAA,EAAe,CAACC,QAAS/L,EAAWgD,cACrC,gBAACe,EAAA,MAAK,CAACZ,UAAU,aAAaa,QAAQ,WACnC,oBAAU,2CAKZ,gBAAC8H,EAAA,EAAe,CAACC,QAAS/L,EAAWgD,eAIhD,SACE,MAAM,mBAAEpB,EAAF,WAAsB5B,GAAeG,KAAKC,MAChD,IAAIO,EAkBJ,OAhBEA,EADE,YAA4BX,GACvB,oBAAU,qBAAsBA,EAAW+G,UAE3CnF,EACL,gBAAC,IAAO,CACNqK,QAAS,kCACP,4CACAjM,EAAWW,OAEb,qBAAGuL,KAAK,IAAI7I,QAASlD,KAAKqL,uBACvBxL,EAAWW,OAIhBX,EAAWW,KAIb,sBACEwC,UAAW,EAAW,4CAA6C,CACjE+H,UACG,YAA4BlL,IAC7BA,EAAWwE,MAAQrE,KAAKC,MAAM4B,sBAElC,uBAAKmB,UAAU,2BACZxC,EACD,gBAAC,IAAW,CAACwC,UAAU,cAAc8I,QAAS9L,KAAK0L,yB,aC/D9C,MAAM,UAAmB,gBAAxC,c,oBACE,KAAArJ,SAAU,EACV,KAAAC,MAAe,CAAEW,QAAS,IAU1B,KAAAc,YAAelE,IACTG,KAAKqC,SACPrC,KAAKyC,SAASH,IAAK,CAAOW,QAAS,IAAQX,EAAMW,QAASpD,OAI9D,KAAAmL,YAAc,CAACC,EAAmBpL,UACbkD,IAAflD,IACFG,KAAKyC,SAASH,IAAK,CAAOW,QAAS,IAAIX,EAAMW,QAASpD,MACtDG,KAAKC,MAAMiL,SAASlL,KAAKC,MAAML,KAAMC,GAAYgF,KAC/C,IAAM7E,KAAK+D,YAAYlE,GACvB,IAAMG,KAAK+D,YAAYlE,MAnB7B,oBACEG,KAAKqC,SAAU,EAGjB,uBACErC,KAAKqC,SAAU,EAmBjB,SACE,MAAM,KAAEzC,GAASI,KAAKC,MAChB+L,EAAkBhM,KAAKC,MAAMH,YAAYuF,IAAIxF,GACjD,gBAAC,EAAc,CACbwE,IAAK,YAA4BxE,GAAcA,EAAW+G,SAAW/G,EAAWwE,IAChFpB,QAASjD,KAAKsC,MAAMW,QACpBwH,QAASzK,KAAKgL,YACdnL,WAAYA,EACZ+K,eAAgBhL,EAChBiC,mBAAoB7B,KAAKC,MAAM4B,sBAInC,MAAmB,cAAfjC,EAAKO,MAEL,0BACE,sBAAI6C,UAAU,sBACZ,2BACE,8BAASpD,EAAKY,OAEhB,uBAAKwC,UAAU,oBAAoBmI,MAAO,CAAEC,WAAY,WACrD,oBAAU,uDAGdY,GAML,0BACE,sBAAIhJ,UAAU,sBACZ,uBAAKA,UAAU,uBACb,gBAACiJ,EAAA,EAAM,CACLjJ,UAAU,sCACVkJ,KAAMtM,EAAKuM,OACX3L,KAAMZ,EAAKY,KACX4L,KAAM,KAER,uBAAKpJ,UAAU,iBACb,uBAAKA,UAAU,+BACb,8BAASpD,EAAKY,MACd,wBAAMwC,UAAU,oBAAoBpD,EAAKO,QAE3C,uBAAK6C,UAAU,iDAAiDpD,EAAKyM,UAI1EL,I,urBCrEM,MAAM,UAAoB,gBAAzC,c,oBACE,KAAA1J,MAAe,CAAEgK,wBAAyB,IAW1C,KAAAC,kBAAoB,CAACjM,EAA0BT,KAC7C,MAAMwE,EAAM/D,EAAM8F,IAAM9F,EAAME,KAS9B,YARgDuC,IAA5C/C,KAAKsC,MAAMgK,wBAAwBjI,IACrCrE,KAAKyC,SAASH,IAAK,CACjBgK,wBAAwB,EAAD,GAClBhK,EAAMgK,wBADY,CAErB,CAACjI,GAAM/D,EAAMR,YAAYyB,YAIxBvB,KAAKC,MAAMyB,cAAcpB,EAAOT,IAGzC,KAAA2M,iBAAmB,CAAC5M,EAAwBC,UACakD,IAAnD/C,KAAKsC,MAAMgK,wBAAwB1M,EAAKO,QAC1CH,KAAKyC,SAASH,IAAK,CACjBgK,wBAAwB,EAAD,GAClBhK,EAAMgK,wBADY,CAErB,CAAC1M,EAAKO,OAAQP,EAAKE,YAAYyB,YAI9BvB,KAAKC,MAAM0B,aAAa/B,EAAMC,IAGvC,KAAA4M,+BAAkCC,IAChC,MAAMrI,EAAMrE,KAAK2M,iBAAiBD,GAAQA,EAAKvM,MAAQuM,EAAKtG,IAAMsG,EAAKlM,KACvE,YAAmDuC,IAA5C/C,KAAKsC,MAAMgK,wBAAwBjI,GACtCrE,KAAKsC,MAAMgK,wBAAwBjI,GACnCqI,EAAK5M,YAAYyB,QAvCvB,mBAAmBqL,GACb5M,KAAKC,MAAMW,SAAWgM,EAAUhM,QAAUZ,KAAKC,MAAM2B,QAAUgL,EAAUhL,OAC3E5B,KAAKyC,SAAS,CAAE6J,wBAAyB,KAI7C,iBAAiBI,GACf,YAA4C3J,IAApC2J,EAA0BvM,MAmCpC,cACE,MAAM0M,EAAU7M,KAAKC,MAAMH,YAAYyB,OAAS,EAChD,OACE,0BACE,sBAAIuL,QAASD,GAAU,oBAAU,uBAKvC,WAAWH,EAA4C5M,GACrD,OAAOE,KAAK2M,iBAAiBD,GAC3B,gBAAC,EAAU,CACTrI,IAAG,eAAUqI,EAAKvM,OAClB+K,SAAUlL,KAAKwM,iBACf1M,YAAaA,EACb+B,mBAAoB7B,KAAKC,MAAM4B,mBAC/BjC,KAAM8M,IAGR,gBAAC,EAAW,CACVpM,MAAOoM,EACPrI,IAAG,gBAAWqI,EAAKtG,IAAMsG,EAAKlM,MAC9B0K,SAAUlL,KAAKuM,kBACfzM,YAAaA,EACb+B,mBAAoB7B,KAAKC,MAAM4B,qBAKrC,SACE,MAAM,YAAE/B,GAAgBE,KAAKC,MACvB8M,EAAQ,IAAO,IAAI/M,KAAKC,MAAMc,SAAUf,KAAKC,MAAMY,QAAS6L,GAC5D1M,KAAK2M,iBAAiBD,IAAwB,cAAfA,EAAKvM,MAC/B,EAEFuM,EAAKlM,OAEPwM,EAAqBC,GAA0B,IAAUF,EAAOL,GACrE1M,KAAKyM,+BAA+BC,IAEtC,OACE,uBAAK1J,UAAU,iCACb,yBAAOA,UAAU,gCACf,6BACE,0BACE,sBAAIA,UAAU,0BAA0BhD,KAAKC,MAAMiN,UAClDpN,EAAYuF,IAAIxF,GACf,gBAAC,EAAgB,CACfwE,IACE,YAA4BxE,GAAcA,EAAW+G,SAAW/G,EAAWwE,IAE7E5C,mBAAoBzB,KAAKC,MAAMwB,mBAC/B5B,WAAYA,EACZgC,mBAAoB7B,KAAKC,MAAM4B,mBAC/BgK,0BAA2B7L,KAAKC,MAAM4L,+BAK9C,6BACoB,IAAjBkB,EAAMxL,SAAiBvB,KAAKC,MAAMgD,SAAWjD,KAAKmN,cAClDH,EAAoB3H,IAAIqH,GAAQ1M,KAAKoN,WAAWV,EAAM5M,IACtDkN,EAAoBzL,OAAS,GAAK0L,EAAuB1L,OAAS,GACjE,gCACE,0BACE,sBAAIyB,UAAU,UAAU8J,QAAS,MAEnC,4BAIHG,EAAuB5H,IAAIqH,GAAQ1M,KAAKoN,WAAWV,EAAM5M,U,iCC/JtE,gFAgCe,MAAMyG,UAA2B,gBAC9C,SACE,OACE,uBAAKvD,UAAW,EAAWhD,KAAKC,MAAM+C,YACnC,CAAC,SAAU,WAAWqC,IAAIjE,GACzB,gBAAC,IAAK,CACJ4B,UAAS,uCAAkC5B,GAC3CiD,IAAKjD,EACLmJ,MAAOnJ,EACPyJ,QAAS7K,KAAKC,MAAMmB,aAAeA,EACnCqJ,QAASzK,KAAKC,MAAMuG,SACpBsE,SAAyB,YAAf1J,IAA6BpB,KAAKC,MAAMiG,kBAClD,2BACG,oBAAU,aAAc9E,GACxBpB,KAAKC,MAAMoN,aACV,qBAAGrK,UAAU,QAAQ,oBAAU,aAAc5B,EAAY,4B,iCC/CzE,0KA2Ce,MAAM+B,UAAsB,gBAA3C,c,oBACE,KAAAd,SAAU,EACV,KAAAC,MAAe,CAAEgL,MAAM,EAAOrK,SAAS,GAWvC,KAAAsK,yBAA2B,KACzB,cAAyB1I,KACvB,EAAG2I,0BACGxN,KAAKqC,SACPrC,KAAKyC,SAAS,CAAEQ,SAAS,EAAOuK,yBAGpC,KACMxN,KAAKqC,SACPrC,KAAKyC,SAAS,CAAEQ,SAAS,OAMjC,KAAAwK,aAAe,IACTzN,KAAKsC,MAAMoL,mBACN,YAAuB,CAC5BtJ,WAAYpE,KAAKC,MAAMsD,QAAQc,IAC/BiE,WAAYtI,KAAKsC,MAAMoL,qBACtB7I,KAAK,KACF7E,KAAKqC,UACHrC,KAAKC,MAAMmD,SACbpD,KAAKC,MAAMmD,UAEbpD,KAAKyC,SAAS,CAAE6K,MAAM,OAInB9I,QAAQmJ,YAAO5K,GAI1B,KAAA6K,+BAAiC,EAAGrD,YAClCvK,KAAKyC,SAAS,CAAEiL,mBAAoBnD,KA3CtC,oBACEvK,KAAKqC,SAAU,EACfrC,KAAKuN,2BAGP,uBACEvN,KAAKqC,SAAU,EAwCjB,SACE,MAAMsB,EAAS,kCACb,sCACA3D,KAAKC,MAAMsD,QAAQ/C,MAGrB,OACE,gBAAC,IAAW,CACVmD,OAAQA,EACRL,QAAStD,KAAKC,MAAMqD,QACpBuK,SAAU7N,KAAKyN,aACfrB,KAAK,SACJ,EAAG0B,eAAcC,eAAcC,gBAC9B,wBAAM5H,GAAG,0CAA0CyH,SAAUE,GAC3D,0BAAQ/K,UAAU,cAChB,0BAAKW,IAGP,uBAAKX,UAAU,cACZhD,KAAKsC,MAAMgL,MACV,gBAAC,QAAK,CAACzJ,QAAQ,WAAW,oBAAU,yCAGrC7D,KAAKsC,MAAMW,SAAW,qBAAGD,UAAU,aAElChD,KAAKsC,MAAMgL,OAAStN,KAAKsC,MAAMW,SAC/B,gCACE,gBAAC,IAA0B,CAACD,UAAU,gBACtC,uBAAKA,UAAU,eACb,yBAAOiL,QAAQ,gCACZ,oBAAU,YACX,gBAAC,IAAoB,OAEtBjO,KAAKsC,MAAMkL,qBACV,gBAAC,IAAM,CACLU,WAAW,EACX9H,GAAG,+BACHI,SAAUxG,KAAK4N,+BACf5D,QAAShK,KAAKsC,MAAMkL,oBAAoBnI,IAAIqI,IAAkB,CAC5DlD,MAAOkD,EAAmBlN,KAC1B+J,MAAOmD,EAAmBtH,MAE5BmE,MAAOvK,KAAKsC,MAAMoL,wBAQ9B,0BAAQ1K,UAAU,cAChB,gBAAC,IAAe,CAACA,UAAU,eAAeC,QAAS+K,KACjDhO,KAAKsC,MAAMgL,MACX,gBAAC,eAAY,CAACxC,SAAUkD,IAAehO,KAAKsC,MAAMoL,oBAC/C,oBAAU,UAGf,gBAAC,kBAAe,CAACxK,QAAS4K,GACvB,oBAAU9N,KAAKsC,MAAMgL,KAAO,QAAU","file":"js/321.m.775bbdee.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { without } from 'lodash';\nimport * as React from 'react';\nimport ListFooter from 'sonar-ui-common/components/controls/ListFooter';\nimport HoldersList from '../../shared/components/HoldersList';\nimport SearchForm from '../../shared/components/SearchForm';\nimport { convertToPermissionDefinitions, PERMISSIONS_ORDER_BY_QUALIFIER } from '../../utils';\n\ninterface Props {\n  component: T.Component;\n  filter: string;\n  grantPermissionToGroup: (group: string, permission: string) => Promise<void>;\n  grantPermissionToUser: (user: string, permission: string) => Promise<void>;\n  groups: T.PermissionGroup[];\n  groupsPaging?: T.Paging;\n  onLoadMore: () => void;\n  onFilterChange: (filter: string) => void;\n  onPermissionSelect: (permissions?: string) => void;\n  onQueryChange: (query: string) => void;\n  query: string;\n  revokePermissionFromGroup: (group: string, permission: string) => Promise<void>;\n  revokePermissionFromUser: (user: string, permission: string) => Promise<void>;\n  selectedPermission?: string;\n  users: T.PermissionUser[];\n  usersPaging?: T.Paging;\n  visibility?: T.Visibility;\n}\n\nexport default class AllHoldersList extends React.PureComponent<Props> {\n  handleToggleUser = (user: T.PermissionUser, permission: string) => {\n    const hasPermission = user.permissions.includes(permission);\n\n    if (hasPermission) {\n      return this.props.revokePermissionFromUser(user.login, permission);\n    } else {\n      return this.props.grantPermissionToUser(user.login, permission);\n    }\n  };\n\n  handleToggleGroup = (group: T.PermissionGroup, permission: string) => {\n    const hasPermission = group.permissions.includes(permission);\n\n    if (hasPermission) {\n      return this.props.revokePermissionFromGroup(group.name, permission);\n    } else {\n      return this.props.grantPermissionToGroup(group.name, permission);\n    }\n  };\n\n  handleSelectPermission = (permission?: string) => {\n    this.props.onPermissionSelect(permission);\n  };\n\n  render() {\n    const { filter, groups, groupsPaging, users, usersPaging } = this.props;\n    let order = PERMISSIONS_ORDER_BY_QUALIFIER[this.props.component.qualifier];\n    if (this.props.visibility === 'public') {\n      order = without(order, 'user', 'codeviewer');\n    }\n    const permissions = convertToPermissionDefinitions(order, 'projects_role');\n\n    let count = 0;\n    let total = 0;\n    if (filter !== 'users') {\n      count += groups.length;\n      total += groupsPaging ? groupsPaging.total : groups.length;\n    }\n    if (filter !== 'groups') {\n      count += users.length;\n      total += usersPaging ? usersPaging.total : users.length;\n    }\n\n    return (\n      <>\n        <HoldersList\n          filter={this.props.filter}\n          groups={this.props.groups}\n          onSelectPermission={this.handleSelectPermission}\n          onToggleGroup={this.handleToggleGroup}\n          onToggleUser={this.handleToggleUser}\n          permissions={permissions}\n          query={this.props.query}\n          selectedPermission={this.props.selectedPermission}\n          users={this.props.users}>\n          <SearchForm\n            filter={this.props.filter}\n            onFilter={this.props.onFilterChange}\n            onSearch={this.props.onQueryChange}\n            query={this.props.query}\n          />\n        </HoldersList>\n        <ListFooter count={count} loadMore={this.props.onLoadMore} total={total} />\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { isApplication, isPortfolioLike } from '../../../../types/component';\nimport ApplyTemplate from './ApplyTemplate';\n\ninterface Props {\n  component: T.Component;\n  loadHolders: () => void;\n  loading: boolean;\n}\n\ninterface State {\n  applyTemplateModal: boolean;\n}\n\nexport default class PageHeader extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { applyTemplateModal: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleApplyTemplate = () => {\n    this.setState({ applyTemplateModal: true });\n  };\n\n  handleApplyTemplateClose = () => {\n    if (this.mounted) {\n      this.setState({ applyTemplateModal: false });\n    }\n  };\n\n  render() {\n    const { component } = this.props;\n    const { configuration } = component;\n    const canApplyPermissionTemplate =\n      configuration != null && configuration.canApplyPermissionTemplate;\n\n    let description = translate('roles.page.description2');\n    if (isPortfolioLike(component.qualifier)) {\n      description = translate('roles.page.description_portfolio');\n    } else if (isApplication(component.qualifier)) {\n      description = translate('roles.page.description_application');\n    }\n\n    const visibilityDescription =\n      component.qualifier === 'TRK' && component.visibility\n        ? translate('visibility', component.visibility, 'description', component.qualifier)\n        : undefined;\n\n    return (\n      <header className=\"page-header\">\n        <h1 className=\"page-title\">{translate('permissions.page')}</h1>\n\n        {this.props.loading && <i className=\"spinner\" />}\n\n        {canApplyPermissionTemplate && (\n          <div className=\"page-actions\">\n            <Button className=\"js-apply-template\" onClick={this.handleApplyTemplate}>\n              {translate('projects_role.apply_template')}\n            </Button>\n\n            {this.state.applyTemplateModal && (\n              <ApplyTemplate\n                onApply={this.props.loadHolders}\n                onClose={this.handleApplyTemplateClose}\n                project={component}\n              />\n            )}\n          </div>\n        )}\n\n        <div className=\"page-description\">\n          <p>{description}</p>\n          {visibilityDescription && <p>{visibilityDescription}</p>}\n        </div>\n      </header>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ConfirmModal from 'sonar-ui-common/components/controls/ConfirmModal';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  component: {\n    name: string;\n    qualifier: string;\n  };\n  onClose: () => void;\n  onConfirm: () => void;\n}\n\nexport default function PublicProjectDisclaimer({ component, onClose, onConfirm }: Props) {\n  const { qualifier } = component;\n  return (\n    <ConfirmModal\n      confirmButtonText={translate('projects_role.turn_project_to_public', qualifier)}\n      header={translateWithParameters('projects_role.turn_x_to_public', component.name)}\n      onClose={onClose}\n      onConfirm={onConfirm}>\n      <Alert variant=\"warning\">\n        {translate('projects_role.are_you_sure_to_turn_project_to_public.warning', qualifier)}\n      </Alert>\n      <p>{translate('projects_role.are_you_sure_to_turn_project_to_public', qualifier)}</p>\n    </ConfirmModal>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { without } from 'lodash';\nimport * as React from 'react';\nimport { Helmet } from 'react-helmet-async';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport * as api from '../../../../api/permissions';\nimport VisibilitySelector from '../../../../components/common/VisibilitySelector';\nimport '../../styles.css';\nimport AllHoldersList from './AllHoldersList';\nimport PageHeader from './PageHeader';\nimport PublicProjectDisclaimer from './PublicProjectDisclaimer';\n\ninterface Props {\n  component: T.Component;\n  onComponentChange: (changes: Partial<T.Component>) => void;\n}\n\ninterface State {\n  disclaimer: boolean;\n  filter: string;\n  groups: T.PermissionGroup[];\n  groupsPaging?: T.Paging;\n  loading: boolean;\n  query: string;\n  selectedPermission?: string;\n  users: T.PermissionUser[];\n  usersPaging?: T.Paging;\n}\n\nexport default class App extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      disclaimer: false,\n      filter: 'all',\n      groups: [],\n      loading: true,\n      query: '',\n      users: []\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.loadHolders();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  stopLoading = () => {\n    if (this.mounted) {\n      this.setState({ loading: false });\n    }\n  };\n\n  loadUsersAndGroups = (userPage?: number, groupsPage?: number) => {\n    const { component } = this.props;\n    const { filter, query, selectedPermission } = this.state;\n\n    const getUsers: Promise<{ paging?: T.Paging; users: T.PermissionUser[] }> =\n      filter !== 'groups'\n        ? api.getPermissionsUsersForComponent({\n            projectKey: component.key,\n            q: query || undefined,\n            permission: selectedPermission,\n            p: userPage\n          })\n        : Promise.resolve({ paging: undefined, users: [] });\n\n    const getGroups: Promise<{ paging?: T.Paging; groups: T.PermissionGroup[] }> =\n      filter !== 'users'\n        ? api.getPermissionsGroupsForComponent({\n            projectKey: component.key,\n            q: query || undefined,\n            permission: selectedPermission,\n            p: groupsPage\n          })\n        : Promise.resolve({ paging: undefined, groups: [] });\n\n    return Promise.all([getUsers, getGroups]);\n  };\n\n  loadHolders = () => {\n    this.setState({ loading: true });\n    return this.loadUsersAndGroups().then(([usersResponse, groupsResponse]) => {\n      if (this.mounted) {\n        this.setState({\n          groups: groupsResponse.groups,\n          groupsPaging: groupsResponse.paging,\n          loading: false,\n          users: usersResponse.users,\n          usersPaging: usersResponse.paging\n        });\n      }\n    }, this.stopLoading);\n  };\n\n  onLoadMore = () => {\n    const { usersPaging, groupsPaging } = this.state;\n    this.setState({ loading: true });\n    return this.loadUsersAndGroups(\n      usersPaging ? usersPaging.pageIndex + 1 : 1,\n      groupsPaging ? groupsPaging.pageIndex + 1 : 1\n    ).then(([usersResponse, groupsResponse]) => {\n      if (this.mounted) {\n        this.setState(({ groups, users }) => ({\n          groups: [...groups, ...groupsResponse.groups],\n          groupsPaging: groupsResponse.paging,\n          loading: false,\n          users: [...users, ...usersResponse.users],\n          usersPaging: usersResponse.paging\n        }));\n      }\n    }, this.stopLoading);\n  };\n\n  handleFilterChange = (filter: string) => {\n    if (this.mounted) {\n      this.setState({ filter }, this.loadHolders);\n    }\n  };\n\n  handleQueryChange = (query: string) => {\n    if (this.mounted) {\n      this.setState({ query }, this.loadHolders);\n    }\n  };\n\n  handlePermissionSelect = (selectedPermission?: string) => {\n    if (this.mounted) {\n      this.setState(\n        (state: State) => ({\n          selectedPermission:\n            state.selectedPermission === selectedPermission ? undefined : selectedPermission\n        }),\n        this.loadHolders\n      );\n    }\n  };\n\n  addPermissionToGroup = (group: string, permission: string) => {\n    return this.state.groups.map(candidate =>\n      candidate.name === group\n        ? { ...candidate, permissions: [...candidate.permissions, permission] }\n        : candidate\n    );\n  };\n\n  addPermissionToUser = (user: string, permission: string) => {\n    return this.state.users.map(candidate =>\n      candidate.login === user\n        ? { ...candidate, permissions: [...candidate.permissions, permission] }\n        : candidate\n    );\n  };\n\n  removePermissionFromGroup = (group: string, permission: string) => {\n    return this.state.groups.map(candidate =>\n      candidate.name === group\n        ? { ...candidate, permissions: without(candidate.permissions, permission) }\n        : candidate\n    );\n  };\n\n  removePermissionFromUser = (user: string, permission: string) => {\n    return this.state.users.map(candidate =>\n      candidate.login === user\n        ? { ...candidate, permissions: without(candidate.permissions, permission) }\n        : candidate\n    );\n  };\n\n  grantPermissionToGroup = (group: string, permission: string) => {\n    if (this.mounted) {\n      this.setState({\n        loading: true,\n        groups: this.addPermissionToGroup(group, permission)\n      });\n      return api\n        .grantPermissionToGroup({\n          projectKey: this.props.component.key,\n          groupName: group,\n          permission\n        })\n        .then(this.stopLoading, () => {\n          if (this.mounted) {\n            this.setState({\n              loading: false,\n              groups: this.removePermissionFromGroup(group, permission)\n            });\n          }\n        });\n    }\n    return Promise.resolve();\n  };\n\n  grantPermissionToUser = (user: string, permission: string) => {\n    if (this.mounted) {\n      this.setState({\n        loading: true,\n        users: this.addPermissionToUser(user, permission)\n      });\n      return api\n        .grantPermissionToUser({\n          projectKey: this.props.component.key,\n          login: user,\n          permission\n        })\n        .then(this.stopLoading, () => {\n          if (this.mounted) {\n            this.setState({\n              loading: false,\n              users: this.removePermissionFromUser(user, permission)\n            });\n          }\n        });\n    }\n    return Promise.resolve();\n  };\n\n  revokePermissionFromGroup = (group: string, permission: string) => {\n    if (this.mounted) {\n      this.setState({\n        loading: true,\n        groups: this.removePermissionFromGroup(group, permission)\n      });\n      return api\n        .revokePermissionFromGroup({\n          projectKey: this.props.component.key,\n          groupName: group,\n          permission\n        })\n        .then(this.stopLoading, () => {\n          if (this.mounted) {\n            this.setState({\n              loading: false,\n              groups: this.addPermissionToGroup(group, permission)\n            });\n          }\n        });\n    }\n    return Promise.resolve();\n  };\n\n  revokePermissionFromUser = (user: string, permission: string) => {\n    if (this.mounted) {\n      this.setState({\n        loading: true,\n        users: this.removePermissionFromUser(user, permission)\n      });\n      return api\n        .revokePermissionFromUser({\n          projectKey: this.props.component.key,\n          login: user,\n          permission\n        })\n        .then(this.stopLoading, () => {\n          if (this.mounted) {\n            this.setState({\n              loading: false,\n              users: this.addPermissionToUser(user, permission)\n            });\n          }\n        });\n    }\n    return Promise.resolve();\n  };\n\n  handleVisibilityChange = (visibility: string) => {\n    if (visibility === 'public') {\n      this.openDisclaimer();\n    } else {\n      this.turnProjectToPrivate();\n    }\n  };\n\n  turnProjectToPublic = () => {\n    this.props.onComponentChange({ visibility: 'public' });\n    api.changeProjectVisibility(this.props.component.key, 'public').then(\n      () => {\n        this.loadHolders();\n      },\n      () => {\n        this.props.onComponentChange({\n          visibility: 'private'\n        });\n      }\n    );\n  };\n\n  turnProjectToPrivate = () => {\n    this.props.onComponentChange({ visibility: 'private' });\n    api.changeProjectVisibility(this.props.component.key, 'private').then(\n      () => {\n        this.loadHolders();\n      },\n      () => {\n        this.props.onComponentChange({\n          visibility: 'public'\n        });\n      }\n    );\n  };\n\n  openDisclaimer = () => {\n    if (this.mounted) {\n      this.setState({ disclaimer: true });\n    }\n  };\n\n  closeDisclaimer = () => {\n    if (this.mounted) {\n      this.setState({ disclaimer: false });\n    }\n  };\n\n  render() {\n    const { component } = this.props;\n    const canTurnToPrivate =\n      component.configuration && component.configuration.canUpdateProjectVisibilityToPrivate;\n\n    return (\n      <div className=\"page page-limited\" id=\"project-permissions-page\">\n        <Helmet defer={false} title={translate('permissions.page')} />\n\n        <PageHeader\n          component={component}\n          loadHolders={this.loadHolders}\n          loading={this.state.loading}\n        />\n        <div>\n          <VisibilitySelector\n            canTurnToPrivate={canTurnToPrivate}\n            className=\"big-spacer-top big-spacer-bottom\"\n            onChange={this.handleVisibilityChange}\n            visibility={component.visibility}\n          />\n          {this.state.disclaimer && (\n            <PublicProjectDisclaimer\n              component={component}\n              onClose={this.closeDisclaimer}\n              onConfirm={this.turnProjectToPublic}\n            />\n          )}\n        </div>\n        <AllHoldersList\n          component={component}\n          filter={this.state.filter}\n          grantPermissionToGroup={this.grantPermissionToGroup}\n          grantPermissionToUser={this.grantPermissionToUser}\n          groups={this.state.groups}\n          groupsPaging={this.state.groupsPaging}\n          onFilterChange={this.handleFilterChange}\n          onLoadMore={this.onLoadMore}\n          onPermissionSelect={this.handlePermissionSelect}\n          onQueryChange={this.handleQueryChange}\n          query={this.state.query}\n          revokePermissionFromGroup={this.revokePermissionFromGroup}\n          revokePermissionFromUser={this.revokePermissionFromUser}\n          selectedPermission={this.state.selectedPermission}\n          users={this.state.users}\n          usersPaging={this.state.usersPaging}\n          visibility={component.visibility}\n        />\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { connect } from 'react-redux';\nimport { getCurrentUser, Store } from '../../../../store/rootReducer';\nimport App from './App';\n\nconst mapStateToProps = (state: Store) => ({\n  currentUser: getCurrentUser(state)\n});\n\nexport default connect(mapStateToProps)(App);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { hasMessage, translate } from 'sonar-ui-common/helpers/l10n';\nimport { isSonarCloud } from '../../helpers/system';\n\nexport const PERMISSIONS_ORDER_FOR_PROJECT_TEMPLATE = [\n  'user',\n  'codeviewer',\n  'issueadmin',\n  'securityhotspotadmin',\n  'admin',\n  'scan'\n];\n\nexport const PERMISSIONS_ORDER_GLOBAL = [\n  'admin',\n  { category: 'administer', permissions: ['gateadmin', 'profileadmin'] },\n  'scan',\n  { category: 'creator', permissions: ['provisioning', 'applicationcreator', 'portfoliocreator'] }\n];\n\nexport const PERMISSIONS_ORDER_FOR_VIEW = ['user', 'admin'];\n\nexport const PERMISSIONS_ORDER_FOR_DEV = ['user', 'admin'];\n\nexport const PERMISSIONS_ORDER_BY_QUALIFIER: T.Dict<string[]> = {\n  TRK: PERMISSIONS_ORDER_FOR_PROJECT_TEMPLATE,\n  VW: PERMISSIONS_ORDER_FOR_VIEW,\n  SVW: PERMISSIONS_ORDER_FOR_VIEW,\n  APP: PERMISSIONS_ORDER_FOR_VIEW,\n  DEV: PERMISSIONS_ORDER_FOR_DEV\n};\n\nfunction convertToPermissionDefinition(permission: string, l10nPrefix: string) {\n  const getMessage = (messageKey: string) => {\n    const cloudMessageKey = `${messageKey}.sonarcloud`;\n    return isSonarCloud() && hasMessage(cloudMessageKey)\n      ? translate(cloudMessageKey)\n      : translate(messageKey);\n  };\n\n  const name = getMessage(`${l10nPrefix}.${permission}`);\n  const description = getMessage(`${l10nPrefix}.${permission}.desc`);\n\n  return {\n    key: permission,\n    name,\n    description\n  };\n}\n\nexport function filterPermissions(\n  permissions: Array<string | { category: string; permissions: string[] }>,\n  hasApplicationsEnabled: boolean,\n  hasPortfoliosEnabled: boolean\n) {\n  return permissions.map(permission => {\n    if (typeof permission === 'object' && permission.category === 'creator') {\n      return {\n        ...permission,\n        permissions: permission.permissions.filter(p => {\n          return (\n            p === 'provisioning' ||\n            (p === 'portfoliocreator' && hasPortfoliosEnabled) ||\n            (p === 'applicationcreator' && hasApplicationsEnabled)\n          );\n        })\n      };\n    }\n    return permission;\n  });\n}\n\nexport function convertToPermissionDefinitions(\n  permissions: Array<string | { category: string; permissions: string[] }>,\n  l10nPrefix: string\n): Array<T.PermissionDefinition | T.PermissionDefinitionGroup> {\n  return permissions.map(permission => {\n    if (typeof permission === 'object') {\n      return {\n        category: permission.category,\n        permissions: permission.permissions.map(permission =>\n          convertToPermissionDefinition(permission, l10nPrefix)\n        )\n      };\n    }\n    return convertToPermissionDefinition(permission, l10nPrefix);\n  });\n}\n\nexport function isPermissionDefinitionGroup(\n  permission?: T.PermissionDefinition | T.PermissionDefinitionGroup\n): permission is T.PermissionDefinitionGroup {\n  return Boolean(permission && (permission as T.PermissionDefinitionGroup).category);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post, postJSON, RequestData } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { BaseSearchProjectsParameters } from './components';\n\nconst PAGE_SIZE = 100;\n\nexport function grantPermissionToUser(data: {\n  projectKey?: string;\n  login: string;\n  permission: string;\n}) {\n  return post('/api/permissions/add_user', data).catch(throwGlobalError);\n}\n\nexport function revokePermissionFromUser(data: {\n  projectKey?: string;\n  login: string;\n  permission: string;\n}) {\n  return post('/api/permissions/remove_user', data).catch(throwGlobalError);\n}\n\nexport function grantPermissionToGroup(data: {\n  projectKey?: string;\n  groupName: string;\n  permission: string;\n}) {\n  return post('/api/permissions/add_group', data).catch(throwGlobalError);\n}\n\nexport function revokePermissionFromGroup(data: {\n  projectKey?: string;\n  groupName: string;\n  permission: string;\n}) {\n  return post('/api/permissions/remove_group', data).catch(throwGlobalError);\n}\n\ninterface GetPermissionTemplatesResponse {\n  permissionTemplates: T.PermissionTemplate[];\n  defaultTemplates: Array<{ templateId: string; qualifier: string }>;\n  permissions: Array<{ key: string; name: string; description: string }>;\n}\n\nexport function getPermissionTemplates(): Promise<GetPermissionTemplatesResponse> {\n  const url = '/api/permissions/search_templates';\n  return getJSON(url);\n}\n\nexport function createPermissionTemplate(data: RequestData) {\n  return postJSON('/api/permissions/create_template', data);\n}\n\nexport function updatePermissionTemplate(data: RequestData): Promise<void> {\n  return post('/api/permissions/update_template', data);\n}\n\nexport function deletePermissionTemplate(data: RequestData) {\n  return post('/api/permissions/delete_template', data).catch(throwGlobalError);\n}\n\n/**\n * Set default permission template for a given qualifier\n */\nexport function setDefaultPermissionTemplate(templateId: string, qualifier: string): Promise<void> {\n  return post('/api/permissions/set_default_template', { templateId, qualifier });\n}\n\nexport function applyTemplateToProject(data: RequestData) {\n  return post('/api/permissions/apply_template', data).catch(throwGlobalError);\n}\n\nexport function bulkApplyTemplate(data: BaseSearchProjectsParameters): Promise<void> {\n  return post('/api/permissions/bulk_apply_template', data);\n}\n\nexport function grantTemplatePermissionToUser(data: {\n  templateId: string;\n  login: string;\n  permission: string;\n}): Promise<void> {\n  return post('/api/permissions/add_user_to_template', data);\n}\n\nexport function revokeTemplatePermissionFromUser(data: {\n  templateId: string;\n  login: string;\n  permission: string;\n}): Promise<void> {\n  return post('/api/permissions/remove_user_from_template', data);\n}\n\nexport function grantTemplatePermissionToGroup(data: RequestData): Promise<void> {\n  return post('/api/permissions/add_group_to_template', data);\n}\n\nexport function revokeTemplatePermissionFromGroup(data: RequestData): Promise<void> {\n  return post('/api/permissions/remove_group_from_template', data);\n}\n\nexport function addProjectCreatorToTemplate(templateId: string, permission: string): Promise<void> {\n  return post('/api/permissions/add_project_creator_to_template', { templateId, permission });\n}\n\nexport function removeProjectCreatorFromTemplate(\n  templateId: string,\n  permission: string\n): Promise<void> {\n  return post('/api/permissions/remove_project_creator_from_template', { templateId, permission });\n}\n\nexport function getPermissionsUsersForComponent(data: {\n  projectKey: string;\n  q?: string;\n  permission?: string;\n  p?: number;\n  ps?: number;\n}): Promise<{ paging: T.Paging; users: T.PermissionUser[] }> {\n  if (!data.ps) {\n    data.ps = PAGE_SIZE;\n  }\n  return getJSON('/api/permissions/users', data).catch(throwGlobalError);\n}\n\nexport function getPermissionsGroupsForComponent(data: {\n  projectKey: string;\n  q?: string;\n  permission?: string;\n  p?: number;\n  ps?: number;\n}): Promise<{ paging: T.Paging; groups: T.PermissionGroup[] }> {\n  if (!data.ps) {\n    data.ps = PAGE_SIZE;\n  }\n  return getJSON('/api/permissions/groups', data).catch(throwGlobalError);\n}\n\nexport function getGlobalPermissionsUsers(data: {\n  q?: string;\n  permission?: string;\n  p?: number;\n  ps?: number;\n}): Promise<{ paging: T.Paging; users: T.PermissionUser[] }> {\n  if (!data.ps) {\n    data.ps = PAGE_SIZE;\n  }\n  return getJSON('/api/permissions/users', data);\n}\n\nexport function getGlobalPermissionsGroups(data: {\n  q?: string;\n  permission?: string;\n  p?: number;\n  ps?: number;\n}): Promise<{ paging: T.Paging; groups: T.PermissionGroup[] }> {\n  if (!data.ps) {\n    data.ps = PAGE_SIZE;\n  }\n  return getJSON('/api/permissions/groups', data);\n}\n\nexport function getPermissionTemplateUsers(\n  templateId: string,\n  query?: string,\n  permission?: string\n): Promise<any> {\n  const data: RequestData = { templateId, ps: PAGE_SIZE };\n  if (query) {\n    data.q = query;\n  }\n  if (permission) {\n    data.permission = permission;\n  }\n  return getJSON('/api/permissions/template_users', data).then(r => r.users);\n}\n\nexport function getPermissionTemplateGroups(\n  templateId: string,\n  query?: string,\n  permission?: string\n): Promise<any> {\n  const data: RequestData = { templateId, ps: PAGE_SIZE };\n  if (query) {\n    data.q = query;\n  }\n  if (permission) {\n    data.permission = permission;\n  }\n  return getJSON('/api/permissions/template_groups', data).then(r => r.groups);\n}\n\nexport function changeProjectVisibility(\n  project: string,\n  visibility: T.Visibility\n): Promise<void | Response> {\n  return post('/api/projects/update_visibility', { project, visibility }).catch(throwGlobalError);\n}\n\nexport function changeProjectDefaultVisibility(\n  projectVisibility: T.Visibility\n): Promise<void | Response> {\n  return post('/api/projects/update_default_visibility', { projectVisibility }).catch(\n    throwGlobalError\n  );\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".permissions-table .permission-column.selected{background-color:#d9edf7}.permissions-table .permission-column-inner{width:90px}.permissions-table .divider{background:#fff;padding:16px 0}.permissions-table .divider:after{display:block;content:\\\"\\\";background:#e6e6e6;height:1px;width:100%}.permissions-table td:first-of-type{max-width:320px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport RadioToggle from 'sonar-ui-common/components/controls/RadioToggle';\nimport SearchBox from 'sonar-ui-common/components/controls/SearchBox';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  filter: string;\n  onFilter: (value: string) => void;\n  onSearch: (value: string) => void;\n  query: string;\n}\n\nexport default function SearchForm(props: Props) {\n  const filterOptions = [\n    { value: 'all', label: translate('all') },\n    { value: 'users', label: translate('users.page') },\n    { value: 'groups', label: translate('user_groups.page') }\n  ];\n\n  return (\n    <div className=\"display-flex-row\">\n      <RadioToggle\n        name=\"users-or-groups\"\n        onCheck={props.onFilter}\n        options={filterOptions}\n        value={props.filter}\n      />\n\n      <div className=\"flex-1 spacer-left\">\n        <SearchBox\n          minLength={3}\n          onChange={props.onSearch}\n          placeholder={translate('search.search_for_users_or_groups')}\n          value={props.query}\n        />\n      </div>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport Checkbox from 'sonar-ui-common/components/controls/Checkbox';\nimport { isPermissionDefinitionGroup } from '../../utils';\n\ninterface Props {\n  loading: string[];\n  onCheck: (checked: boolean, permission?: string) => void;\n  permission: T.PermissionDefinition | T.PermissionDefinitionGroup;\n  permissionItem: T.PermissionGroup | T.PermissionUser;\n  selectedPermission?: string;\n}\n\nexport default class PermissionCell extends React.PureComponent<Props> {\n  render() {\n    const { loading, onCheck, permission, permissionItem, selectedPermission } = this.props;\n    if (isPermissionDefinitionGroup(permission)) {\n      return (\n        <td className=\"text-middle\">\n          {permission.permissions.map(permission => (\n            <div key={permission.key}>\n              <Checkbox\n                checked={permissionItem.permissions.includes(permission.key)}\n                disabled={loading.includes(permission.key)}\n                id={permission.key}\n                onCheck={onCheck}>\n                <span className=\"little-spacer-left\">{permission.name}</span>\n              </Checkbox>\n            </div>\n          ))}\n        </td>\n      );\n    } else {\n      return (\n        <td\n          className={classNames('permission-column text-center text-middle', {\n            selected: permission.key === selectedPermission\n          })}>\n          <Checkbox\n            checked={permissionItem.permissions.includes(permission.key)}\n            disabled={loading.includes(permission.key)}\n            id={permission.key}\n            onCheck={onCheck}\n          />\n        </td>\n      );\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { without } from 'lodash';\nimport * as React from 'react';\nimport GroupIcon from 'sonar-ui-common/components/icons/GroupIcon';\nimport { isPermissionDefinitionGroup } from '../../utils';\nimport PermissionCell from './PermissionCell';\n\ninterface Props {\n  group: T.PermissionGroup;\n  onToggle: (group: T.PermissionGroup, permission: string) => Promise<void>;\n  permissions: T.PermissionDefinitions;\n  selectedPermission?: string;\n}\n\ninterface State {\n  loading: string[];\n}\n\nexport default class GroupHolder extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: [] };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  stopLoading = (permission: string) => {\n    if (this.mounted) {\n      this.setState(state => ({ loading: without(state.loading, permission) }));\n    }\n  };\n\n  handleCheck = (_checked: boolean, permission?: string) => {\n    if (permission !== undefined) {\n      this.setState(state => ({ loading: [...state.loading, permission] }));\n      this.props.onToggle(this.props.group, permission).then(\n        () => this.stopLoading(permission),\n        () => this.stopLoading(permission)\n      );\n    }\n  };\n\n  render() {\n    const { group } = this.props;\n\n    return (\n      <tr>\n        <td className=\"nowrap text-middle\">\n          <div className=\"display-flex-center\">\n            <GroupIcon className=\"big-spacer-right\" />\n            <div className=\"max-width-100\">\n              <div className=\"max-width-100 text-ellipsis\">\n                <strong>{group.name}</strong>\n              </div>\n              <div className=\"little-spacer-top\" style={{ whiteSpace: 'normal' }}>\n                {group.description}\n              </div>\n            </div>\n          </div>\n        </td>\n        {this.props.permissions.map(permission => (\n          <PermissionCell\n            key={isPermissionDefinitionGroup(permission) ? permission.category : permission.key}\n            loading={this.state.loading}\n            onCheck={this.handleCheck}\n            permission={permission}\n            permissionItem={group}\n            selectedPermission={this.props.selectedPermission}\n          />\n        ))}\n      </tr>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport HelpTooltip from 'sonar-ui-common/components/controls/HelpTooltip';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport InstanceMessage from '../../../../components/common/InstanceMessage';\nimport { isPermissionDefinitionGroup } from '../../utils';\n\ninterface Props {\n  onSelectPermission?: (permission: string) => void;\n  permission: T.PermissionDefinition | T.PermissionDefinitionGroup;\n  selectedPermission?: string;\n  showPublicProjectsWarning?: boolean;\n}\n\nexport default class PermissionHeader extends React.PureComponent<Props> {\n  handlePermissionClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    const { permission } = this.props;\n    if (this.props.onSelectPermission && !isPermissionDefinitionGroup(permission)) {\n      this.props.onSelectPermission(permission.key);\n    }\n  };\n\n  getTooltipOverlay = () => {\n    const { permission } = this.props;\n\n    if (isPermissionDefinitionGroup(permission)) {\n      return permission.permissions.map(permission => (\n        <React.Fragment key={permission.key}>\n          <b className=\"little-spacer-right\">{permission.name}:</b>\n          <InstanceMessage key={permission.key} message={permission.description} />\n          <br />\n        </React.Fragment>\n      ));\n    } else {\n      if (this.props.showPublicProjectsWarning && ['user', 'codeviewer'].includes(permission.key)) {\n        return (\n          <div>\n            <InstanceMessage message={permission.description} />\n            <Alert className=\"spacer-top\" variant=\"warning\">\n              {translate('projects_role.public_projects_warning')}\n            </Alert>\n          </div>\n        );\n      }\n      return <InstanceMessage message={permission.description} />;\n    }\n  };\n\n  render() {\n    const { onSelectPermission, permission } = this.props;\n    let name;\n    if (isPermissionDefinitionGroup(permission)) {\n      name = translate('global_permissions', permission.category);\n    } else {\n      name = onSelectPermission ? (\n        <Tooltip\n          overlay={translateWithParameters(\n            'global_permissions.filter_by_x_permission',\n            permission.name\n          )}>\n          <a href=\"#\" onClick={this.handlePermissionClick}>\n            {permission.name}\n          </a>\n        </Tooltip>\n      ) : (\n        permission.name\n      );\n    }\n    return (\n      <th\n        className={classNames('permission-column text-center text-middle', {\n          selected:\n            !isPermissionDefinitionGroup(permission) &&\n            permission.key === this.props.selectedPermission\n        })}>\n        <div className=\"permission-column-inner\">\n          {name}\n          <HelpTooltip className=\"spacer-left\" overlay={this.getTooltipOverlay()} />\n        </div>\n      </th>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { without } from 'lodash';\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport Avatar from '../../../../components/ui/Avatar';\nimport { isPermissionDefinitionGroup } from '../../utils';\nimport PermissionCell from './PermissionCell';\n\ninterface Props {\n  onToggle: (user: T.PermissionUser, permission: string) => Promise<void>;\n  permissions: T.PermissionDefinitions;\n  selectedPermission?: string;\n  user: T.PermissionUser;\n}\n\ninterface State {\n  loading: string[];\n}\n\nexport default class UserHolder extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: [] };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  stopLoading = (permission: string) => {\n    if (this.mounted) {\n      this.setState(state => ({ loading: without(state.loading, permission) }));\n    }\n  };\n\n  handleCheck = (_checked: boolean, permission?: string) => {\n    if (permission !== undefined) {\n      this.setState(state => ({ loading: [...state.loading, permission] }));\n      this.props.onToggle(this.props.user, permission).then(\n        () => this.stopLoading(permission),\n        () => this.stopLoading(permission)\n      );\n    }\n  };\n\n  render() {\n    const { user } = this.props;\n    const permissionCells = this.props.permissions.map(permission => (\n      <PermissionCell\n        key={isPermissionDefinitionGroup(permission) ? permission.category : permission.key}\n        loading={this.state.loading}\n        onCheck={this.handleCheck}\n        permission={permission}\n        permissionItem={user}\n        selectedPermission={this.props.selectedPermission}\n      />\n    ));\n\n    if (user.login === '<creator>') {\n      return (\n        <tr>\n          <td className=\"nowrap text-middle\">\n            <div>\n              <strong>{user.name}</strong>\n            </div>\n            <div className=\"little-spacer-top\" style={{ whiteSpace: 'normal' }}>\n              {translate('permission_templates.project_creators.explanation')}\n            </div>\n          </td>\n          {permissionCells}\n        </tr>\n      );\n    }\n\n    return (\n      <tr>\n        <td className=\"nowrap text-middle\">\n          <div className=\"display-flex-center\">\n            <Avatar\n              className=\"text-middle big-spacer-right flex-0\"\n              hash={user.avatar}\n              name={user.name}\n              size={36}\n            />\n            <div className=\"max-width-100\">\n              <div className=\"max-width-100 text-ellipsis\">\n                <strong>{user.name}</strong>\n                <span className=\"note spacer-left\">{user.login}</span>\n              </div>\n              <div className=\"little-spacer-top max-width-100 text-ellipsis\">{user.email}</div>\n            </div>\n          </div>\n        </td>\n        {permissionCells}\n      </tr>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { partition, sortBy } from 'lodash';\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { isPermissionDefinitionGroup } from '../../utils';\nimport GroupHolder from './GroupHolder';\nimport PermissionHeader from './PermissionHeader';\nimport UserHolder from './UserHolder';\n\ninterface Props {\n  filter?: string;\n  groups: T.PermissionGroup[];\n  loading?: boolean;\n  onSelectPermission?: (permission: string) => void;\n  onToggleGroup: (group: T.PermissionGroup, permission: string) => Promise<void>;\n  onToggleUser: (user: T.PermissionUser, permission: string) => Promise<void>;\n  permissions: T.PermissionDefinitions;\n  query?: string;\n  selectedPermission?: string;\n  showPublicProjectsWarning?: boolean;\n  users: T.PermissionUser[];\n}\n\ninterface State {\n  initialPermissionsCount: T.Dict<number>;\n}\nexport default class HoldersList extends React.PureComponent<Props, State> {\n  state: State = { initialPermissionsCount: {} };\n  componentDidUpdate(prevProps: Props) {\n    if (this.props.filter !== prevProps.filter || this.props.query !== prevProps.query) {\n      this.setState({ initialPermissionsCount: {} });\n    }\n  }\n\n  isPermissionUser(item: T.PermissionGroup | T.PermissionUser): item is T.PermissionUser {\n    return (item as T.PermissionUser).login !== undefined;\n  }\n\n  handleGroupToggle = (group: T.PermissionGroup, permission: string) => {\n    const key = group.id || group.name;\n    if (this.state.initialPermissionsCount[key] === undefined) {\n      this.setState(state => ({\n        initialPermissionsCount: {\n          ...state.initialPermissionsCount,\n          [key]: group.permissions.length\n        }\n      }));\n    }\n    return this.props.onToggleGroup(group, permission);\n  };\n\n  handleUserToggle = (user: T.PermissionUser, permission: string) => {\n    if (this.state.initialPermissionsCount[user.login] === undefined) {\n      this.setState(state => ({\n        initialPermissionsCount: {\n          ...state.initialPermissionsCount,\n          [user.login]: user.permissions.length\n        }\n      }));\n    }\n    return this.props.onToggleUser(user, permission);\n  };\n\n  getItemInitialPermissionsCount = (item: T.PermissionGroup | T.PermissionUser) => {\n    const key = this.isPermissionUser(item) ? item.login : item.id || item.name;\n    return this.state.initialPermissionsCount[key] !== undefined\n      ? this.state.initialPermissionsCount[key]\n      : item.permissions.length;\n  };\n\n  renderEmpty() {\n    const columns = this.props.permissions.length + 1;\n    return (\n      <tr>\n        <td colSpan={columns}>{translate('no_results_search')}</td>\n      </tr>\n    );\n  }\n\n  renderItem(item: T.PermissionUser | T.PermissionGroup, permissions: T.PermissionDefinitions) {\n    return this.isPermissionUser(item) ? (\n      <UserHolder\n        key={`user-${item.login}`}\n        onToggle={this.handleUserToggle}\n        permissions={permissions}\n        selectedPermission={this.props.selectedPermission}\n        user={item}\n      />\n    ) : (\n      <GroupHolder\n        group={item}\n        key={`group-${item.id || item.name}`}\n        onToggle={this.handleGroupToggle}\n        permissions={permissions}\n        selectedPermission={this.props.selectedPermission}\n      />\n    );\n  }\n\n  render() {\n    const { permissions } = this.props;\n    const items = sortBy([...this.props.users, ...this.props.groups], item => {\n      if (this.isPermissionUser(item) && item.login === '<creator>') {\n        return 0;\n      }\n      return item.name;\n    });\n    const [itemWithPermissions, itemWithoutPermissions] = partition(items, item =>\n      this.getItemInitialPermissionsCount(item)\n    );\n    return (\n      <div className=\"boxed-group boxed-group-inner\">\n        <table className=\"data zebra permissions-table\">\n          <thead>\n            <tr>\n              <td className=\"nowrap bordered-bottom\">{this.props.children}</td>\n              {permissions.map(permission => (\n                <PermissionHeader\n                  key={\n                    isPermissionDefinitionGroup(permission) ? permission.category : permission.key\n                  }\n                  onSelectPermission={this.props.onSelectPermission}\n                  permission={permission}\n                  selectedPermission={this.props.selectedPermission}\n                  showPublicProjectsWarning={this.props.showPublicProjectsWarning}\n                />\n              ))}\n            </tr>\n          </thead>\n          <tbody>\n            {items.length === 0 && !this.props.loading && this.renderEmpty()}\n            {itemWithPermissions.map(item => this.renderItem(item, permissions))}\n            {itemWithPermissions.length > 0 && itemWithoutPermissions.length > 0 && (\n              <>\n                <tr>\n                  <td className=\"divider\" colSpan={20} />\n                </tr>\n                <tr />\n                {/* Keep correct zebra colors in the table */}\n              </>\n            )}\n            {itemWithoutPermissions.map(item => this.renderItem(item, permissions))}\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport Radio from 'sonar-ui-common/components/controls/Radio';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  canTurnToPrivate?: boolean;\n  className?: string;\n  onChange: (visibility: T.Visibility) => void;\n  showDetails?: boolean;\n  visibility?: T.Visibility;\n}\n\nexport default class VisibilitySelector extends React.PureComponent<Props> {\n  render() {\n    return (\n      <div className={classNames(this.props.className)}>\n        {['public', 'private'].map(visibility => (\n          <Radio\n            className={`huge-spacer-right visibility-${visibility}`}\n            key={visibility}\n            value={visibility}\n            checked={this.props.visibility === visibility}\n            onCheck={this.props.onChange}\n            disabled={visibility === 'private' && !this.props.canTurnToPrivate}>\n            <div>\n              {translate('visibility', visibility)}\n              {this.props.showDetails && (\n                <p className=\"note\">{translate('visibility', visibility, 'description.long')}</p>\n              )}\n            </div>\n          </Radio>\n        ))}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ResetButtonLink, SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport Select from 'sonar-ui-common/components/controls/Select';\nimport SimpleModal from 'sonar-ui-common/components/controls/SimpleModal';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport MandatoryFieldMarker from 'sonar-ui-common/components/ui/MandatoryFieldMarker';\nimport MandatoryFieldsExplanation from 'sonar-ui-common/components/ui/MandatoryFieldsExplanation';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { applyTemplateToProject, getPermissionTemplates } from '../../../../api/permissions';\n\ninterface Props {\n  onApply?: () => void;\n  onClose: () => void;\n  project: { key: string; name: string };\n}\n\ninterface State {\n  done: boolean;\n  loading: boolean;\n  permissionTemplate?: string;\n  permissionTemplates?: T.PermissionTemplate[];\n}\n\nexport default class ApplyTemplate extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { done: false, loading: true };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchPermissionTemplates();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchPermissionTemplates = () => {\n    getPermissionTemplates().then(\n      ({ permissionTemplates }) => {\n        if (this.mounted) {\n          this.setState({ loading: false, permissionTemplates });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  handleSubmit = () => {\n    if (this.state.permissionTemplate) {\n      return applyTemplateToProject({\n        projectKey: this.props.project.key,\n        templateId: this.state.permissionTemplate\n      }).then(() => {\n        if (this.mounted) {\n          if (this.props.onApply) {\n            this.props.onApply();\n          }\n          this.setState({ done: true });\n        }\n      });\n    } else {\n      return Promise.reject(undefined);\n    }\n  };\n\n  handlePermissionTemplateChange = ({ value }: { value: string }) => {\n    this.setState({ permissionTemplate: value });\n  };\n\n  render() {\n    const header = translateWithParameters(\n      'projects_role.apply_template_to_xxx',\n      this.props.project.name\n    );\n\n    return (\n      <SimpleModal\n        header={header}\n        onClose={this.props.onClose}\n        onSubmit={this.handleSubmit}\n        size=\"small\">\n        {({ onCloseClick, onFormSubmit, submitting }) => (\n          <form id=\"project-permissions-apply-template-form\" onSubmit={onFormSubmit}>\n            <header className=\"modal-head\">\n              <h2>{header}</h2>\n            </header>\n\n            <div className=\"modal-body\">\n              {this.state.done && (\n                <Alert variant=\"success\">{translate('projects_role.apply_template.success')}</Alert>\n              )}\n\n              {this.state.loading && <i className=\"spinner\" />}\n\n              {!this.state.done && !this.state.loading && (\n                <>\n                  <MandatoryFieldsExplanation className=\"modal-field\" />\n                  <div className=\"modal-field\">\n                    <label htmlFor=\"project-permissions-template\">\n                      {translate('template')}\n                      <MandatoryFieldMarker />\n                    </label>\n                    {this.state.permissionTemplates && (\n                      <Select\n                        clearable={false}\n                        id=\"project-permissions-template\"\n                        onChange={this.handlePermissionTemplateChange}\n                        options={this.state.permissionTemplates.map(permissionTemplate => ({\n                          label: permissionTemplate.name,\n                          value: permissionTemplate.id\n                        }))}\n                        value={this.state.permissionTemplate}\n                      />\n                    )}\n                  </div>\n                </>\n              )}\n            </div>\n\n            <footer className=\"modal-foot\">\n              <DeferredSpinner className=\"spacer-right\" loading={submitting} />\n              {!this.state.done && (\n                <SubmitButton disabled={submitting || !this.state.permissionTemplate}>\n                  {translate('apply')}\n                </SubmitButton>\n              )}\n              <ResetButtonLink onClick={onCloseClick}>\n                {translate(this.state.done ? 'close' : 'cancel')}\n              </ResetButtonLink>\n            </footer>\n          </form>\n        )}\n      </SimpleModal>\n    );\n  }\n}\n"],"sourceRoot":""}