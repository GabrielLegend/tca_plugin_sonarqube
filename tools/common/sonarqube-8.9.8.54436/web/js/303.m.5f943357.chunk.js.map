{"version":3,"sources":["webpack:///./src/main/js/apps/projectsManagement/CreateProjectForm.tsx","webpack:///./src/main/js/apps/projectsManagement/ProjectRow.css?1a9a","webpack:///./src/main/js/apps/projectsManagement/ProjectRow.css","webpack:///./src/main/js/apps/projectsManagement/ChangeDefaultVisibilityForm.tsx","webpack:///./src/main/js/apps/projectsManagement/Header.tsx","webpack:///./src/main/js/apps/projectsManagement/RestoreAccessModal.tsx","webpack:///./src/main/js/apps/projectsManagement/ProjectRowActions.tsx","webpack:///./src/main/js/apps/projectsManagement/ProjectRow.tsx","webpack:///./src/main/js/apps/projectsManagement/Projects.tsx","webpack:///./src/main/js/apps/projectsManagement/BulkApplyTemplateModal.tsx","webpack:///./src/main/js/apps/projectsManagement/DeleteModal.tsx","webpack:///./src/main/js/apps/projectsManagement/Search.tsx","webpack:///./src/main/js/apps/projectsManagement/App.tsx","webpack:///./src/main/js/app/components/embed-docs-modal/Suggestions.tsx","webpack:///./src/main/js/api/settings.ts","webpack:///./src/main/js/api/permissions.ts","webpack:///./src/main/js/components/controls/DateInput.tsx","webpack:///./src/main/js/components/controls/DayPicker.css?d7e1","webpack:///./src/main/js/components/controls/DayPicker.css","webpack:///./src/main/js/components/controls/styles.css?5633","webpack:///./src/main/js/components/controls/styles.css","webpack:///./src/main/js/api/nav.ts","webpack:///./src/main/js/types/settings.ts","webpack:///./src/main/js/components/common/PrivacyBadgeContainer.tsx","webpack:///./src/main/js/components/common/VisibilitySelector.tsx","webpack:///./src/main/js/apps/permissions/project/components/ApplyTemplate.tsx"],"names":["CreateProjectForm","props","super","mounted","handleInputChange","event","name","value","currentTarget","this","setState","handleVisibilityChange","visibility","handleFormSubmit","preventDefault","data","state","project","key","loading","then","response","createdProject","onProjectCreated","defaultProjectVisibility","setImmediate","closeButton","focus","contentLabel","onRequestClose","onClose","className","variant","defaultMessage","id","values","to","innerRef","node","onClick","onSubmit","htmlFor","autoFocus","maxLength","onChange","required","type","canTurnToPrivate","undefined","disabled","api","content","__esModule","default","module","i","options","exported","locals","exports","___CSS_LOADER_API_IMPORT___","push","handleConfirmClick","onConfirm","defaultVisibility","map","checked","onCheck","Alert","visibilityForm","handleChangeVisibilityClick","closeVisiblityForm","hasProvisionPermission","onProjectCreate","onChangeDefaultProjectVisibility","Promise","all","grantPermission","onRestoreAccess","permission","projectKey","login","currentUser","header","browse","administer","applyTemplateModal","restoreAccessModal","fetchPermissions","component","configuration","hasAccess","Boolean","showPermissions","canBrowseProject","handleDropdownOpen","handleApplyTemplateClick","handleApplyTemplateClose","handleRestoreAccessClick","handleRestoreAccessClose","handleRestoreAccessDone","onOpen","ActionsDropdown","ApplyTemplate","handleProjectCheck","onProjectCheck","selected","qualifier","overlay","placement","PrivacyBadgeContainer","lastAnalysisDate","date","onProjectSelected","onProjectDeselected","ready","projects","selection","includes","done","submitting","analyzedBefore","permissionTemplate","parameters","length","join","qualifiers","templateId","onProvisionedOnly","provisioned","q","query","handlePermissionTemplateChange","renderWarning","total","renderSelect","clearable","permissionTemplates","t","label","loadPermissionTemplates","size","QUALIFIERS_ORDER","bulkApplyTemplateModal","deleteModal","getQualifierOptions","topLevelQualifiers","option","indexOf","onAllSelected","onAllDeselected","handleDeleteClick","closeDeleteModal","handleDeleteConfirm","onDeleteProjects","handleBulkApplyTemplateClick","closeBulkApplyTemplateModal","handleQualifierChange","onQualifierChanged","onVisibilityChanged","renderCheckbox","isAllChecked","thirdState","renderQualifierOption","renderQualifierFilter","optionRenderer","searchable","valueRenderer","renderVisibilityFilter","renderTypeFilter","onProvisionedChanged","renderDateFilter","DateInput","inputClassName","onDateChanged","placeholder","minLength","onSearch","title","fetchDefaultProjectVisibility","async","results","keys","DefaultProjectVisibility","handleDefaultProjectVisibilityChange","requestProjects","p","page","ps","r","components","paging","loadMore","newQualifier","newVisibility","handleDateChanged","openCreateProjectForm","createProjectForm","closeCreateProjectForm","appState","Suggestions","suggestions","defer","ProjectCreation","count","Consumer","addSuggestions","removeSuggestions","SuggestionsInner","prevProps","getDefinitions","definitions","getValues","settings","setSettingValue","definition","multiValues","fieldValues","fields","JSON","stringify","setSimpleSettingValue","catch","resetSettingValue","sendTestEmail","subject","message","checkSecretKey","generateSecretKey","encryptValue","grantPermissionToUser","revokePermissionFromUser","grantPermissionToGroup","revokePermissionFromGroup","getPermissionTemplates","createPermissionTemplate","updatePermissionTemplate","deletePermissionTemplate","setDefaultPermissionTemplate","applyTemplateToProject","bulkApplyTemplate","grantTemplatePermissionToUser","revokeTemplatePermissionFromUser","grantTemplatePermissionToGroup","revokeTemplatePermissionFromGroup","addProjectCreatorToTemplate","removeProjectCreatorFromTemplate","getPermissionsUsersForComponent","getPermissionsGroupsForComponent","getGlobalPermissionsUsers","getGlobalPermissionsGroups","getPermissionTemplateUsers","users","getPermissionTemplateGroups","groups","changeProjectVisibility","changeProjectDefaultVisibility","projectVisibility","DayPicker","input","openCalendar","handleResetClick","closeCalendar","currentMonth","Date","lastHovered","open","handleDayClick","day","modifiers","handleDayMouseEnter","handleCurrentMonthChange","handleCurrentYearChange","handlePreviousMonthClick","handleNextMonthClick","highlightFrom","highlightTo","minDate","after","maxDate","months","years","getFullYear","selectedDays","lastHoveredOrValue","highlighted","from","weekdaysLong","weekdaysShort","onClickOutside","InputWrapper","onFocus","readOnly","fill","iconProps","month","getMonth","year","String","captionElement","NullComponent","disabledDays","before","firstDayOfWeek","navbarElement","onDayClick","onDayMouseEnter","intl","other","formattedValue","formatDate","ref","getComponentNavigation","getMarketplaceNavigation","getSettingsNavigation","SettingsKey","VisibilitySelector","showDetails","fetchPermissionTemplates","handleSubmit","onApply","reject","onCloseClick","onFormSubmit"],"mappings":"8FAAA,sLAgDe,MAAMA,UAA0B,gBAI7C,YAAYC,GACVC,MAAMD,GAHR,KAAAE,SAAU,EA6BV,KAAAC,kBAAqBC,IACnB,MAAM,KAAEC,EAAF,MAAQC,GAAUF,EAAMG,cAC9BC,KAAKC,SAAS,CAAE,CAACJ,GAAOC,KAG1B,KAAAI,uBAA0BC,IACxBH,KAAKC,SAAS,CAAEE,gBAGlB,KAAAC,iBAAoBR,IAClBA,EAAMS,iBAEN,MAAMC,EAAO,CACXT,KAAMG,KAAKO,MAAMV,KACjBW,QAASR,KAAKO,MAAME,IACpBN,WAAYH,KAAKO,MAAMJ,YAGzBH,KAAKC,SAAS,CAAES,SAAS,IACzB,YAAcJ,GAAMK,KAClBC,IACMZ,KAAKN,UACPM,KAAKC,SAAS,CAAEY,eAAgBD,EAASJ,QAASE,SAAS,IAC3DV,KAAKR,MAAMsB,qBAGf,KACMd,KAAKN,SACPM,KAAKC,SAAS,CAAES,SAAS,OArD/BV,KAAKO,MAAQ,CACXE,IAAK,GACLC,SAAS,EACTb,KAAM,GACNM,WAAYX,EAAMuB,0BAItB,oBACEf,KAAKN,SAAU,EAGjB,qBAEEsB,EAAa,KACPhB,KAAKiB,aACPjB,KAAKiB,YAAYC,UAKvB,uBACElB,KAAKN,SAAU,EAqCjB,SACE,MAAM,yBAAEqB,GAA6Bf,KAAKR,OACpC,eAAEqB,GAAmBb,KAAKO,MAEhC,OACE,gBAAC,IAAK,CAACY,aAAa,aAAaC,eAAgBpB,KAAKR,MAAM6B,SACzDR,EACC,2BACE,0BAAQS,UAAU,cAChB,0BAAK,oBAAU,2BAGjB,uBAAKA,UAAU,cACb,gBAAC,QAAK,CAACC,QAAQ,WACb,gBAAC,mBAAgB,CACfC,eAAgB,oBACd,6DAEFC,GAAG,4DACHC,OAAQ,CACNlB,QACE,gBAAC,IAAI,CAACmB,GAAI,YAAcd,EAAeJ,MAAOI,EAAehB,WAOvE,0BAAQyB,UAAU,cAChB,gBAAC,kBAAe,CACdG,GAAG,uBACHG,SAAUC,GAAS7B,KAAKiB,YAAcY,EACtCC,QAAS9B,KAAKR,MAAM6B,SACnB,oBAAU,YAKjB,wBAAMI,GAAG,sBAAsBM,SAAU/B,KAAKI,kBAC5C,0BAAQkB,UAAU,cAChB,0BAAK,oBAAU,2BAGjB,uBAAKA,UAAU,cACb,gBAAC,IAA0B,CAACA,UAAU,gBACtC,uBAAKA,UAAU,eACb,yBAAOU,QAAQ,uBACZ,oBAAU,QACX,gBAAC,IAAoB,OAEvB,yBACEC,WAAW,EACXR,GAAG,sBACHS,UAAW,IACXrC,KAAK,OACLsC,SAAUnC,KAAKL,kBACfyC,UAAU,EACVC,KAAK,OACLvC,MAAOE,KAAKO,MAAMV,QAGtB,uBAAKyB,UAAU,eACb,yBAAOU,QAAQ,sBACZ,oBAAU,OACX,gBAAC,IAAoB,OAEvB,yBACEP,GAAG,qBACHS,UAAW,IACXrC,KAAK,MACLsC,SAAUnC,KAAKL,kBACfyC,UAAU,EACVC,KAAK,OACLvC,MAAOE,KAAKO,MAAME,OAGtB,uBAAKa,UAAU,eACb,6BAAQ,oBAAU,eAClB,gBAAC,IAAkB,CACjBgB,sBAA+CC,IAA7BxB,EAClBO,UAAU,oBACVa,SAAUnC,KAAKE,uBACfC,WAAYH,KAAKO,MAAMJ,eAK7B,0BAAQmB,UAAU,cACftB,KAAKO,MAAMG,SAAW,qBAAGY,UAAU,yBACpC,gBAAC,eAAY,CAACkB,SAAUxC,KAAKO,MAAMG,QAASe,GAAG,yBAC5C,oBAAU,WAEb,gBAAC,kBAAe,CAACA,GAAG,wBAAwBK,QAAS9B,KAAKR,MAAM6B,SAC7D,oBAAU,kB,sDC9M3B,IAAIoB,EAAM,EAAQ,KACFC,EAAU,EAAQ,MAIC,iBAFvBA,EAAUA,EAAQC,WAAaD,EAAQE,QAAUF,KAG/CA,EAAU,CAAC,CAACG,EAAOC,EAAIJ,EAAS,MAG9C,IAAIK,EAAU,CAEd,OAAiB,OACjB,WAAoB,GAIhBC,GAFSP,EAAIC,EAASK,GAEXL,EAAQO,OAASP,EAAQO,OAAS,IAIjDJ,EAAOK,QAAUF,G,sBClBjBE,EADkC,EAAQ,IAChCC,EAA4B,IAE9BC,KAAK,CAACP,EAAOC,EAAI,yCAA0C,KAEnED,EAAOK,QAAUA,G,2UC8BF,MAAM,UAAoC,gBACvD,YAAY1D,GACVC,MAAMD,GAIR,KAAA6D,mBAAqB,KACnBrD,KAAKR,MAAM8D,UAAUtD,KAAKO,MAAMJ,YAChCH,KAAKR,MAAM6B,WAGb,KAAAnB,uBAA0BC,IACxBH,KAAKC,SAAS,CAAEE,gBAThBH,KAAKO,MAAQ,CAAEJ,WAAYX,EAAM+D,mBAYnC,SACE,OACE,gBAAC,IAAK,CAACpC,aAAa,aAAaC,eAAgBpB,KAAKR,MAAM6B,SAC1D,0BAAQC,UAAU,cAChB,0BAAK,oBAAU,qDAGjB,uBAAKA,UAAU,cACZ,CAAC,SAAU,WAAWkC,IAAIrD,GACzB,uBAAKmB,UAAU,oBAAoBb,IAAKN,GACtC,gBAAC,IAAK,CACJL,MAAOK,EACPsD,QAASzD,KAAKO,MAAMJ,aAAeA,EACnCuD,QAAS1D,KAAKE,wBACd,2BACG,oBAAU,aAAcC,GACzB,qBAAGmB,UAAU,yBACV,oBAAU,aAAcnB,EAAY,0BAO/C,gBAACwD,EAAA,MAAK,CAACpC,QAAQ,WACZ,oBAAU,sDAIf,0BAAQD,UAAU,cAChB,gBAAC,SAAM,CAACA,UAAU,aAAaQ,QAAS9B,KAAKqD,oBAC1C,oBAAU,oDAEb,gBAAC,kBAAe,CAAC/B,UAAU,iBAAiBQ,QAAS9B,KAAKR,MAAM6B,SAC7D,oBAAU,cClDR,MAAM,UAAe,gBAApC,c,oBACE,KAAAd,MAAe,CAAEqD,gBAAgB,GAEjC,KAAAC,4BAA8B,KAC5B7D,KAAKC,SAAS,CAAE2D,gBAAgB,KAGlC,KAAAE,mBAAqB,KACnB9D,KAAKC,SAAS,CAAE2D,gBAAgB,KAGlC,SACE,MAAM,yBAAE7C,EAAF,uBAA4BgD,GAA2B/D,KAAKR,OAC5D,eAAEoE,GAAmB5D,KAAKO,MAEhC,OACE,0BAAQe,UAAU,eAChB,sBAAIA,UAAU,cAAc,oBAAU,wBAEtC,uBAAKA,UAAU,gBACb,wBAAMA,UAAU,oBACd,wBAAMA,UAAU,eACb,oBAAU,wDAAyD,IACpE,8BACGP,EAA2B,oBAAU,aAAcA,GAA4B,MAGpF,gBAAC,aAAU,CACTO,UAAU,gDACVQ,QAAS9B,KAAK6D,+BAIjBE,GACC,gBAAC,SAAM,CAACtC,GAAG,iBAAiBK,QAAS9B,KAAKR,MAAMwE,iBAC7C,oBAAU,2BAKjB,qBAAG1C,UAAU,oBAAoB,oBAAU,yCAE1CsC,GACC,gBAAC,EAA2B,CAC1BL,kBAAmBxC,GAA4B,SAC/CM,QAASrB,KAAK8D,mBACdR,UAAWtD,KAAKR,MAAMyE,qC,yLC3CnB,MAAM,UAA2B,gBAAhD,c,oBACE,KAAAvE,SAAU,EACV,KAAAa,MAAe,CAAEG,SAAS,GAU1B,KAAAN,iBAAoBR,IAClBA,EAAMS,iBACNL,KAAKC,SAAS,CAAES,SAAS,IACzBwD,QAAQC,IAAI,CAACnE,KAAKoE,gBAAgB,QAASpE,KAAKoE,gBAAgB,WAAWzD,KACzEX,KAAKR,MAAM6E,gBACX,KACMrE,KAAKN,SACPM,KAAKC,SAAS,CAAES,SAAS,OAMjC,KAAA0D,gBAAmBE,GACjB,YAAsB,CACpBC,WAAYvE,KAAKR,MAAMgB,QAAQC,IAC/B+D,MAAOxE,KAAKR,MAAMiF,YAAYD,MAC9BF,eAzBJ,oBACEtE,KAAKN,SAAU,EAGjB,uBACEM,KAAKN,SAAU,EAuBjB,SACE,MAAMgF,EAAS,oBAAU,qCAEzB,OACE,gBAAC,IAAK,CAACvD,aAAcuD,EAAQtD,eAAgBpB,KAAKR,MAAM6B,SACtD,wBAAMU,SAAU/B,KAAKI,kBACnB,0BAAQkB,UAAU,cAChB,0BAAKoD,IAGP,uBAAKpD,UAAU,cACb,gBAAC,mBAAgB,CACfE,eAAgB,oBAAU,6CAC1BC,GAAG,4CACHC,OAAQ,CACNiD,OAAQ,8BAAS,oBAAU,uBAC3BC,WAAY,8BAAS,oBAAU,4BAKrC,0BAAQtD,UAAU,cACftB,KAAKO,MAAMG,SAAW,qBAAGY,UAAU,yBACpC,gBAAC,eAAY,CAACkB,SAAUxC,KAAKO,MAAMG,SAAU,oBAAU,YACvD,gBAAC,kBAAe,CAACoB,QAAS9B,KAAKR,MAAM6B,SAAU,oBAAU,eCnDtD,MAAM,UAA0B,gBAA/C,c,oBACE,KAAA3B,SAAU,EACV,KAAAa,MAAe,CAAEsE,oBAAoB,EAAOnE,SAAS,EAAOoE,oBAAoB,GAUhF,KAAAC,iBAAmB,KACjB/E,KAAKC,SAAS,CAAES,SAAS,IACzB,YAAuB,CAAEsE,UAAWhF,KAAKR,MAAMgB,QAAQC,MAAOE,KAC5D,EAAGsE,oBACD,GAAIjF,KAAKN,QAAS,CAChB,MAAMwF,EAAYC,QAChBF,GAAiBA,EAAcG,iBAAmBH,EAAcI,kBAElErF,KAAKC,SAAS,CAAEiF,YAAWxE,SAAS,MAGxC,KACMV,KAAKN,SACPM,KAAKC,SAAS,CAAES,SAAS,OAMjC,KAAA4E,mBAAqB,UACU/C,IAAzBvC,KAAKO,MAAM2E,WAA4BlF,KAAKO,MAAMG,SACpDV,KAAK+E,oBAIT,KAAAQ,yBAA2B,KACzBvF,KAAKC,SAAS,CAAE4E,oBAAoB,KAGtC,KAAAW,yBAA2B,KACrBxF,KAAKN,SACPM,KAAKC,SAAS,CAAE4E,oBAAoB,KAIxC,KAAAY,yBAA2B,KACzBzF,KAAKC,SAAS,CAAE6E,oBAAoB,KAGtC,KAAAY,yBAA2B,IAAM1F,KAAKC,SAAS,CAAE6E,oBAAoB,IAErE,KAAAa,wBAA0B,KACxB3F,KAAKC,SAAS,CAAEiF,WAAW,EAAMJ,oBAAoB,KAlDvD,oBACE9E,KAAKN,SAAU,EAGjB,uBACEM,KAAKN,SAAU,EAgDjB,SACE,MAAM,UAAEwF,EAAF,QAAaxE,GAAYV,KAAKO,MAEpC,OACE,gCACE,gBAAC,IAAe,CAACqF,OAAQ5F,KAAKsF,oBAC3B5E,EACC,gBAACmF,EAAA,oBAAmB,KAClB,gBAAC,IAAe,OAGlB,iCACiB,IAAdX,GACC,gBAACW,EAAA,oBAAmB,CAClBvE,UAAU,sBACVK,GAAI,YAA2B3B,KAAKR,MAAMgB,QAAQC,MACjD,oBAAU,sBAIA,IAAdyE,GACC,gBAACW,EAAA,oBAAmB,CAClBvE,UAAU,oBACVQ,QAAS9B,KAAKyF,0BACb,oBAAU,uCAMnB,gBAACI,EAAA,oBAAmB,CAClBvE,UAAU,oBACVQ,QAAS9B,KAAKuF,0BACb,oBAAU,kCAIdvF,KAAKO,MAAMuE,oBACV,gBAAC,EAAkB,CACjBL,YAAazE,KAAKR,MAAMiF,YACxBpD,QAASrB,KAAK0F,yBACdrB,gBAAiBrE,KAAK2F,wBACtBnF,QAASR,KAAKR,MAAMgB,UAIvBR,KAAKO,MAAMsE,oBACV,gBAACiB,EAAA,EAAa,CAACzE,QAASrB,KAAKwF,yBAA0BhF,QAASR,KAAKR,MAAMgB,YC7GtE,MAAM,WAAmB,gBAAxC,c,oBACE,KAAAuF,mBAAsBtC,IACpBzD,KAAKR,MAAMwG,eAAehG,KAAKR,MAAMgB,QAASiD,IAGhD,SACE,MAAM,QAAEjD,EAAF,SAAWyF,GAAajG,KAAKR,MAEnC,OACE,yCAAsBgB,EAAQC,KAC5B,sBAAIa,UAAU,QACZ,gBAAC,IAAQ,CAACmC,QAASwC,EAAUvC,QAAS1D,KAAK+F,sBAG7C,sBAAIzE,UAAU,8CACZ,gBAAC,IAAI,CACHA,UAAU,iBACVK,GAAI,YAAwBnB,EAAQC,IAAKD,EAAQ0F,YACjD,gBAAC,IAAa,CAAC5E,UAAU,sBAAsB4E,UAAW1F,EAAQ0F,YAElE,gBAAC,IAAO,CAACC,QAAS3F,EAAQX,KAAMuG,UAAU,QACxC,4BAAO5F,EAAQX,SAKrB,sBAAIyB,UAAU,eACZ,gBAAC+E,EAAA,EAAqB,CAACH,UAAW1F,EAAQ0F,UAAW/F,WAAYK,EAAQL,cAG3E,sBAAImB,UAAU,8CACZ,gBAAC,IAAO,CAAC6E,QAAS3F,EAAQC,IAAK2F,UAAU,QACvC,wBAAM9E,UAAU,QAAQd,EAAQC,OAIpC,sBAAIa,UAAU,0BACXd,EAAQ8F,iBACP,gBAAC,IAAa,CAACC,KAAM/F,EAAQ8F,mBAE7B,wBAAMhF,UAAU,QAAM,MAI1B,sBAAIA,UAAU,eACZ,gBAAC,EAAiB,CAACmD,YAAazE,KAAKR,MAAMiF,YAAajE,QAASA,OCjD5D,MAAM,WAAiB,gBAAtC,c,oBACE,KAAAwF,eAAiB,CAACxF,EAAkBiD,KAC9BA,EACFzD,KAAKR,MAAMgH,kBAAkBhG,EAAQC,KAErCT,KAAKR,MAAMiH,oBAAoBjG,EAAQC,MAI3C,SACE,OACE,uBAAKa,UAAU,iCACb,yBACEA,UAAW,EAAW,OAAQ,QAAS,CAAE,eAAgBtB,KAAKR,MAAMkH,QACpEjF,GAAG,qCACH,6BACE,0BACE,2BACA,0BAAK,oBAAU,SACf,2BACA,0BAAK,oBAAU,QACf,sBAAIH,UAAU,0BAA0B,oBAAU,kBAClD,6BAGJ,6BACGtB,KAAKR,MAAMmH,SAASnD,IAAIhD,GACvB,gBAAC,GAAU,CACTiE,YAAazE,KAAKR,MAAMiF,YACxBhE,IAAKD,EAAQC,IACbuF,eAAgBhG,KAAKgG,eACrBxF,QAASA,EACTyF,SAAUjG,KAAKR,MAAMoH,UAAUC,SAASrG,EAAQC,Y,4IClBjD,MAAM,WAA+B,gBAApD,c,oBACE,KAAAf,SAAU,EACV,KAAAa,MAAe,CAAEuG,MAAM,EAAOpG,SAAS,EAAMqG,YAAY,GAgCzD,KAAA1D,mBAAqB,KACnB,MAAM,eAAE2D,GAAmBhH,KAAKR,OAC1B,mBAAEyH,GAAuBjH,KAAKO,MACpC,GAAI0G,EAAoB,CACtBjH,KAAKC,SAAS,CAAE8G,YAAY,IAC5B,MAAMG,EAAalH,KAAKR,MAAMoH,UAAUO,OACpC,CACER,SAAU3G,KAAKR,MAAMoH,UAAUQ,OAC/BC,WAAYrH,KAAKR,MAAM0G,UACvBoB,WAAYL,GAEd,CACED,eAAgBA,GAAkB,2BAAiBA,GACnDO,kBAAmBvH,KAAKR,MAAMgI,kBAAejF,EAC7C8E,WAAYrH,KAAKR,MAAM0G,UACvBuB,EAAGzH,KAAKR,MAAMkI,YAASnF,EACvB+E,WAAYL,GAElB,YAAkBC,GAAYvG,KAC5B,KACMX,KAAKN,SACPM,KAAKC,SAAS,CAAE6G,MAAM,EAAMC,YAAY,KAG5C,KACM/G,KAAKN,SACPM,KAAKC,SAAS,CAAE8G,YAAY,QAOtC,KAAAY,+BAAiC,EAAG7H,YAClCE,KAAKC,SAAS,CAAEgH,mBAAoBnH,KAGtC,KAAA8H,cAAgB,IACd,gBAACjE,EAAA,MAAK,CAACpC,QAAQ,WACZvB,KAAKR,MAAMoH,UAAUO,OAClB,kCACE,wEACAnH,KAAKR,MAAMoH,UAAUO,QAEvB,kCACE,mEACAnH,KAAKR,MAAMqI,QAKrB,KAAAC,aAAe,IACb,uBAAKxG,UAAU,eACb,6BACG,oBAAU,YACX,gBAAC,KAAoB,OAEvB,gBAAC,KAAM,CACLyG,WAAW,EACXvF,SAAUxC,KAAKO,MAAMwG,WACrB5E,SAAUnC,KAAK2H,+BACf5E,QAAS/C,KAAKO,MAAMyH,oBAAqBxE,IAAIyE,IAAC,CAAOC,MAAOD,EAAEpI,KAAMC,MAAOmI,EAAExG,MAC7E3B,MAAOE,KAAKO,MAAM0G,sBA5FxB,oBACEjH,KAAKN,SAAU,EACfM,KAAKmI,0BAGP,uBACEnI,KAAKN,SAAU,EAGjB,0BACEM,KAAKC,SAAS,CAAES,SAAS,IACzB,cAAyBC,KACvB,EAAGqH,0BACGhI,KAAKN,SACPM,KAAKC,SAAS,CACZS,SAAS,EACTuG,mBACEe,EAAoBb,OAAS,EAAIa,EAAoB,GAAGvG,QAAKc,EAC/DyF,yBAIN,KACMhI,KAAKN,SACPM,KAAKC,SAAS,CAAES,SAAS,MAyEjC,SACE,MAAM,KAAEoG,EAAF,QAAQpG,EAAR,oBAAiBsH,EAAjB,WAAsCjB,GAAe/G,KAAKO,MAC1DmE,EAAS,oBAAU,uDAEzB,OACE,gBAAC,IAAK,CAACvD,aAAcuD,EAAQtD,eAAgBpB,KAAKR,MAAM6B,QAAS+G,KAAK,SACpE,0BAAQ9G,UAAU,cAChB,0BAAKoD,IAGP,uBAAKpD,UAAU,cACZwF,GACC,gBAACnD,EAAA,MAAK,CAACpC,QAAQ,WAAW,oBAAU,yCAGrCb,GAAW,qBAAGY,UAAU,aAEvBZ,IAAYoG,GAAQkB,GACpB,gCACE,gBAAC,KAA0B,CAAC1G,UAAU,kBACrCtB,KAAK4H,gBACL5H,KAAK8H,iBAKZ,0BAAQxG,UAAU,cACfyF,GAAc,qBAAGzF,UAAU,0BAC1BZ,IAAYoG,GAAQkB,GACpB,gBAAC,eAAY,CAACxF,SAAUuE,EAAYjF,QAAS9B,KAAKqD,oBAC/C,oBAAU,UAGf,gBAAC,kBAAe,CAACvB,QAAS9B,KAAKR,MAAM6B,SAClCyF,EAAO,oBAAU,SAAW,oBAAU,cC7IpC,MAAM,WAAoB,gBAAzC,c,oBACE,KAAApH,SAAU,EACV,KAAAa,MAAe,CAAEG,SAAS,GAU1B,KAAA2C,mBAAqB,KACnBrD,KAAKC,SAAS,CAAES,SAAS,IACzB,MAAM,eAAEsG,GAAmBhH,KAAKR,MAC1B0H,EAAalH,KAAKR,MAAMoH,UAAUO,OACpC,CACER,SAAU3G,KAAKR,MAAMoH,UAAUQ,QAEjC,CACEJ,eAAgBA,GAAkB,2BAAiBA,GACnDO,kBAAmBvH,KAAKR,MAAMgI,kBAAejF,EAC7C8E,WAAYrH,KAAKR,MAAM0G,UACvBuB,EAAGzH,KAAKR,MAAMkI,YAASnF,GAE7B,YAAmB2E,GAAYvG,KAC7B,KACMX,KAAKN,SACPM,KAAKR,MAAM8D,aAGf,KACMtD,KAAKN,SACPM,KAAKC,SAAS,CAAES,SAAS,OAMjC,KAAAkH,cAAgB,IACd,gBAACjE,EAAA,MAAK,CAACpC,QAAQ,WACZvB,KAAKR,MAAMoH,UAAUO,OAClB,kCACE,8CACAnH,KAAKR,MAAMoH,UAAUO,QAEvB,kCAAwB,yCAA0CnH,KAAKR,MAAMqI,QA1CrF,oBACE7H,KAAKN,SAAU,EAGjB,uBACEM,KAAKN,SAAU,EAyCjB,SACE,MAAMgF,EAAS,oBAAU,oBAAqB1E,KAAKR,MAAM0G,WAEzD,OACE,gBAAC,IAAK,CAAC/E,aAAcuD,EAAQtD,eAAgBpB,KAAKR,MAAM6B,SACtD,0BAAQC,UAAU,cAChB,0BAAKoD,IAGP,uBAAKpD,UAAU,cACZtB,KAAK4H,gBACL,oBAAU,4BAA6B5H,KAAKR,MAAM0G,YAGrD,0BAAQ5E,UAAU,cACftB,KAAKO,MAAMG,SAAW,qBAAGY,UAAU,yBACpC,gBAAC,eAAY,CACXA,UAAU,aACVkB,SAAUxC,KAAKO,MAAMG,QACrBoB,QAAS9B,KAAKqD,oBACb,oBAAU,WAEb,gBAAC,kBAAe,CAACvB,QAAS9B,KAAKR,MAAM6B,SAAU,oBAAU,cCvDnE,MAAMgH,GAAmB,CAAC,MAAO,KAAM,OAExB,MAAM,WAAe,gBAApC,c,oBACE,KAAA3I,SAAU,EACV,KAAAa,MAAe,CAAE+H,wBAAwB,EAAOC,aAAa,GAE7D,KAAAC,oBAAsB,KACpB,MAAMzF,EAAU/C,KAAKR,MAAMiJ,mBAAmBjF,IAAIiE,IAAC,CACjDS,MAAO,oBAAU,aAAcT,GAC/B3H,MAAO2H,KAET,OAAO,KAAO1E,EAAS2F,GAAUL,GAAiBM,QAAQD,EAAO5I,SAGnE,KAAA4D,QAAWD,IACLA,EACFzD,KAAKR,MAAMoJ,gBAEX5I,KAAKR,MAAMqJ,mBAIf,KAAAC,kBAAoB,KAClB9I,KAAKC,SAAS,CAAEsI,aAAa,KAG/B,KAAAQ,iBAAmB,KACjB/I,KAAKC,SAAS,CAAEsI,aAAa,KAG/B,KAAAS,oBAAsB,KACpBhJ,KAAK+I,mBACL/I,KAAKR,MAAMyJ,oBAGb,KAAAC,6BAA+B,KAC7BlJ,KAAKC,SAAS,CAAEqI,wBAAwB,KAG1C,KAAAa,4BAA8B,KAC5BnJ,KAAKC,SAAS,CAAEqI,wBAAwB,KAG1C,KAAAc,sBAAwB,EAAGtJ,WAA+BE,KAAKR,MAAM6J,mBAAmBvJ,GAExF,KAAAI,uBAAyB,EAAGJ,WAA+BE,KAAKR,MAAM8J,oBAAoBxJ,GAE1F,KAAAyJ,eAAiB,KACf,MAAMC,EACJxJ,KAAKR,MAAMmH,SAASQ,OAAS,GAAKnH,KAAKR,MAAMoH,UAAUO,SAAWnH,KAAKR,MAAMmH,SAASQ,OAClFsC,EACJzJ,KAAKR,MAAMmH,SAASQ,OAAS,GAC7BnH,KAAKR,MAAMoH,UAAUO,OAAS,GAC9BnH,KAAKR,MAAMoH,UAAUO,OAASnH,KAAKR,MAAMmH,SAASQ,OAC9C1D,EAAU+F,GAAgBC,EAChC,OACE,gBAAC,IAAQ,CACPhG,QAASA,EACThC,GAAG,qBACHiC,QAAS1D,KAAK0D,QACd+F,WAAYA,KAKlB,KAAAC,sBAAyBhB,GACvB,4BACE,gBAAC,IAAa,CAACpH,UAAU,sBAAsB4E,UAAWwC,EAAO5I,QAChE4I,EAAOR,OAIZ,KAAAyB,sBAAwB,IACN3J,KAAKwI,sBACTrB,OAAS,EACZ,KAGP,sBAAI7F,UAAU,2BACZ,gBAAC,KAAM,CACLA,UAAU,eACVyG,WAAW,EACXvF,UAAWxC,KAAKR,MAAMkH,MACtB7G,KAAK,qBACLsC,SAAUnC,KAAKoJ,sBACfQ,eAAgB5J,KAAK0J,sBACrB3G,QAAS/C,KAAKwI,sBACdqB,YAAY,EACZ/J,MAAOE,KAAKR,MAAM6H,WAClByC,cAAe9J,KAAK0J,yBAM5B,KAAAK,uBAAyB,IAErB,sBAAIzI,UAAU,2BACZ,gBAAC,KAAM,CACLA,UAAU,cACVyG,WAAW,EACXvF,UAAWxC,KAAKR,MAAMkH,MACtB7G,KAAK,sBACLsC,SAAUnC,KAAKE,uBACf6C,QAAS,CACP,CAAEjD,MAAO,MAAOoI,MAAO,oBAAU,oBACjC,CAAEpI,MAAO,SAAUoI,MAAO,oBAAU,sBACpC,CAAEpI,MAAO,UAAWoI,MAAO,oBAAU,wBAEvC2B,YAAY,EACZ/J,MAAOE,KAAKR,MAAMW,YAAc,SAMxC,KAAA6J,iBAAmB,IACS,QAA1BhK,KAAKR,MAAM6H,WACT,sBAAI/F,UAAU,2BACZ,gBAAC,IAAQ,CACPmC,QAASzD,KAAKR,MAAMgI,YACpBlG,UAAU,wBACVG,GAAG,uBACHiC,QAAS1D,KAAKR,MAAMyK,sBACpB,wBAAM3I,UAAU,kCACb,oBAAU,mCAGf,gBAAC,KAAW,CACVA,UAAU,cACV6E,QAAS,oBAAU,4CAGrB,KAEN,KAAA+D,iBAAmB,IAEf,sBAAI5I,UAAU,2BACZ,gBAAC6I,GAAA,EAAS,CACRC,eAAe,eACfvK,KAAK,kBACLsC,SAAUnC,KAAKR,MAAM6K,cACrBC,YAAa,oBAAU,wBACvBxK,MAAOE,KAAKR,MAAMwH,kBAM1B,SACE,OACE,uBAAK1F,UAAU,qBACb,yBAAOA,UAAU,QACf,6BACE,0BACE,sBAAIA,UAAU,oBACXtB,KAAKR,MAAMkH,MAAQ1G,KAAKuJ,iBAAmB,qBAAGjI,UAAU,aAE1DtB,KAAK2J,wBACL3J,KAAKkK,mBACLlK,KAAK+J,yBACL/J,KAAKgK,mBACN,sBAAI1I,UAAU,eACZ,gBAAC,KAAS,CACRiJ,UAAW,EACXpI,SAAUnC,KAAKR,MAAMgL,SACrBF,YAAa,oBAAU,gCACvBxK,MAAOE,KAAKR,MAAMkI,SAGtB,sBAAIpG,UAAU,2BACZ,gBAAC,SAAM,CACLA,UAAU,oCACVkB,SAA0C,IAAhCxC,KAAKR,MAAMoH,UAAUO,OAC/BrF,QAAS9B,KAAKkJ,8BACb,oBAAU,wDAEc,QAA1BlJ,KAAKR,MAAM6H,YACV,gBAAC,SAAM,CACL/F,UAAU,mCACVkB,SAA0C,IAAhCxC,KAAKR,MAAMoH,UAAUO,OAC/BrF,QAAS9B,KAAK8I,kBACd2B,MACkC,IAAhCzK,KAAKR,MAAMoH,UAAUO,OACjB,oBAAU,yCACV,oBAAU,yCAEf,oBAAU,eAQtBnH,KAAKO,MAAM+H,wBACV,gBAAC,GAAsB,CACrBtB,eAAgBhH,KAAKR,MAAMwH,eAC3B3F,QAASrB,KAAKmJ,4BACd3B,YAAaxH,KAAKR,MAAMgI,YACxBtB,UAAWlG,KAAKR,MAAM6H,WACtBK,MAAO1H,KAAKR,MAAMkI,MAClBd,UAAW5G,KAAKR,MAAMoH,UACtBiB,MAAO7H,KAAKR,MAAMqI,QAIrB7H,KAAKO,MAAMgI,aACV,gBAAC,GAAW,CACVvB,eAAgBhH,KAAKR,MAAMwH,eAC3B3F,QAASrB,KAAK+I,iBACdzF,UAAWtD,KAAKgJ,oBAChBxB,YAAaxH,KAAKR,MAAMgI,YACxBtB,UAAWlG,KAAKR,MAAM6H,WACtBK,MAAO1H,KAAKR,MAAMkI,MAClBd,UAAW5G,KAAKR,MAAMoH,UACtBiB,MAAO7H,KAAKR,MAAMqI,UCtNvB,MAAM,WAAY,gBAGvB,YAAYrI,GACVC,MAAMD,GAHR,KAAAE,SAAU,EA4BV,KAAAgL,8BAAgCC,UAC9B,MAAMC,QAAgB,YAAU,CAAEC,KAAM,IAAYC,2BAEhD9K,KAAKN,SAAWkL,EAAQzD,OAAS,GAAKyD,EAAQ,GAAG9K,OACnDE,KAAKC,SAAS,CAAEc,yBAA0B6J,EAAQ,GAAG9K,SAIzD,KAAAiL,qCAAuCJ,gBAC/B,YAA+BxK,GAEjCH,KAAKN,SACPM,KAAKC,SAAS,CAAEc,yBAA0BZ,KAI9C,KAAA6K,gBAAkB,KAChB,MAAM,eAAEhE,GAAmBhH,KAAKO,MAC1B2G,EAAa,CACjBF,eAAgBA,GAAkB,gCAAsBA,GACxDO,kBAAmBvH,KAAKO,MAAMiH,kBAAejF,EAC7C0I,EAAuB,IAApBjL,KAAKO,MAAM2K,KAAalL,KAAKO,MAAM2K,UAAO3I,EAC7C4I,GArDY,GAsDZ1D,EAAGzH,KAAKO,MAAMmH,YAASnF,EACvB8E,WAAYrH,KAAKO,MAAM8G,WACvBlH,WAAYH,KAAKO,MAAMJ,YAEzB,OAAO,YAAc+G,GAAYvG,KAAKyK,IACpC,GAAIpL,KAAKN,QAAS,CAChB,IAAIiH,EAAsByE,EAAEC,WACxBrL,KAAKO,MAAM2K,KAAO,IACpBvE,EAAW,IAAI3G,KAAKO,MAAMoG,YAAaA,IAEzC3G,KAAKC,SAAS,CAAEyG,OAAO,EAAMC,WAAUC,UAAW,GAAIiB,MAAOuD,EAAEE,OAAOzD,YAK5E,KAAA0D,SAAW,KACTvL,KAAKC,SAAS,EAAGiL,WAAH,CAAiBxE,OAAO,EAAOwE,KAAMA,EAAO,IAAMlL,KAAKgL,kBAGvE,KAAAR,SAAY9C,IACV1H,KAAKC,SAAS,CAAEyG,OAAO,EAAOwE,KAAM,EAAGxD,QAAOd,UAAW,IAAM5G,KAAKgL,kBAGtE,KAAAf,qBAAwBzC,IACtBxH,KAAKC,SACH,CAAEyG,OAAO,EAAOwE,KAAM,EAAGxD,MAAO,GAAIF,cAAaH,WAAY,MAAOT,UAAW,IAC/E5G,KAAKgL,kBAIT,KAAA3B,mBAAsBmC,IACpBxL,KAAKC,SACH,CACEyG,OAAO,EACPwE,KAAM,EACN1D,aAAa,EACbE,MAAO,GACPL,WAAYmE,EACZ5E,UAAW,IAEb5G,KAAKgL,kBAIT,KAAA1B,oBAAuBmC,IACrBzL,KAAKC,SACH,CACEyG,OAAO,EACPwE,KAAM,EACN1D,aAAa,EACbE,MAAO,GACPvH,WAA8B,QAAlBsL,OAA0BlJ,EAAYkJ,EAClD7E,UAAW,IAEb5G,KAAKgL,kBAIT,KAAAU,kBAAqB1E,GACnBhH,KAAKC,SAAS,CAAEyG,OAAO,EAAOwE,KAAM,EAAGlE,kBAAkBhH,KAAKgL,iBAEhE,KAAAxE,kBAAqBhG,IACnBR,KAAKC,SAAS,EAAG2G,gBAAH,CAAsBA,UAAW,IAAK,IAAIA,EAAWpG,QAGrE,KAAAiG,oBAAuBjG,IACrBR,KAAKC,SAAS,EAAG2G,gBAAH,CAAsBA,UAAW,IAAQA,EAAWpG,OAGpE,KAAAoI,cAAgB,KACd5I,KAAKC,SAAS,EAAG0G,eAAH,CAAqBC,UAAWD,EAASnD,IAAIhD,GAAWA,EAAQC,SAGhF,KAAAoI,gBAAkB,KAChB7I,KAAKC,SAAS,CAAE2G,UAAW,MAG7B,KAAA+E,sBAAwB,KACtB3L,KAAKC,SAAS,CAAE2L,mBAAmB,KAGrC,KAAAC,uBAAyB,KACvB7L,KAAKC,SAAS,CAAE2L,mBAAmB,KAjInC5L,KAAKO,MAAQ,CACXqL,mBAAmB,EACnBlF,OAAO,EACPC,SAAU,GACVa,aAAa,EACbK,MAAO,EACPqD,KAAM,EACNxD,MAAO,GACPL,WAAY,MACZT,UAAW,IAEb5G,KAAKgL,gBAAkB,IAAShL,KAAKgL,gBAAiB,KAGxD,oBACEhL,KAAKN,SAAU,EACfM,KAAKgL,kBACLhL,KAAK0K,gCAGP,uBACE1K,KAAKN,SAAU,EA+GjB,SACE,MAAM,SAAEoM,EAAF,YAAYrH,GAAgBzE,KAAKR,OACjC,yBAAEuB,GAA6Bf,KAAKO,MAC1C,OACE,uBAAKe,UAAU,oBAAoBG,GAAG,4BACpC,gBAACsK,EAAA,EAAW,CAACC,YAAY,wBACzB,gBAAC,IAAM,CAACC,OAAO,EAAOxB,MAAO,oBAAU,yBAEvC,gBAAC,EAAM,CACL1J,yBAA0BA,EAC1BgD,uBAAwB,YAAoBU,EAAa,IAAYyH,iBACrEjI,iCAAkCjE,KAAK+K,qCACvC/G,gBAAiBhE,KAAK2L,wBAGxB,gBAAC,GAAM,CACL3E,eAAgBhH,KAAKO,MAAMyG,eAC3B6B,gBAAiB7I,KAAK6I,gBACtBD,cAAe5I,KAAK4I,cACpByB,cAAerK,KAAK0L,kBACpBzC,iBAAkBjJ,KAAKgL,gBACvBf,qBAAsBjK,KAAKiK,qBAC3BZ,mBAAoBrJ,KAAKqJ,mBACzBmB,SAAUxK,KAAKwK,SACflB,oBAAqBtJ,KAAKsJ,oBAC1B3C,SAAU3G,KAAKO,MAAMoG,SACrBa,YAAaxH,KAAKO,MAAMiH,YACxBH,WAAYrH,KAAKO,MAAM8G,WACvBK,MAAO1H,KAAKO,MAAMmH,MAClBhB,MAAO1G,KAAKO,MAAMmG,MAClBE,UAAW5G,KAAKO,MAAMqG,UACtB6B,mBAAoBqD,EAASzE,WAC7BQ,MAAO7H,KAAKO,MAAMsH,MAClB1H,WAAYH,KAAKO,MAAMJ,aAGzB,gBAAC,GAAQ,CACPsE,YAAazE,KAAKR,MAAMiF,YACxBgC,oBAAqBzG,KAAKyG,oBAC1BD,kBAAmBxG,KAAKwG,kBACxBG,SAAU3G,KAAKO,MAAMoG,SACrBD,MAAO1G,KAAKO,MAAMmG,MAClBE,UAAW5G,KAAKO,MAAMqG,YAGxB,gBAAC,IAAU,CACTuF,MAAOnM,KAAKO,MAAMoG,SAASQ,OAC3BoE,SAAUvL,KAAKuL,SACf7E,MAAO1G,KAAKO,MAAMmG,MAClBmB,MAAO7H,KAAKO,MAAMsH,QAGnB7H,KAAKO,MAAMqL,mBACV,gBAACrM,EAAA,EAAiB,CAChBwB,yBAA0BA,EAC1BM,QAASrB,KAAK6L,uBACd/K,iBAAkBd,KAAKgL,oBAapB,sBALUzK,IAAD,CACtBuL,SAAU,sBAAYvL,GACtBkE,YAAa,yBAAelE,KAGf,CAAyB,K,iCC3QxC,sDA0Be,SAASwL,GAAY,YAAEC,IACpC,OACE,gBAAC,IAAmBI,SAAQ,KACzB,EAAGC,iBAAgBC,uBAClB,gBAACC,EAAgB,CACfF,eAAgBA,EAChBC,kBAAmBA,EACnBN,YAAaA,KAavB,MAAMO,UAAyB,gBAC7B,oBACEvM,KAAKR,MAAM6M,eAAerM,KAAKR,MAAMwM,aAGvC,mBAAmBQ,GACbA,EAAUR,cAAgBhM,KAAKR,MAAMwM,cACvChM,KAAKR,MAAM8M,kBAAkBtM,KAAKR,MAAMwM,aACxChM,KAAKR,MAAM6M,eAAeG,EAAUR,cAIxC,uBACEhM,KAAKR,MAAM8M,kBAAkBtM,KAAKR,MAAMwM,aAG1C,SACE,OAAO,Q,kYCrCJ,SAASS,EAAezH,GAC7B,OAAO,kBAAQ,iCAAkC,CAAEA,cAAarE,KAC9DyK,GAAKA,EAAEsB,YACP,KAIG,SAASC,EACdrM,GAEA,OAAO,kBAAQ,uBAAwBA,GAAMK,KAAKyK,GAAKA,EAAEwB,UAGpD,SAASC,EACdC,EACAhN,EACAkF,GAEA,MAAM,IAAEvE,GAAQqM,EACVxM,EAAoB,CAAEG,MAAKuE,aAYjC,OAVI,YAAqB8H,IAAeA,EAAWC,YACjDzM,EAAKoB,OAAS5B,EACe,iBAApBgN,EAAWzK,KACpB/B,EAAK0M,YAAclN,EAChB0D,IAAKyJ,GAAgB,IAAOA,EAAQnN,GAAkB,MAATA,IAC7C0D,IAAI0J,KAAKC,WAEZ7M,EAAKR,MAAQA,EAGR,eAAK,oBAAqBQ,GAG5B,SAAS8M,EACd9M,GAEA,OAAO,eAAK,oBAAqBA,GAAM+M,MAAM,KAGxC,SAASC,EACdhN,GAEA,OAAO,eAAK,sBAAuBA,GAG9B,SAASiN,EAAc5L,EAAY6L,EAAiBC,GACzD,OAAO,eAAK,mBAAoB,CAAE9L,KAAI6L,UAASC,YAG1C,SAASC,IACd,OAAO,kBAAQ,kCAAkCL,MAAM,KAGlD,SAASM,IACd,OAAO,mBAAS,qCAAqCN,MAAM,KAGtD,SAASO,EAAa9N,GAC3B,OAAO,mBAAS,wBAAyB,CAAEA,UAASuN,MAAM,O,iCCrF5D,s2BAyBO,SAASQ,EAAsBvN,GAKpC,OAAO,eAAK,4BAA6BA,GAAM+M,MAAM,KAGhD,SAASS,EAAyBxN,GAKvC,OAAO,eAAK,+BAAgCA,GAAM+M,MAAM,KAGnD,SAASU,EAAuBzN,GAKrC,OAAO,eAAK,6BAA8BA,GAAM+M,MAAM,KAGjD,SAASW,EAA0B1N,GAKxC,OAAO,eAAK,gCAAiCA,GAAM+M,MAAM,KASpD,SAASY,IAEd,OAAO,kBADK,qCAIP,SAASC,EAAyB5N,GACvC,OAAO,mBAAS,mCAAoCA,GAG/C,SAAS6N,EAAyB7N,GACvC,OAAO,eAAK,mCAAoCA,GAG3C,SAAS8N,EAAyB9N,GACvC,OAAO,eAAK,mCAAoCA,GAAM+M,MAAM,KAMvD,SAASgB,EAA6B/G,EAAoBpB,GAC/D,OAAO,eAAK,wCAAyC,CAAEoB,aAAYpB,cAG9D,SAASoI,EAAuBhO,GACrC,OAAO,eAAK,kCAAmCA,GAAM+M,MAAM,KAGtD,SAASkB,EAAkBjO,GAChC,OAAO,eAAK,uCAAwCA,GAG/C,SAASkO,EAA8BlO,GAK5C,OAAO,eAAK,wCAAyCA,GAGhD,SAASmO,EAAiCnO,GAK/C,OAAO,eAAK,6CAA8CA,GAGrD,SAASoO,EAA+BpO,GAC7C,OAAO,eAAK,yCAA0CA,GAGjD,SAASqO,EAAkCrO,GAChD,OAAO,eAAK,8CAA+CA,GAGtD,SAASsO,EAA4BtH,EAAoBhD,GAC9D,OAAO,eAAK,mDAAoD,CAAEgD,aAAYhD,eAGzE,SAASuK,EACdvH,EACAhD,GAEA,OAAO,eAAK,wDAAyD,CAAEgD,aAAYhD,eAG9E,SAASwK,EAAgCxO,GAU9C,OAHKA,EAAK6K,KACR7K,EAAK6K,GAnHS,KAqHT,kBAAQ,yBAA0B7K,GAAM+M,MAAM,KAGhD,SAAS0B,EAAiCzO,GAU/C,OAHKA,EAAK6K,KACR7K,EAAK6K,GAhIS,KAkIT,kBAAQ,0BAA2B7K,GAAM+M,MAAM,KAGjD,SAAS2B,EAA0B1O,GASxC,OAHKA,EAAK6K,KACR7K,EAAK6K,GA5IS,KA8IT,kBAAQ,yBAA0B7K,GAGpC,SAAS2O,EAA2B3O,GASzC,OAHKA,EAAK6K,KACR7K,EAAK6K,GAxJS,KA0JT,kBAAQ,0BAA2B7K,GAGrC,SAAS4O,EACd5H,EACAI,EACApD,GAEA,MAAMhE,EAAoB,CAAEgH,aAAY6D,GAlKxB,KAyKhB,OANIzD,IACFpH,EAAKmH,EAAIC,GAEPpD,IACFhE,EAAKgE,WAAaA,GAEb,kBAAQ,kCAAmChE,GAAMK,KAAKyK,GAAKA,EAAE+D,OAG/D,SAASC,EACd9H,EACAI,EACApD,GAEA,MAAMhE,EAAoB,CAAEgH,aAAY6D,GAjLxB,KAwLhB,OANIzD,IACFpH,EAAKmH,EAAIC,GAEPpD,IACFhE,EAAKgE,WAAaA,GAEb,kBAAQ,mCAAoChE,GAAMK,KAAKyK,GAAKA,EAAEiE,QAGhE,SAASC,EACd9O,EACAL,GAEA,OAAO,eAAK,kCAAmC,CAAEK,UAASL,eAAckN,MAAM,KAGzE,SAASkC,EACdC,GAEA,OAAO,eAAK,0CAA2C,CAAEA,sBAAqBnC,MAC5E,O,4oBClLJ,MAAMoC,EAAY,4BAAkB,IAAM,oCAA4B,aAwBvD,MAAMtF,UAAkB,gBAGrC,YAAY3K,GACVC,MAAMD,GAIR,KAAA0B,MAAQ,KACFlB,KAAK0P,OACP1P,KAAK0P,MAAMxO,QAEblB,KAAK2P,gBAGP,KAAAC,iBAAmB,KACjB5P,KAAK6P,gBACL7P,KAAKR,MAAM2C,cAASI,IAGtB,KAAAoN,aAAe,KACb3P,KAAKC,SAAS,CACZ6P,aAAc9P,KAAKR,MAAMM,OAASE,KAAKR,MAAMsQ,cAAgB,IAAIC,KACjEC,iBAAazN,EACb0N,MAAM,KAIV,KAAAJ,cAAgB,KACd7P,KAAKC,SAAS,CAAEgQ,MAAM,KAGxB,KAAAC,eAAiB,CAACC,EAAWC,KACtBA,EAAU5N,WACbxC,KAAK6P,gBACL7P,KAAKR,MAAM2C,SAASgO,KAIxB,KAAAE,oBAAsB,CAACF,EAAWC,KAChCpQ,KAAKC,SAAS,CAAE+P,YAAaI,EAAU5N,cAAWD,EAAY4N,KAGhE,KAAAG,yBAA2B,EAAGxQ,YAC5BE,KAAKC,SAAUM,IAAD,CAAqBuP,aAAc,EAASvP,EAAMuP,aAAchQ,OAGhF,KAAAyQ,wBAA0B,EAAGzQ,YAC3BE,KAAKC,SAASM,IAAK,CAAOuP,aAAc,EAAQvP,EAAMuP,aAAchQ,OAGtE,KAAA0Q,yBAA2B,KACzBxQ,KAAKC,SAASM,IAAK,CAAOuP,aAAc,EAAUvP,EAAMuP,aAAc,OAGxE,KAAAW,qBAAuB,KACrBzQ,KAAKC,SAASM,IAAK,CAAOuP,aAAc,EAAUvP,EAAMuP,aAAc,OAnDtE9P,KAAKO,MAAQ,CAAEuP,aAActQ,EAAMM,OAASN,EAAMsQ,cAAgB,IAAIC,KAAQE,MAAM,GAsDtF,SACE,MAAM,cAAES,EAAF,YAAiBC,EAAjB,QAA8BC,EAA9B,MAAuC9Q,GAAUE,KAAKR,OACtD,YAAEwQ,GAAgBhQ,KAAKO,MAEvBsQ,EAAQ7Q,KAAKR,MAAMsR,SAAW,IAAIf,KAElCgB,EAAS,IAAM,IACfC,EAAQ,KAAM,IAAIjB,MAAOkB,cAAgB,IAAI,IAAIlB,MAAOkB,cAAgB,GAExEC,EAA2BpR,EAAQ,CAACA,GAAS,GACnD,IAAIsQ,EACJ,MAAMe,EAAqBnB,GAAelQ,EAEtC4Q,GAAiBS,IACnBf,EAAY,CAAEgB,YAAa,CAAEC,KAAMX,EAAe/O,GAAIwP,IACtDD,EAAa9N,KAAKsN,IAEhBC,GAAeQ,IACjBf,EAAY,CAAEgB,YAAa,CAAEC,KAAMF,EAAoBxP,GAAIgP,IAC3DO,EAAa9N,KAAKuN,IAGpB,MAAMW,EAAe,IAAM,GAAG9N,IAAI,kBAC5B+N,EAAgB,IAAM,GAAG/N,IAAI,uBAEnC,OACE,gBAAC,IAAmB,CAACgO,eAAgBxR,KAAK6P,eACxC,wBAAMvO,UAAW,EAAW,qBAAsBtB,KAAKR,MAAM8B,YAC3D,gBAACmQ,EAAY,CACXnQ,UAAW,EAAW,2BAA4BtB,KAAKR,MAAM4K,eAAgB,CAC3E,iBAAkC7H,IAArBvC,KAAKR,MAAMM,QAE1B8B,SAAUC,GAAS7B,KAAK0P,MAAQ7N,EAChChC,KAAMG,KAAKR,MAAMK,KACjB6R,QAAS1R,KAAK2P,aACdrF,YAAatK,KAAKR,MAAM8K,YACxBqH,UAAU,EACVtP,KAAK,OACLvC,MAAOA,IAET,gBAAC,IAAY,CAACwB,UAAU,0BAA0BsQ,KAAK,UACjCrP,IAArBvC,KAAKR,MAAMM,OACV,gBAAC,cAAW,CACVwB,UAAU,uCACVuQ,UAAW,CAAEzJ,KAAM,IACnBtG,QAAS9B,KAAK4P,mBAGjB5P,KAAKO,MAAM0P,MACV,uBAAK3O,UAAU,uBACb,uBAAKA,UAAU,2BACb,gBAAC,aAAU,CAACA,UAAU,eAAeQ,QAAS9B,KAAKwQ,0BACjD,gBAAC,IAAe,OAElB,uBAAKlP,UAAU,6BACb,gBAAC,IAAM,CACLA,UAAU,mCACVa,SAAUnC,KAAKsQ,yBACfvN,QAASgO,EAAOvN,IAAIsO,IAAK,CACvB5J,MAAO,4BAAkB4J,GACzBhS,MAAOgS,KAEThS,MAAOE,KAAKO,MAAMuP,aAAaiC,aAEjC,gBAAC,IAAM,CACLzQ,UAAU,+CACVa,SAAUnC,KAAKuQ,wBACfxN,QAASiO,EAAMxN,IAAIwO,IAAI,CAAO9J,MAAO+J,OAAOD,GAAOlS,MAAOkS,KAC1DlS,MAAOE,KAAKO,MAAMuP,aAAamB,iBAGnC,gBAAC,aAAU,CAAC3P,UAAU,eAAeQ,QAAS9B,KAAKyQ,sBACjD,gBAAC,IAAgB,QAGrB,gBAAChB,EAAS,CACRyC,eAAgB,gBAACC,EAAa,MAC9BC,aAAc,CAAEvB,QAAOwB,OAAQzB,GAC/B0B,eAAgB,EAChBlC,UAAWA,EACX0B,MAAO9R,KAAKO,MAAMuP,aAClByC,cAAe,gBAACJ,EAAa,MAC7BK,WAAYxS,KAAKkQ,eACjBuC,gBAAiBzS,KAAKqQ,oBACtBa,aAAcA,EACdI,aAAcA,EACdC,cAAeA,QAU/B,SAASY,IACP,OAAO,KAST,MAAMV,EAAe,qBAAY,IAA0D,IAA1D,SAAE7P,EAAF,KAAY8Q,EAAZ,MAAkB5S,GAAwC,EAA9B6S,EAA8B,iCACzF,MAAMC,EACJ9S,GAAS4S,EAAKG,WAAW/S,EAAO,CAAEkS,KAAM,UAAWF,MAAO,QAAS3B,IAAK,YAC1E,OAAO,yCAAWwC,EAAK,CAAEG,IAAKlR,EAAU9B,MAAO8S,GAAkB,S,oBC3OnE,IAAInQ,EAAM,EAAQ,KACFC,EAAU,EAAQ,KAIC,iBAFvBA,EAAUA,EAAQC,WAAaD,EAAQE,QAAUF,KAG/CA,EAAU,CAAC,CAACG,EAAOC,EAAIJ,EAAS,MAG9C,IAAIK,EAAU,CAEd,OAAiB,OACjB,WAAoB,GAIhBC,GAFSP,EAAIC,EAASK,GAEXL,EAAQO,OAASP,EAAQO,OAAS,IAIjDJ,EAAOK,QAAUF,G,qBClBjBE,EADkC,EAAQ,IAChCC,EAA4B,IAE9BC,KAAK,CAACP,EAAOC,EAAI,qpDAAspD,KAE/qDD,EAAOK,QAAUA,G,oBCNjB,IAAIT,EAAM,EAAQ,KACFC,EAAU,EAAQ,KAIC,iBAFvBA,EAAUA,EAAQC,WAAaD,EAAQE,QAAUF,KAG/CA,EAAU,CAAC,CAACG,EAAOC,EAAIJ,EAAS,MAG9C,IAAIK,EAAU,CAEd,OAAiB,OACjB,WAAoB,GAIhBC,GAFSP,EAAIC,EAASK,GAEXL,EAAQO,OAASP,EAAQO,OAAS,IAIjDJ,EAAOK,QAAUF,G,qBClBjBE,EADkC,EAAQ,IAChCC,EAA4B,IAE9BC,KAAK,CAACP,EAAOC,EAAI,q0BAAs0B,KAE/1BD,EAAOK,QAAUA,G,iCCNjB,0HAyBO,SAAS6P,EACdzS,GAEA,OAAO,kBAAQ,4BAA6BA,GAAM+M,MAAM,KAGnD,SAAS2F,IACd,OAAO,kBAAQ,+BAA+B3F,MAAM,KAG/C,SAAS4F,IACd,OAAO,kBAAQ,4BAA4B5F,MAAM,O,iCCjBnD,IAAkB6F,EAnBlB,kCAmBA,SAAkBA,GAChB,sGACA,yDACA,2CACA,iDAJF,CAAkBA,MAAW,M,iCCnB7B,gFA8Be,SAAS7M,GAAsB,UAC5C/E,EAD4C,UAE5C4E,EAF4C,WAG5C/F,IAEA,MAAmB,YAAfA,EACK,KAIP,gBAAC,IAAO,CAACgG,QAAS,oBAAU,aAAchG,EAAY,cAAe+F,IACnE,uBAAK5E,UAAW,EAAW,QAASA,IAAa,oBAAU,aAAcnB,O,iCCzC/E,gFAgCe,MAAMgT,UAA2B,gBAC9C,SACE,OACE,uBAAK7R,UAAW,EAAWtB,KAAKR,MAAM8B,YACnC,CAAC,SAAU,WAAWkC,IAAIrD,GACzB,gBAAC,IAAK,CACJmB,UAAS,uCAAkCnB,GAC3CM,IAAKN,EACLL,MAAOK,EACPsD,QAASzD,KAAKR,MAAMW,aAAeA,EACnCuD,QAAS1D,KAAKR,MAAM2C,SACpBK,SAAyB,YAAfrC,IAA6BH,KAAKR,MAAM8C,kBAClD,2BACG,oBAAU,aAAcnC,GACxBH,KAAKR,MAAM4T,aACV,qBAAG9R,UAAU,QAAQ,oBAAU,aAAcnB,EAAY,4B,iCC/CzE,0KA2Ce,MAAM2F,UAAsB,gBAA3C,c,oBACE,KAAApG,SAAU,EACV,KAAAa,MAAe,CAAEuG,MAAM,EAAOpG,SAAS,GAWvC,KAAA2S,yBAA2B,KACzB,cAAyB1S,KACvB,EAAGqH,0BACGhI,KAAKN,SACPM,KAAKC,SAAS,CAAES,SAAS,EAAOsH,yBAGpC,KACMhI,KAAKN,SACPM,KAAKC,SAAS,CAAES,SAAS,OAMjC,KAAA4S,aAAe,IACTtT,KAAKO,MAAM0G,mBACN,YAAuB,CAC5B1C,WAAYvE,KAAKR,MAAMgB,QAAQC,IAC/B6G,WAAYtH,KAAKO,MAAM0G,qBACtBtG,KAAK,KACFX,KAAKN,UACHM,KAAKR,MAAM+T,SACbvT,KAAKR,MAAM+T,UAEbvT,KAAKC,SAAS,CAAE6G,MAAM,OAInB5C,QAAQsP,YAAOjR,GAI1B,KAAAoF,+BAAiC,EAAG7H,YAClCE,KAAKC,SAAS,CAAEgH,mBAAoBnH,KA3CtC,oBACEE,KAAKN,SAAU,EACfM,KAAKqT,2BAGP,uBACErT,KAAKN,SAAU,EAwCjB,SACE,MAAMgF,EAAS,kCACb,sCACA1E,KAAKR,MAAMgB,QAAQX,MAGrB,OACE,gBAAC,IAAW,CACV6E,OAAQA,EACRrD,QAASrB,KAAKR,MAAM6B,QACpBU,SAAU/B,KAAKsT,aACflL,KAAK,SACJ,EAAGqL,eAAcC,eAAc3M,gBAC9B,wBAAMtF,GAAG,0CAA0CM,SAAU2R,GAC3D,0BAAQpS,UAAU,cAChB,0BAAKoD,IAGP,uBAAKpD,UAAU,cACZtB,KAAKO,MAAMuG,MACV,gBAAC,QAAK,CAACvF,QAAQ,WAAW,oBAAU,yCAGrCvB,KAAKO,MAAMG,SAAW,qBAAGY,UAAU,aAElCtB,KAAKO,MAAMuG,OAAS9G,KAAKO,MAAMG,SAC/B,gCACE,gBAAC,IAA0B,CAACY,UAAU,gBACtC,uBAAKA,UAAU,eACb,yBAAOU,QAAQ,gCACZ,oBAAU,YACX,gBAAC,IAAoB,OAEtBhC,KAAKO,MAAMyH,qBACV,gBAAC,IAAM,CACLD,WAAW,EACXtG,GAAG,+BACHU,SAAUnC,KAAK2H,+BACf5E,QAAS/C,KAAKO,MAAMyH,oBAAoBxE,IAAIyD,IAAkB,CAC5DiB,MAAOjB,EAAmBpH,KAC1BC,MAAOmH,EAAmBxF,MAE5B3B,MAAOE,KAAKO,MAAM0G,wBAQ9B,0BAAQ3F,UAAU,cAChB,gBAAC,IAAe,CAACA,UAAU,eAAeZ,QAASqG,KACjD/G,KAAKO,MAAMuG,MACX,gBAAC,eAAY,CAACtE,SAAUuE,IAAe/G,KAAKO,MAAM0G,oBAC/C,oBAAU,UAGf,gBAAC,kBAAe,CAACnF,QAAS2R,GACvB,oBAAUzT,KAAKO,MAAMuG,KAAO,QAAU","file":"js/303.m.5f943357.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { Link } from 'react-router';\nimport { ResetButtonLink, SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport MandatoryFieldMarker from 'sonar-ui-common/components/ui/MandatoryFieldMarker';\nimport MandatoryFieldsExplanation from 'sonar-ui-common/components/ui/MandatoryFieldsExplanation';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { createProject } from '../../api/components';\nimport VisibilitySelector from '../../components/common/VisibilitySelector';\nimport { getProjectUrl } from '../../helpers/urls';\n\ninterface Props {\n  defaultProjectVisibility?: T.Visibility;\n  onClose: () => void;\n  onProjectCreated: () => void;\n}\n\ninterface State {\n  createdProject?: { key: string; name: string };\n  key: string;\n  loading: boolean;\n  name: string;\n  visibility?: T.Visibility;\n  // add index declaration to be able to do `this.setState({ [name]: value });`\n  [x: string]: any;\n}\n\nexport default class CreateProjectForm extends React.PureComponent<Props, State> {\n  closeButton?: HTMLElement | null;\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      key: '',\n      loading: false,\n      name: '',\n      visibility: props.defaultProjectVisibility\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentDidUpdate() {\n    // wrap with `setImmediate` because of https://github.com/reactjs/react-modal/issues/338\n    setImmediate(() => {\n      if (this.closeButton) {\n        this.closeButton.focus();\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleInputChange = (event: React.SyntheticEvent<HTMLInputElement>) => {\n    const { name, value } = event.currentTarget;\n    this.setState({ [name]: value });\n  };\n\n  handleVisibilityChange = (visibility: T.Visibility) => {\n    this.setState({ visibility });\n  };\n\n  handleFormSubmit = (event: React.SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n\n    const data = {\n      name: this.state.name,\n      project: this.state.key,\n      visibility: this.state.visibility\n    };\n\n    this.setState({ loading: true });\n    createProject(data).then(\n      response => {\n        if (this.mounted) {\n          this.setState({ createdProject: response.project, loading: false });\n          this.props.onProjectCreated();\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  render() {\n    const { defaultProjectVisibility } = this.props;\n    const { createdProject } = this.state;\n\n    return (\n      <Modal contentLabel=\"modal form\" onRequestClose={this.props.onClose}>\n        {createdProject ? (\n          <div>\n            <header className=\"modal-head\">\n              <h2>{translate('qualifiers.create.TRK')}</h2>\n            </header>\n\n            <div className=\"modal-body\">\n              <Alert variant=\"success\">\n                <FormattedMessage\n                  defaultMessage={translate(\n                    'projects_management.project_has_been_successfully_created'\n                  )}\n                  id=\"projects_management.project_has_been_successfully_created\"\n                  values={{\n                    project: (\n                      <Link to={getProjectUrl(createdProject.key)}>{createdProject.name}</Link>\n                    )\n                  }}\n                />\n              </Alert>\n            </div>\n\n            <footer className=\"modal-foot\">\n              <ResetButtonLink\n                id=\"create-project-close\"\n                innerRef={node => (this.closeButton = node)}\n                onClick={this.props.onClose}>\n                {translate('close')}\n              </ResetButtonLink>\n            </footer>\n          </div>\n        ) : (\n          <form id=\"create-project-form\" onSubmit={this.handleFormSubmit}>\n            <header className=\"modal-head\">\n              <h2>{translate('qualifiers.create.TRK')}</h2>\n            </header>\n\n            <div className=\"modal-body\">\n              <MandatoryFieldsExplanation className=\"modal-field\" />\n              <div className=\"modal-field\">\n                <label htmlFor=\"create-project-name\">\n                  {translate('name')}\n                  <MandatoryFieldMarker />\n                </label>\n                <input\n                  autoFocus={true}\n                  id=\"create-project-name\"\n                  maxLength={2000}\n                  name=\"name\"\n                  onChange={this.handleInputChange}\n                  required={true}\n                  type=\"text\"\n                  value={this.state.name}\n                />\n              </div>\n              <div className=\"modal-field\">\n                <label htmlFor=\"create-project-key\">\n                  {translate('key')}\n                  <MandatoryFieldMarker />\n                </label>\n                <input\n                  id=\"create-project-key\"\n                  maxLength={400}\n                  name=\"key\"\n                  onChange={this.handleInputChange}\n                  required={true}\n                  type=\"text\"\n                  value={this.state.key}\n                />\n              </div>\n              <div className=\"modal-field\">\n                <label>{translate('visibility')}</label>\n                <VisibilitySelector\n                  canTurnToPrivate={defaultProjectVisibility !== undefined}\n                  className=\"little-spacer-top\"\n                  onChange={this.handleVisibilityChange}\n                  visibility={this.state.visibility}\n                />\n              </div>\n            </div>\n\n            <footer className=\"modal-foot\">\n              {this.state.loading && <i className=\"spinner spacer-right\" />}\n              <SubmitButton disabled={this.state.loading} id=\"create-project-submit\">\n                {translate('create')}\n              </SubmitButton>\n              <ResetButtonLink id=\"create-project-cancel\" onClick={this.props.onClose}>\n                {translate('cancel')}\n              </ResetButtonLink>\n            </footer>\n          </form>\n        )}\n      </Modal>\n    );\n  }\n}\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./ProjectRow.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".project-row-text-cell{max-width:20em}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button, ResetButtonLink } from 'sonar-ui-common/components/controls/buttons';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport Radio from 'sonar-ui-common/components/controls/Radio';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\nexport interface Props {\n  defaultVisibility: T.Visibility;\n  onClose: () => void;\n  onConfirm: (visiblity: T.Visibility) => void;\n}\n\ninterface State {\n  visibility: T.Visibility;\n}\n\nexport default class ChangeDefaultVisibilityForm extends React.PureComponent<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = { visibility: props.defaultVisibility };\n  }\n\n  handleConfirmClick = () => {\n    this.props.onConfirm(this.state.visibility);\n    this.props.onClose();\n  };\n\n  handleVisibilityChange = (visibility: T.Visibility) => {\n    this.setState({ visibility });\n  };\n\n  render() {\n    return (\n      <Modal contentLabel=\"modal form\" onRequestClose={this.props.onClose}>\n        <header className=\"modal-head\">\n          <h2>{translate('settings.projects.change_visibility_form.header')}</h2>\n        </header>\n\n        <div className=\"modal-body\">\n          {['public', 'private'].map(visibility => (\n            <div className=\"big-spacer-bottom\" key={visibility}>\n              <Radio\n                value={visibility}\n                checked={this.state.visibility === visibility}\n                onCheck={this.handleVisibilityChange}>\n                <div>\n                  {translate('visibility', visibility)}\n                  <p className=\"text-muted spacer-top\">\n                    {translate('visibility', visibility, 'description.short')}\n                  </p>\n                </div>\n              </Radio>\n            </div>\n          ))}\n\n          <Alert variant=\"warning\">\n            {translate('settings.projects.change_visibility_form.warning')}\n          </Alert>\n        </div>\n\n        <footer className=\"modal-foot\">\n          <Button className=\"js-confirm\" onClick={this.handleConfirmClick}>\n            {translate('settings.projects.change_visibility_form.submit')}\n          </Button>\n          <ResetButtonLink className=\"js-modal-close\" onClick={this.props.onClose}>\n            {translate('cancel')}\n          </ResetButtonLink>\n        </footer>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button, EditButton } from 'sonar-ui-common/components/controls/buttons';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport ChangeDefaultVisibilityForm from './ChangeDefaultVisibilityForm';\n\nexport interface Props {\n  defaultProjectVisibility?: T.Visibility;\n  hasProvisionPermission?: boolean;\n  onProjectCreate: () => void;\n  onChangeDefaultProjectVisibility: (visibility: T.Visibility) => void;\n}\n\ninterface State {\n  visibilityForm: boolean;\n}\n\nexport default class Header extends React.PureComponent<Props, State> {\n  state: State = { visibilityForm: false };\n\n  handleChangeVisibilityClick = () => {\n    this.setState({ visibilityForm: true });\n  };\n\n  closeVisiblityForm = () => {\n    this.setState({ visibilityForm: false });\n  };\n\n  render() {\n    const { defaultProjectVisibility, hasProvisionPermission } = this.props;\n    const { visibilityForm } = this.state;\n\n    return (\n      <header className=\"page-header\">\n        <h1 className=\"page-title\">{translate('projects_management')}</h1>\n\n        <div className=\"page-actions\">\n          <span className=\"big-spacer-right\">\n            <span className=\"text-middle\">\n              {translate('settings.projects.default_visibility_of_new_projects')}{' '}\n              <strong>\n                {defaultProjectVisibility ? translate('visibility', defaultProjectVisibility) : 'â€”'}\n              </strong>\n            </span>\n            <EditButton\n              className=\"js-change-visibility spacer-left button-small\"\n              onClick={this.handleChangeVisibilityClick}\n            />\n          </span>\n\n          {hasProvisionPermission && (\n            <Button id=\"create-project\" onClick={this.props.onProjectCreate}>\n              {translate('qualifiers.create.TRK')}\n            </Button>\n          )}\n        </div>\n\n        <p className=\"page-description\">{translate('projects_management.page.description')}</p>\n\n        {visibilityForm && (\n          <ChangeDefaultVisibilityForm\n            defaultVisibility={defaultProjectVisibility || 'public'}\n            onClose={this.closeVisiblityForm}\n            onConfirm={this.props.onChangeDefaultProjectVisibility}\n          />\n        )}\n      </header>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { ResetButtonLink, SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { Project } from '../../api/components';\nimport { grantPermissionToUser } from '../../api/permissions';\n\ninterface Props {\n  currentUser: Pick<T.LoggedInUser, 'login'>;\n  onClose: () => void;\n  onRestoreAccess: () => void;\n  project: Project;\n}\n\ninterface State {\n  loading: boolean;\n}\n\nexport default class RestoreAccessModal extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleFormSubmit = (event: React.SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    this.setState({ loading: true });\n    Promise.all([this.grantPermission('user'), this.grantPermission('admin')]).then(\n      this.props.onRestoreAccess,\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  grantPermission = (permission: string) =>\n    grantPermissionToUser({\n      projectKey: this.props.project.key,\n      login: this.props.currentUser.login,\n      permission\n    });\n\n  render() {\n    const header = translate('global_permissions.restore_access');\n\n    return (\n      <Modal contentLabel={header} onRequestClose={this.props.onClose}>\n        <form onSubmit={this.handleFormSubmit}>\n          <header className=\"modal-head\">\n            <h2>{header}</h2>\n          </header>\n\n          <div className=\"modal-body\">\n            <FormattedMessage\n              defaultMessage={translate('global_permissions.restore_access.message')}\n              id=\"global_permissions.restore_access.message\"\n              values={{\n                browse: <strong>{translate('projects_role.user')}</strong>,\n                administer: <strong>{translate('projects_role.admin')}</strong>\n              }}\n            />\n          </div>\n\n          <footer className=\"modal-foot\">\n            {this.state.loading && <i className=\"spinner spacer-right\" />}\n            <SubmitButton disabled={this.state.loading}>{translate('restore')}</SubmitButton>\n            <ResetButtonLink onClick={this.props.onClose}>{translate('cancel')}</ResetButtonLink>\n          </footer>\n        </form>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ActionsDropdown, {\n  ActionsDropdownItem\n} from 'sonar-ui-common/components/controls/ActionsDropdown';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { Project } from '../../api/components';\nimport { getComponentNavigation } from '../../api/nav';\nimport { getComponentPermissionsUrl } from '../../helpers/urls';\nimport ApplyTemplate from '../permissions/project/components/ApplyTemplate';\nimport RestoreAccessModal from './RestoreAccessModal';\n\nexport interface Props {\n  currentUser: Pick<T.LoggedInUser, 'login'>;\n  project: Project;\n}\n\ninterface State {\n  applyTemplateModal: boolean;\n  hasAccess?: boolean;\n  loading: boolean;\n  restoreAccessModal: boolean;\n}\n\nexport default class ProjectRowActions extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { applyTemplateModal: false, loading: false, restoreAccessModal: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchPermissions = () => {\n    this.setState({ loading: true });\n    getComponentNavigation({ component: this.props.project.key }).then(\n      ({ configuration }) => {\n        if (this.mounted) {\n          const hasAccess = Boolean(\n            configuration && configuration.showPermissions && configuration.canBrowseProject\n          );\n          this.setState({ hasAccess, loading: false });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  handleDropdownOpen = () => {\n    if (this.state.hasAccess === undefined && !this.state.loading) {\n      this.fetchPermissions();\n    }\n  };\n\n  handleApplyTemplateClick = () => {\n    this.setState({ applyTemplateModal: true });\n  };\n\n  handleApplyTemplateClose = () => {\n    if (this.mounted) {\n      this.setState({ applyTemplateModal: false });\n    }\n  };\n\n  handleRestoreAccessClick = () => {\n    this.setState({ restoreAccessModal: true });\n  };\n\n  handleRestoreAccessClose = () => this.setState({ restoreAccessModal: false });\n\n  handleRestoreAccessDone = () => {\n    this.setState({ hasAccess: true, restoreAccessModal: false });\n  };\n\n  render() {\n    const { hasAccess, loading } = this.state;\n\n    return (\n      <>\n        <ActionsDropdown onOpen={this.handleDropdownOpen}>\n          {loading ? (\n            <ActionsDropdownItem>\n              <DeferredSpinner />\n            </ActionsDropdownItem>\n          ) : (\n            <>\n              {hasAccess === true && (\n                <ActionsDropdownItem\n                  className=\"js-edit-permissions\"\n                  to={getComponentPermissionsUrl(this.props.project.key)}>\n                  {translate('edit_permissions')}\n                </ActionsDropdownItem>\n              )}\n\n              {hasAccess === false && (\n                <ActionsDropdownItem\n                  className=\"js-restore-access\"\n                  onClick={this.handleRestoreAccessClick}>\n                  {translate('global_permissions.restore_access')}\n                </ActionsDropdownItem>\n              )}\n            </>\n          )}\n\n          <ActionsDropdownItem\n            className=\"js-apply-template\"\n            onClick={this.handleApplyTemplateClick}>\n            {translate('projects_role.apply_template')}\n          </ActionsDropdownItem>\n        </ActionsDropdown>\n\n        {this.state.restoreAccessModal && (\n          <RestoreAccessModal\n            currentUser={this.props.currentUser}\n            onClose={this.handleRestoreAccessClose}\n            onRestoreAccess={this.handleRestoreAccessDone}\n            project={this.props.project}\n          />\n        )}\n\n        {this.state.applyTemplateModal && (\n          <ApplyTemplate onClose={this.handleApplyTemplateClose} project={this.props.project} />\n        )}\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport Checkbox from 'sonar-ui-common/components/controls/Checkbox';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport QualifierIcon from 'sonar-ui-common/components/icons/QualifierIcon';\nimport DateFormatter from 'sonar-ui-common/components/intl/DateFormatter';\nimport { Project } from '../../api/components';\nimport PrivacyBadgeContainer from '../../components/common/PrivacyBadgeContainer';\nimport { getComponentOverviewUrl } from '../../helpers/urls';\nimport './ProjectRow.css';\nimport ProjectRowActions from './ProjectRowActions';\n\ninterface Props {\n  currentUser: Pick<T.LoggedInUser, 'login'>;\n  onProjectCheck: (project: Project, checked: boolean) => void;\n  project: Project;\n  selected: boolean;\n}\n\nexport default class ProjectRow extends React.PureComponent<Props> {\n  handleProjectCheck = (checked: boolean) => {\n    this.props.onProjectCheck(this.props.project, checked);\n  };\n\n  render() {\n    const { project, selected } = this.props;\n\n    return (\n      <tr data-project-key={project.key}>\n        <td className=\"thin\">\n          <Checkbox checked={selected} onCheck={this.handleProjectCheck} />\n        </td>\n\n        <td className=\"nowrap hide-overflow project-row-text-cell\">\n          <Link\n            className=\"link-with-icon\"\n            to={getComponentOverviewUrl(project.key, project.qualifier)}>\n            <QualifierIcon className=\"little-spacer-right\" qualifier={project.qualifier} />\n\n            <Tooltip overlay={project.name} placement=\"left\">\n              <span>{project.name}</span>\n            </Tooltip>\n          </Link>\n        </td>\n\n        <td className=\"thin nowrap\">\n          <PrivacyBadgeContainer qualifier={project.qualifier} visibility={project.visibility} />\n        </td>\n\n        <td className=\"nowrap hide-overflow project-row-text-cell\">\n          <Tooltip overlay={project.key} placement=\"left\">\n            <span className=\"note\">{project.key}</span>\n          </Tooltip>\n        </td>\n\n        <td className=\"thin nowrap text-right\">\n          {project.lastAnalysisDate ? (\n            <DateFormatter date={project.lastAnalysisDate} />\n          ) : (\n            <span className=\"note\">â€”</span>\n          )}\n        </td>\n\n        <td className=\"thin nowrap\">\n          <ProjectRowActions currentUser={this.props.currentUser} project={project} />\n        </td>\n      </tr>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { Project } from '../../api/components';\nimport ProjectRow from './ProjectRow';\n\ninterface Props {\n  currentUser: Pick<T.LoggedInUser, 'login'>;\n  onProjectDeselected: (project: string) => void;\n  onProjectSelected: (project: string) => void;\n  projects: Project[];\n  ready?: boolean;\n  selection: string[];\n}\n\nexport default class Projects extends React.PureComponent<Props> {\n  onProjectCheck = (project: Project, checked: boolean) => {\n    if (checked) {\n      this.props.onProjectSelected(project.key);\n    } else {\n      this.props.onProjectDeselected(project.key);\n    }\n  };\n\n  render() {\n    return (\n      <div className=\"boxed-group boxed-group-inner\">\n        <table\n          className={classNames('data', 'zebra', { 'new-loading': !this.props.ready })}\n          id=\"projects-management-page-projects\">\n          <thead>\n            <tr>\n              <th />\n              <th>{translate('name')}</th>\n              <th />\n              <th>{translate('key')}</th>\n              <th className=\"thin nowrap text-right\">{translate('last_analysis')}</th>\n              <th />\n            </tr>\n          </thead>\n          <tbody>\n            {this.props.projects.map(project => (\n              <ProjectRow\n                currentUser={this.props.currentUser}\n                key={project.key}\n                onProjectCheck={this.onProjectCheck}\n                project={project}\n                selected={this.props.selection.includes(project.key)}\n              />\n            ))}\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ResetButtonLink, SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport Select from 'sonar-ui-common/components/controls/Select';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport MandatoryFieldMarker from 'sonar-ui-common/components/ui/MandatoryFieldMarker';\nimport MandatoryFieldsExplanation from 'sonar-ui-common/components/ui/MandatoryFieldsExplanation';\nimport { toNotSoISOString } from 'sonar-ui-common/helpers/dates';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { bulkApplyTemplate, getPermissionTemplates } from '../../api/permissions';\n\nexport interface Props {\n  analyzedBefore: Date | undefined;\n  onClose: () => void;\n  provisioned: boolean;\n  qualifier: string;\n  query: string;\n  selection: string[];\n  total: number;\n}\n\ninterface State {\n  done: boolean;\n  loading: boolean;\n  permissionTemplate?: string;\n  permissionTemplates?: T.PermissionTemplate[];\n  submitting: boolean;\n}\n\nexport default class BulkApplyTemplateModal extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { done: false, loading: true, submitting: false };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.loadPermissionTemplates();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadPermissionTemplates() {\n    this.setState({ loading: true });\n    getPermissionTemplates().then(\n      ({ permissionTemplates }) => {\n        if (this.mounted) {\n          this.setState({\n            loading: false,\n            permissionTemplate:\n              permissionTemplates.length > 0 ? permissionTemplates[0].id : undefined,\n            permissionTemplates\n          });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  }\n\n  handleConfirmClick = () => {\n    const { analyzedBefore } = this.props;\n    const { permissionTemplate } = this.state;\n    if (permissionTemplate) {\n      this.setState({ submitting: true });\n      const parameters = this.props.selection.length\n        ? {\n            projects: this.props.selection.join(),\n            qualifiers: this.props.qualifier,\n            templateId: permissionTemplate\n          }\n        : {\n            analyzedBefore: analyzedBefore && toNotSoISOString(analyzedBefore),\n            onProvisionedOnly: this.props.provisioned || undefined,\n            qualifiers: this.props.qualifier,\n            q: this.props.query || undefined,\n            templateId: permissionTemplate\n          };\n      bulkApplyTemplate(parameters).then(\n        () => {\n          if (this.mounted) {\n            this.setState({ done: true, submitting: false });\n          }\n        },\n        () => {\n          if (this.mounted) {\n            this.setState({ submitting: false });\n          }\n        }\n      );\n    }\n  };\n\n  handlePermissionTemplateChange = ({ value }: { value: string }) => {\n    this.setState({ permissionTemplate: value });\n  };\n\n  renderWarning = () => (\n    <Alert variant=\"warning\">\n      {this.props.selection.length\n        ? translateWithParameters(\n            'permission_templates.bulk_apply_permission_template.apply_to_selected',\n            this.props.selection.length\n          )\n        : translateWithParameters(\n            'permission_templates.bulk_apply_permission_template.apply_to_all',\n            this.props.total\n          )}\n    </Alert>\n  );\n\n  renderSelect = () => (\n    <div className=\"modal-field\">\n      <label>\n        {translate('template')}\n        <MandatoryFieldMarker />\n      </label>\n      <Select\n        clearable={false}\n        disabled={this.state.submitting}\n        onChange={this.handlePermissionTemplateChange}\n        options={this.state.permissionTemplates!.map(t => ({ label: t.name, value: t.id }))}\n        value={this.state.permissionTemplate}\n      />\n    </div>\n  );\n\n  render() {\n    const { done, loading, permissionTemplates, submitting } = this.state;\n    const header = translate('permission_templates.bulk_apply_permission_template');\n\n    return (\n      <Modal contentLabel={header} onRequestClose={this.props.onClose} size=\"small\">\n        <header className=\"modal-head\">\n          <h2>{header}</h2>\n        </header>\n\n        <div className=\"modal-body\">\n          {done && (\n            <Alert variant=\"success\">{translate('projects_role.apply_template.success')}</Alert>\n          )}\n\n          {loading && <i className=\"spinner\" />}\n\n          {!loading && !done && permissionTemplates && (\n            <>\n              <MandatoryFieldsExplanation className=\"spacer-bottom\" />\n              {this.renderWarning()}\n              {this.renderSelect()}\n            </>\n          )}\n        </div>\n\n        <footer className=\"modal-foot\">\n          {submitting && <i className=\"spinner spacer-right\" />}\n          {!loading && !done && permissionTemplates && (\n            <SubmitButton disabled={submitting} onClick={this.handleConfirmClick}>\n              {translate('apply')}\n            </SubmitButton>\n          )}\n          <ResetButtonLink onClick={this.props.onClose}>\n            {done ? translate('close') : translate('cancel')}\n          </ResetButtonLink>\n        </footer>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ResetButtonLink, SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport Modal from 'sonar-ui-common/components/controls/Modal';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport { toNotSoISOString } from 'sonar-ui-common/helpers/dates';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { bulkDeleteProjects } from '../../api/components';\n\nexport interface Props {\n  analyzedBefore: Date | undefined;\n  onClose: () => void;\n  onConfirm: () => void;\n  provisioned: boolean;\n  qualifier: string;\n  query: string;\n  selection: string[];\n  total: number;\n}\n\ninterface State {\n  loading: boolean;\n}\n\nexport default class DeleteModal extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleConfirmClick = () => {\n    this.setState({ loading: true });\n    const { analyzedBefore } = this.props;\n    const parameters = this.props.selection.length\n      ? {\n          projects: this.props.selection.join()\n        }\n      : {\n          analyzedBefore: analyzedBefore && toNotSoISOString(analyzedBefore),\n          onProvisionedOnly: this.props.provisioned || undefined,\n          qualifiers: this.props.qualifier,\n          q: this.props.query || undefined\n        };\n    bulkDeleteProjects(parameters).then(\n      () => {\n        if (this.mounted) {\n          this.props.onConfirm();\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  renderWarning = () => (\n    <Alert variant=\"warning\">\n      {this.props.selection.length\n        ? translateWithParameters(\n            'projects_management.delete_selected_warning',\n            this.props.selection.length\n          )\n        : translateWithParameters('projects_management.delete_all_warning', this.props.total)}\n    </Alert>\n  );\n\n  render() {\n    const header = translate('qualifiers.delete', this.props.qualifier);\n\n    return (\n      <Modal contentLabel={header} onRequestClose={this.props.onClose}>\n        <header className=\"modal-head\">\n          <h2>{header}</h2>\n        </header>\n\n        <div className=\"modal-body\">\n          {this.renderWarning()}\n          {translate('qualifiers.delete_confirm', this.props.qualifier)}\n        </div>\n\n        <footer className=\"modal-foot\">\n          {this.state.loading && <i className=\"spinner spacer-right\" />}\n          <SubmitButton\n            className=\"button-red\"\n            disabled={this.state.loading}\n            onClick={this.handleConfirmClick}>\n            {translate('delete')}\n          </SubmitButton>\n          <ResetButtonLink onClick={this.props.onClose}>{translate('cancel')}</ResetButtonLink>\n        </footer>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { sortBy } from 'lodash';\nimport * as React from 'react';\nimport { Button } from 'sonar-ui-common/components/controls/buttons';\nimport Checkbox from 'sonar-ui-common/components/controls/Checkbox';\nimport HelpTooltip from 'sonar-ui-common/components/controls/HelpTooltip';\nimport SearchBox from 'sonar-ui-common/components/controls/SearchBox';\nimport Select from 'sonar-ui-common/components/controls/Select';\nimport QualifierIcon from 'sonar-ui-common/components/icons/QualifierIcon';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { Project } from '../../api/components';\nimport DateInput from '../../components/controls/DateInput';\nimport BulkApplyTemplateModal from './BulkApplyTemplateModal';\nimport DeleteModal from './DeleteModal';\n\nexport interface Props {\n  analyzedBefore: Date | undefined;\n  onAllDeselected: () => void;\n  onAllSelected: () => void;\n  onDateChanged: (analyzedBefore: Date | undefined) => void;\n  onDeleteProjects: () => void;\n  onProvisionedChanged: (provisioned: boolean) => void;\n  onQualifierChanged: (qualifier: string) => void;\n  onVisibilityChanged: (qualifier: string) => void;\n  onSearch: (query: string) => void;\n  projects: Project[];\n  provisioned: boolean;\n  qualifiers: string;\n  query: string;\n  ready: boolean;\n  selection: any[];\n  topLevelQualifiers: string[];\n  total: number;\n  visibility?: T.Visibility;\n}\n\ninterface State {\n  bulkApplyTemplateModal: boolean;\n  deleteModal: boolean;\n}\n\nconst QUALIFIERS_ORDER = ['TRK', 'VW', 'APP'];\n\nexport default class Search extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { bulkApplyTemplateModal: false, deleteModal: false };\n\n  getQualifierOptions = () => {\n    const options = this.props.topLevelQualifiers.map(q => ({\n      label: translate('qualifiers', q),\n      value: q\n    }));\n    return sortBy(options, option => QUALIFIERS_ORDER.indexOf(option.value));\n  };\n\n  onCheck = (checked: boolean) => {\n    if (checked) {\n      this.props.onAllSelected();\n    } else {\n      this.props.onAllDeselected();\n    }\n  };\n\n  handleDeleteClick = () => {\n    this.setState({ deleteModal: true });\n  };\n\n  closeDeleteModal = () => {\n    this.setState({ deleteModal: false });\n  };\n\n  handleDeleteConfirm = () => {\n    this.closeDeleteModal();\n    this.props.onDeleteProjects();\n  };\n\n  handleBulkApplyTemplateClick = () => {\n    this.setState({ bulkApplyTemplateModal: true });\n  };\n\n  closeBulkApplyTemplateModal = () => {\n    this.setState({ bulkApplyTemplateModal: false });\n  };\n\n  handleQualifierChange = ({ value }: { value: string }) => this.props.onQualifierChanged(value);\n\n  handleVisibilityChange = ({ value }: { value: string }) => this.props.onVisibilityChanged(value);\n\n  renderCheckbox = () => {\n    const isAllChecked =\n      this.props.projects.length > 0 && this.props.selection.length === this.props.projects.length;\n    const thirdState =\n      this.props.projects.length > 0 &&\n      this.props.selection.length > 0 &&\n      this.props.selection.length < this.props.projects.length;\n    const checked = isAllChecked || thirdState;\n    return (\n      <Checkbox\n        checked={checked}\n        id=\"projects-selection\"\n        onCheck={this.onCheck}\n        thirdState={thirdState}\n      />\n    );\n  };\n\n  renderQualifierOption = (option: { label: string; value: string }) => (\n    <span>\n      <QualifierIcon className=\"little-spacer-right\" qualifier={option.value} />\n      {option.label}\n    </span>\n  );\n\n  renderQualifierFilter = () => {\n    const options = this.getQualifierOptions();\n    if (options.length < 2) {\n      return null;\n    }\n    return (\n      <td className=\"thin nowrap text-middle\">\n        <Select\n          className=\"input-medium\"\n          clearable={false}\n          disabled={!this.props.ready}\n          name=\"projects-qualifier\"\n          onChange={this.handleQualifierChange}\n          optionRenderer={this.renderQualifierOption}\n          options={this.getQualifierOptions()}\n          searchable={false}\n          value={this.props.qualifiers}\n          valueRenderer={this.renderQualifierOption}\n        />\n      </td>\n    );\n  };\n\n  renderVisibilityFilter = () => {\n    return (\n      <td className=\"thin nowrap text-middle\">\n        <Select\n          className=\"input-small\"\n          clearable={false}\n          disabled={!this.props.ready}\n          name=\"projects-visibility\"\n          onChange={this.handleVisibilityChange}\n          options={[\n            { value: 'all', label: translate('visibility.both') },\n            { value: 'public', label: translate('visibility.public') },\n            { value: 'private', label: translate('visibility.private') }\n          ]}\n          searchable={false}\n          value={this.props.visibility || 'all'}\n        />\n      </td>\n    );\n  };\n\n  renderTypeFilter = () =>\n    this.props.qualifiers === 'TRK' ? (\n      <td className=\"thin nowrap text-middle\">\n        <Checkbox\n          checked={this.props.provisioned}\n          className=\"link-checkbox-control\"\n          id=\"projects-provisioned\"\n          onCheck={this.props.onProvisionedChanged}>\n          <span className=\"text-middle little-spacer-left\">\n            {translate('provisioning.only_provisioned')}\n          </span>\n        </Checkbox>\n        <HelpTooltip\n          className=\"spacer-left\"\n          overlay={translate('provisioning.only_provisioned.tooltip')}\n        />\n      </td>\n    ) : null;\n\n  renderDateFilter = () => {\n    return (\n      <td className=\"thin nowrap text-middle\">\n        <DateInput\n          inputClassName=\"input-medium\"\n          name=\"analyzed-before\"\n          onChange={this.props.onDateChanged}\n          placeholder={translate('last_analysis_before')}\n          value={this.props.analyzedBefore}\n        />\n      </td>\n    );\n  };\n\n  render() {\n    return (\n      <div className=\"big-spacer-bottom\">\n        <table className=\"data\">\n          <tbody>\n            <tr>\n              <td className=\"thin text-middle\">\n                {this.props.ready ? this.renderCheckbox() : <i className=\"spinner\" />}\n              </td>\n              {this.renderQualifierFilter()}\n              {this.renderDateFilter()}\n              {this.renderVisibilityFilter()}\n              {this.renderTypeFilter()}\n              <td className=\"text-middle\">\n                <SearchBox\n                  minLength={3}\n                  onChange={this.props.onSearch}\n                  placeholder={translate('search.search_by_name_or_key')}\n                  value={this.props.query}\n                />\n              </td>\n              <td className=\"thin nowrap text-middle\">\n                <Button\n                  className=\"js-bulk-apply-permission-template\"\n                  disabled={this.props.selection.length === 0}\n                  onClick={this.handleBulkApplyTemplateClick}>\n                  {translate('permission_templates.bulk_apply_permission_template')}\n                </Button>\n                {this.props.qualifiers === 'TRK' && (\n                  <Button\n                    className=\"js-delete spacer-left button-red\"\n                    disabled={this.props.selection.length === 0}\n                    onClick={this.handleDeleteClick}\n                    title={\n                      this.props.selection.length === 0\n                        ? translate('permission_templates.select_to_delete')\n                        : translate('permission_templates.delete_selected')\n                    }>\n                    {translate('delete')}\n                  </Button>\n                )}\n              </td>\n            </tr>\n          </tbody>\n        </table>\n\n        {this.state.bulkApplyTemplateModal && (\n          <BulkApplyTemplateModal\n            analyzedBefore={this.props.analyzedBefore}\n            onClose={this.closeBulkApplyTemplateModal}\n            provisioned={this.props.provisioned}\n            qualifier={this.props.qualifiers}\n            query={this.props.query}\n            selection={this.props.selection}\n            total={this.props.total}\n          />\n        )}\n\n        {this.state.deleteModal && (\n          <DeleteModal\n            analyzedBefore={this.props.analyzedBefore}\n            onClose={this.closeDeleteModal}\n            onConfirm={this.handleDeleteConfirm}\n            provisioned={this.props.provisioned}\n            qualifier={this.props.qualifiers}\n            query={this.props.query}\n            selection={this.props.selection}\n            total={this.props.total}\n          />\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { debounce, uniq, without } from 'lodash';\nimport * as React from 'react';\nimport { Helmet } from 'react-helmet-async';\nimport { connect } from 'react-redux';\nimport ListFooter from 'sonar-ui-common/components/controls/ListFooter';\nimport { toShortNotSoISOString } from 'sonar-ui-common/helpers/dates';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { getComponents, Project } from '../../api/components';\nimport { changeProjectDefaultVisibility } from '../../api/permissions';\nimport { getValues } from '../../api/settings';\nimport Suggestions from '../../app/components/embed-docs-modal/Suggestions';\nimport { hasGlobalPermission } from '../../helpers/users';\nimport { getAppState, getCurrentUser, Store } from '../../store/rootReducer';\nimport { Permissions } from '../../types/permissions';\nimport { SettingsKey } from '../../types/settings';\nimport CreateProjectForm from './CreateProjectForm';\nimport Header from './Header';\nimport Projects from './Projects';\nimport Search from './Search';\n\nexport interface Props {\n  currentUser: T.LoggedInUser;\n  appState: Pick<T.AppState, 'qualifiers'>;\n}\n\ninterface State {\n  analyzedBefore?: Date;\n  createProjectForm: boolean;\n  defaultProjectVisibility?: T.Visibility;\n  page: number;\n  projects: Project[];\n  provisioned: boolean;\n  qualifiers: string;\n  query: string;\n  ready: boolean;\n  selection: string[];\n  total: number;\n  visibility?: T.Visibility;\n}\n\nconst PAGE_SIZE = 50;\n\nexport class App extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      createProjectForm: false,\n      ready: false,\n      projects: [],\n      provisioned: false,\n      total: 0,\n      page: 1,\n      query: '',\n      qualifiers: 'TRK',\n      selection: []\n    };\n    this.requestProjects = debounce(this.requestProjects, 250);\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.requestProjects();\n    this.fetchDefaultProjectVisibility();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchDefaultProjectVisibility = async () => {\n    const results = await getValues({ keys: SettingsKey.DefaultProjectVisibility });\n\n    if (this.mounted && results.length > 0 && results[0].value) {\n      this.setState({ defaultProjectVisibility: results[0].value as T.Visibility });\n    }\n  };\n\n  handleDefaultProjectVisibilityChange = async (visibility: T.Visibility) => {\n    await changeProjectDefaultVisibility(visibility);\n\n    if (this.mounted) {\n      this.setState({ defaultProjectVisibility: visibility });\n    }\n  };\n\n  requestProjects = () => {\n    const { analyzedBefore } = this.state;\n    const parameters = {\n      analyzedBefore: analyzedBefore && toShortNotSoISOString(analyzedBefore),\n      onProvisionedOnly: this.state.provisioned || undefined,\n      p: this.state.page !== 1 ? this.state.page : undefined,\n      ps: PAGE_SIZE,\n      q: this.state.query || undefined,\n      qualifiers: this.state.qualifiers,\n      visibility: this.state.visibility\n    };\n    return getComponents(parameters).then(r => {\n      if (this.mounted) {\n        let projects: Project[] = r.components;\n        if (this.state.page > 1) {\n          projects = [...this.state.projects, ...projects];\n        }\n        this.setState({ ready: true, projects, selection: [], total: r.paging.total });\n      }\n    });\n  };\n\n  loadMore = () => {\n    this.setState(({ page }) => ({ ready: false, page: page + 1 }), this.requestProjects);\n  };\n\n  onSearch = (query: string) => {\n    this.setState({ ready: false, page: 1, query, selection: [] }, this.requestProjects);\n  };\n\n  onProvisionedChanged = (provisioned: boolean) => {\n    this.setState(\n      { ready: false, page: 1, query: '', provisioned, qualifiers: 'TRK', selection: [] },\n      this.requestProjects\n    );\n  };\n\n  onQualifierChanged = (newQualifier: string) => {\n    this.setState(\n      {\n        ready: false,\n        page: 1,\n        provisioned: false,\n        query: '',\n        qualifiers: newQualifier,\n        selection: []\n      },\n      this.requestProjects\n    );\n  };\n\n  onVisibilityChanged = (newVisibility: T.Visibility | 'all') => {\n    this.setState(\n      {\n        ready: false,\n        page: 1,\n        provisioned: false,\n        query: '',\n        visibility: newVisibility === 'all' ? undefined : newVisibility,\n        selection: []\n      },\n      this.requestProjects\n    );\n  };\n\n  handleDateChanged = (analyzedBefore: Date | undefined) =>\n    this.setState({ ready: false, page: 1, analyzedBefore }, this.requestProjects);\n\n  onProjectSelected = (project: string) => {\n    this.setState(({ selection }) => ({ selection: uniq([...selection, project]) }));\n  };\n\n  onProjectDeselected = (project: string) => {\n    this.setState(({ selection }) => ({ selection: without(selection, project) }));\n  };\n\n  onAllSelected = () => {\n    this.setState(({ projects }) => ({ selection: projects.map(project => project.key) }));\n  };\n\n  onAllDeselected = () => {\n    this.setState({ selection: [] });\n  };\n\n  openCreateProjectForm = () => {\n    this.setState({ createProjectForm: true });\n  };\n\n  closeCreateProjectForm = () => {\n    this.setState({ createProjectForm: false });\n  };\n\n  render() {\n    const { appState, currentUser } = this.props;\n    const { defaultProjectVisibility } = this.state;\n    return (\n      <div className=\"page page-limited\" id=\"projects-management-page\">\n        <Suggestions suggestions=\"projects_management\" />\n        <Helmet defer={false} title={translate('projects_management')} />\n\n        <Header\n          defaultProjectVisibility={defaultProjectVisibility}\n          hasProvisionPermission={hasGlobalPermission(currentUser, Permissions.ProjectCreation)}\n          onChangeDefaultProjectVisibility={this.handleDefaultProjectVisibilityChange}\n          onProjectCreate={this.openCreateProjectForm}\n        />\n\n        <Search\n          analyzedBefore={this.state.analyzedBefore}\n          onAllDeselected={this.onAllDeselected}\n          onAllSelected={this.onAllSelected}\n          onDateChanged={this.handleDateChanged}\n          onDeleteProjects={this.requestProjects}\n          onProvisionedChanged={this.onProvisionedChanged}\n          onQualifierChanged={this.onQualifierChanged}\n          onSearch={this.onSearch}\n          onVisibilityChanged={this.onVisibilityChanged}\n          projects={this.state.projects}\n          provisioned={this.state.provisioned}\n          qualifiers={this.state.qualifiers}\n          query={this.state.query}\n          ready={this.state.ready}\n          selection={this.state.selection}\n          topLevelQualifiers={appState.qualifiers}\n          total={this.state.total}\n          visibility={this.state.visibility}\n        />\n\n        <Projects\n          currentUser={this.props.currentUser}\n          onProjectDeselected={this.onProjectDeselected}\n          onProjectSelected={this.onProjectSelected}\n          projects={this.state.projects}\n          ready={this.state.ready}\n          selection={this.state.selection}\n        />\n\n        <ListFooter\n          count={this.state.projects.length}\n          loadMore={this.loadMore}\n          ready={this.state.ready}\n          total={this.state.total}\n        />\n\n        {this.state.createProjectForm && (\n          <CreateProjectForm\n            defaultProjectVisibility={defaultProjectVisibility}\n            onClose={this.closeCreateProjectForm}\n            onProjectCreated={this.requestProjects}\n          />\n        )}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state: Store) => ({\n  appState: getAppState(state),\n  currentUser: getCurrentUser(state) as T.LoggedInUser\n});\n\nexport default connect(mapStateToProps)(App);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { SuggestionsContext } from './SuggestionsContext';\n\ninterface Props {\n  suggestions: string;\n}\n\nexport default function Suggestions({ suggestions }: Props) {\n  return (\n    <SuggestionsContext.Consumer>\n      {({ addSuggestions, removeSuggestions }) => (\n        <SuggestionsInner\n          addSuggestions={addSuggestions}\n          removeSuggestions={removeSuggestions}\n          suggestions={suggestions}\n        />\n      )}\n    </SuggestionsContext.Consumer>\n  );\n}\n\ninterface SuggestionsInnerProps {\n  addSuggestions: (key: string) => void;\n  removeSuggestions: (key: string) => void;\n  suggestions: string;\n}\n\nclass SuggestionsInner extends React.PureComponent<SuggestionsInnerProps> {\n  componentDidMount() {\n    this.props.addSuggestions(this.props.suggestions);\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.suggestions !== this.props.suggestions) {\n      this.props.removeSuggestions(this.props.suggestions);\n      this.props.addSuggestions(prevProps.suggestions);\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.removeSuggestions(this.props.suggestions);\n  }\n\n  render() {\n    return null;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { omitBy } from 'lodash';\nimport { getJSON, post, postJSON, RequestData } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { isCategoryDefinition } from '../apps/settings/utils';\nimport { BranchParameters } from '../types/branch-like';\nimport { SettingCategoryDefinition, SettingDefinition, SettingValue } from '../types/settings';\n\nexport function getDefinitions(component?: string): Promise<SettingCategoryDefinition[]> {\n  return getJSON('/api/settings/list_definitions', { component }).then(\n    r => r.definitions,\n    throwGlobalError\n  );\n}\n\nexport function getValues(\n  data: { keys: string; component?: string } & BranchParameters\n): Promise<SettingValue[]> {\n  return getJSON('/api/settings/values', data).then(r => r.settings);\n}\n\nexport function setSettingValue(\n  definition: SettingDefinition,\n  value: any,\n  component?: string\n): Promise<void> {\n  const { key } = definition;\n  const data: RequestData = { key, component };\n\n  if (isCategoryDefinition(definition) && definition.multiValues) {\n    data.values = value;\n  } else if (definition.type === 'PROPERTY_SET') {\n    data.fieldValues = value\n      .map((fields: any) => omitBy(fields, value => value == null))\n      .map(JSON.stringify);\n  } else {\n    data.value = value;\n  }\n\n  return post('/api/settings/set', data);\n}\n\nexport function setSimpleSettingValue(\n  data: { component?: string; value: string; key: string } & BranchParameters\n): Promise<void | Response> {\n  return post('/api/settings/set', data).catch(throwGlobalError);\n}\n\nexport function resetSettingValue(\n  data: { keys: string; component?: string } & BranchParameters\n): Promise<void> {\n  return post('/api/settings/reset', data);\n}\n\nexport function sendTestEmail(to: string, subject: string, message: string): Promise<void> {\n  return post('/api/emails/send', { to, subject, message });\n}\n\nexport function checkSecretKey(): Promise<{ secretKeyAvailable: boolean }> {\n  return getJSON('/api/settings/check_secret_key').catch(throwGlobalError);\n}\n\nexport function generateSecretKey(): Promise<{ secretKey: string }> {\n  return postJSON('/api/settings/generate_secret_key').catch(throwGlobalError);\n}\n\nexport function encryptValue(value: string): Promise<{ encryptedValue: string }> {\n  return postJSON('/api/settings/encrypt', { value }).catch(throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post, postJSON, RequestData } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { BaseSearchProjectsParameters } from './components';\n\nconst PAGE_SIZE = 100;\n\nexport function grantPermissionToUser(data: {\n  projectKey?: string;\n  login: string;\n  permission: string;\n}) {\n  return post('/api/permissions/add_user', data).catch(throwGlobalError);\n}\n\nexport function revokePermissionFromUser(data: {\n  projectKey?: string;\n  login: string;\n  permission: string;\n}) {\n  return post('/api/permissions/remove_user', data).catch(throwGlobalError);\n}\n\nexport function grantPermissionToGroup(data: {\n  projectKey?: string;\n  groupName: string;\n  permission: string;\n}) {\n  return post('/api/permissions/add_group', data).catch(throwGlobalError);\n}\n\nexport function revokePermissionFromGroup(data: {\n  projectKey?: string;\n  groupName: string;\n  permission: string;\n}) {\n  return post('/api/permissions/remove_group', data).catch(throwGlobalError);\n}\n\ninterface GetPermissionTemplatesResponse {\n  permissionTemplates: T.PermissionTemplate[];\n  defaultTemplates: Array<{ templateId: string; qualifier: string }>;\n  permissions: Array<{ key: string; name: string; description: string }>;\n}\n\nexport function getPermissionTemplates(): Promise<GetPermissionTemplatesResponse> {\n  const url = '/api/permissions/search_templates';\n  return getJSON(url);\n}\n\nexport function createPermissionTemplate(data: RequestData) {\n  return postJSON('/api/permissions/create_template', data);\n}\n\nexport function updatePermissionTemplate(data: RequestData): Promise<void> {\n  return post('/api/permissions/update_template', data);\n}\n\nexport function deletePermissionTemplate(data: RequestData) {\n  return post('/api/permissions/delete_template', data).catch(throwGlobalError);\n}\n\n/**\n * Set default permission template for a given qualifier\n */\nexport function setDefaultPermissionTemplate(templateId: string, qualifier: string): Promise<void> {\n  return post('/api/permissions/set_default_template', { templateId, qualifier });\n}\n\nexport function applyTemplateToProject(data: RequestData) {\n  return post('/api/permissions/apply_template', data).catch(throwGlobalError);\n}\n\nexport function bulkApplyTemplate(data: BaseSearchProjectsParameters): Promise<void> {\n  return post('/api/permissions/bulk_apply_template', data);\n}\n\nexport function grantTemplatePermissionToUser(data: {\n  templateId: string;\n  login: string;\n  permission: string;\n}): Promise<void> {\n  return post('/api/permissions/add_user_to_template', data);\n}\n\nexport function revokeTemplatePermissionFromUser(data: {\n  templateId: string;\n  login: string;\n  permission: string;\n}): Promise<void> {\n  return post('/api/permissions/remove_user_from_template', data);\n}\n\nexport function grantTemplatePermissionToGroup(data: RequestData): Promise<void> {\n  return post('/api/permissions/add_group_to_template', data);\n}\n\nexport function revokeTemplatePermissionFromGroup(data: RequestData): Promise<void> {\n  return post('/api/permissions/remove_group_from_template', data);\n}\n\nexport function addProjectCreatorToTemplate(templateId: string, permission: string): Promise<void> {\n  return post('/api/permissions/add_project_creator_to_template', { templateId, permission });\n}\n\nexport function removeProjectCreatorFromTemplate(\n  templateId: string,\n  permission: string\n): Promise<void> {\n  return post('/api/permissions/remove_project_creator_from_template', { templateId, permission });\n}\n\nexport function getPermissionsUsersForComponent(data: {\n  projectKey: string;\n  q?: string;\n  permission?: string;\n  p?: number;\n  ps?: number;\n}): Promise<{ paging: T.Paging; users: T.PermissionUser[] }> {\n  if (!data.ps) {\n    data.ps = PAGE_SIZE;\n  }\n  return getJSON('/api/permissions/users', data).catch(throwGlobalError);\n}\n\nexport function getPermissionsGroupsForComponent(data: {\n  projectKey: string;\n  q?: string;\n  permission?: string;\n  p?: number;\n  ps?: number;\n}): Promise<{ paging: T.Paging; groups: T.PermissionGroup[] }> {\n  if (!data.ps) {\n    data.ps = PAGE_SIZE;\n  }\n  return getJSON('/api/permissions/groups', data).catch(throwGlobalError);\n}\n\nexport function getGlobalPermissionsUsers(data: {\n  q?: string;\n  permission?: string;\n  p?: number;\n  ps?: number;\n}): Promise<{ paging: T.Paging; users: T.PermissionUser[] }> {\n  if (!data.ps) {\n    data.ps = PAGE_SIZE;\n  }\n  return getJSON('/api/permissions/users', data);\n}\n\nexport function getGlobalPermissionsGroups(data: {\n  q?: string;\n  permission?: string;\n  p?: number;\n  ps?: number;\n}): Promise<{ paging: T.Paging; groups: T.PermissionGroup[] }> {\n  if (!data.ps) {\n    data.ps = PAGE_SIZE;\n  }\n  return getJSON('/api/permissions/groups', data);\n}\n\nexport function getPermissionTemplateUsers(\n  templateId: string,\n  query?: string,\n  permission?: string\n): Promise<any> {\n  const data: RequestData = { templateId, ps: PAGE_SIZE };\n  if (query) {\n    data.q = query;\n  }\n  if (permission) {\n    data.permission = permission;\n  }\n  return getJSON('/api/permissions/template_users', data).then(r => r.users);\n}\n\nexport function getPermissionTemplateGroups(\n  templateId: string,\n  query?: string,\n  permission?: string\n): Promise<any> {\n  const data: RequestData = { templateId, ps: PAGE_SIZE };\n  if (query) {\n    data.q = query;\n  }\n  if (permission) {\n    data.permission = permission;\n  }\n  return getJSON('/api/permissions/template_groups', data).then(r => r.groups);\n}\n\nexport function changeProjectVisibility(\n  project: string,\n  visibility: T.Visibility\n): Promise<void | Response> {\n  return post('/api/projects/update_visibility', { project, visibility }).catch(throwGlobalError);\n}\n\nexport function changeProjectDefaultVisibility(\n  projectVisibility: T.Visibility\n): Promise<void | Response> {\n  return post('/api/projects/update_default_visibility', { projectVisibility }).catch(\n    throwGlobalError\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as addMonths from 'date-fns/add_months';\nimport * as setMonth from 'date-fns/set_month';\nimport * as setYear from 'date-fns/set_year';\nimport * as subMonths from 'date-fns/sub_months';\nimport { range } from 'lodash';\nimport * as React from 'react';\nimport { DayModifiers, Modifier, Modifiers } from 'react-day-picker';\nimport { InjectedIntlProps, injectIntl } from 'react-intl';\nimport { ButtonIcon, ClearButton } from 'sonar-ui-common/components/controls/buttons';\nimport OutsideClickHandler from 'sonar-ui-common/components/controls/OutsideClickHandler';\nimport Select from 'sonar-ui-common/components/controls/Select';\nimport CalendarIcon from 'sonar-ui-common/components/icons/CalendarIcon';\nimport ChevronLeftIcon from 'sonar-ui-common/components/icons/ChevronLeftIcon';\nimport ChevronRightIcon from 'sonar-ui-common/components/icons/ChevronRightIcon';\nimport { lazyLoadComponent } from 'sonar-ui-common/components/lazyLoadComponent';\nimport {\n  getShortMonthName,\n  getShortWeekDayName,\n  getWeekDayName\n} from 'sonar-ui-common/helpers/l10n';\nimport './DayPicker.css';\nimport './styles.css';\n\nconst DayPicker = lazyLoadComponent(() => import('react-day-picker'), 'DayPicker');\n\ninterface Props {\n  className?: string;\n  currentMonth?: Date;\n  highlightFrom?: Date;\n  highlightTo?: Date;\n  inputClassName?: string;\n  maxDate?: Date;\n  minDate?: Date;\n  name?: string;\n  onChange: (date: Date | undefined) => void;\n  placeholder: string;\n  value?: Date;\n}\n\ninterface State {\n  currentMonth: Date;\n  open: boolean;\n  lastHovered?: Date;\n}\n\ntype Week = [string, string, string, string, string, string, string];\n\nexport default class DateInput extends React.PureComponent<Props, State> {\n  input?: HTMLInputElement | null;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = { currentMonth: props.value || props.currentMonth || new Date(), open: false };\n  }\n\n  focus = () => {\n    if (this.input) {\n      this.input.focus();\n    }\n    this.openCalendar();\n  };\n\n  handleResetClick = () => {\n    this.closeCalendar();\n    this.props.onChange(undefined);\n  };\n\n  openCalendar = () => {\n    this.setState({\n      currentMonth: this.props.value || this.props.currentMonth || new Date(),\n      lastHovered: undefined,\n      open: true\n    });\n  };\n\n  closeCalendar = () => {\n    this.setState({ open: false });\n  };\n\n  handleDayClick = (day: Date, modifiers: DayModifiers) => {\n    if (!modifiers.disabled) {\n      this.closeCalendar();\n      this.props.onChange(day);\n    }\n  };\n\n  handleDayMouseEnter = (day: Date, modifiers: DayModifiers) => {\n    this.setState({ lastHovered: modifiers.disabled ? undefined : day });\n  };\n\n  handleCurrentMonthChange = ({ value }: { value: number }) => {\n    this.setState((state: State) => ({ currentMonth: setMonth(state.currentMonth, value) }));\n  };\n\n  handleCurrentYearChange = ({ value }: { value: number }) => {\n    this.setState(state => ({ currentMonth: setYear(state.currentMonth, value) }));\n  };\n\n  handlePreviousMonthClick = () => {\n    this.setState(state => ({ currentMonth: subMonths(state.currentMonth, 1) }));\n  };\n\n  handleNextMonthClick = () => {\n    this.setState(state => ({ currentMonth: addMonths(state.currentMonth, 1) }));\n  };\n\n  render() {\n    const { highlightFrom, highlightTo, minDate, value } = this.props;\n    const { lastHovered } = this.state;\n\n    const after = this.props.maxDate || new Date();\n\n    const months = range(12);\n    const years = range(new Date().getFullYear() - 10, new Date().getFullYear() + 1);\n\n    const selectedDays: Modifier[] = value ? [value] : [];\n    let modifiers: Partial<Modifiers> | undefined;\n    const lastHoveredOrValue = lastHovered || value;\n\n    if (highlightFrom && lastHoveredOrValue) {\n      modifiers = { highlighted: { from: highlightFrom, to: lastHoveredOrValue } };\n      selectedDays.push(highlightFrom);\n    }\n    if (highlightTo && lastHoveredOrValue) {\n      modifiers = { highlighted: { from: lastHoveredOrValue, to: highlightTo } };\n      selectedDays.push(highlightTo);\n    }\n\n    const weekdaysLong = range(7).map(getWeekDayName) as Week;\n    const weekdaysShort = range(7).map(getShortWeekDayName) as Week;\n\n    return (\n      <OutsideClickHandler onClickOutside={this.closeCalendar}>\n        <span className={classNames('date-input-control', this.props.className)}>\n          <InputWrapper\n            className={classNames('date-input-control-input', this.props.inputClassName, {\n              'is-filled': this.props.value !== undefined\n            })}\n            innerRef={node => (this.input = node)}\n            name={this.props.name}\n            onFocus={this.openCalendar}\n            placeholder={this.props.placeholder}\n            readOnly={true}\n            type=\"text\"\n            value={value}\n          />\n          <CalendarIcon className=\"date-input-control-icon\" fill=\"\" />\n          {this.props.value !== undefined && (\n            <ClearButton\n              className=\"button-tiny date-input-control-reset\"\n              iconProps={{ size: 12 }}\n              onClick={this.handleResetClick}\n            />\n          )}\n          {this.state.open && (\n            <div className=\"date-input-calendar\">\n              <nav className=\"date-input-calendar-nav\">\n                <ButtonIcon className=\"button-small\" onClick={this.handlePreviousMonthClick}>\n                  <ChevronLeftIcon />\n                </ButtonIcon>\n                <div className=\"date-input-calender-month\">\n                  <Select\n                    className=\"date-input-calender-month-select\"\n                    onChange={this.handleCurrentMonthChange}\n                    options={months.map(month => ({\n                      label: getShortMonthName(month),\n                      value: month\n                    }))}\n                    value={this.state.currentMonth.getMonth()}\n                  />\n                  <Select\n                    className=\"date-input-calender-month-select spacer-left\"\n                    onChange={this.handleCurrentYearChange}\n                    options={years.map(year => ({ label: String(year), value: year }))}\n                    value={this.state.currentMonth.getFullYear()}\n                  />\n                </div>\n                <ButtonIcon className=\"button-small\" onClick={this.handleNextMonthClick}>\n                  <ChevronRightIcon />\n                </ButtonIcon>\n              </nav>\n              <DayPicker\n                captionElement={<NullComponent />}\n                disabledDays={{ after, before: minDate }}\n                firstDayOfWeek={1}\n                modifiers={modifiers}\n                month={this.state.currentMonth}\n                navbarElement={<NullComponent />}\n                onDayClick={this.handleDayClick}\n                onDayMouseEnter={this.handleDayMouseEnter}\n                selectedDays={selectedDays}\n                weekdaysLong={weekdaysLong}\n                weekdaysShort={weekdaysShort}\n              />\n            </div>\n          )}\n        </span>\n      </OutsideClickHandler>\n    );\n  }\n}\n\nfunction NullComponent() {\n  return null;\n}\n\ntype InputWrapperProps = T.Omit<React.InputHTMLAttributes<HTMLInputElement>, 'value'> &\n  InjectedIntlProps & {\n    innerRef: React.Ref<HTMLInputElement>;\n    value: Date | undefined;\n  };\n\nconst InputWrapper = injectIntl(({ innerRef, intl, value, ...other }: InputWrapperProps) => {\n  const formattedValue =\n    value && intl.formatDate(value, { year: 'numeric', month: 'short', day: 'numeric' });\n  return <input {...other} ref={innerRef} value={formattedValue || ''} />;\n});\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./DayPicker.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".DayPicker{display:inline-block}.DayPicker-wrapper{position:relative;-webkit-user-select:none;-ms-user-select:none;user-select:none;padding-bottom:8px;flex-direction:row}.DayPicker-Months{display:flex;flex-wrap:wrap;justify-content:center}.DayPicker-Month{display:table;border-collapse:collapse;border-spacing:0;-webkit-user-select:none;-ms-user-select:none;user-select:none;margin:8px 8px 0}.DayPicker-Weekdays{display:table-header-group}.DayPicker-WeekdaysRow{display:table-row}.DayPicker-Weekday{display:table-cell;padding:8px;font-size:12px;text-align:center;color:#999}.DayPicker-Weekday abbr[title]{border-bottom:none;text-decoration:none}.DayPicker-Body{display:table-row-group}.DayPicker-Week{display:table-row}.DayPicker-Day{display:table-cell;line-height:15px;padding:8px;text-align:center;cursor:pointer;vertical-align:top;outline:none}.DayPicker--interactionDisabled .DayPicker-Day{cursor:default}.DayPicker-Footer{padding-top:8px}.DayPicker-Day--today{font-weight:700}.DayPicker-Day--outside{cursor:default;color:#8b9898}.DayPicker-Day--disabled{color:#cdcdcd;cursor:not-allowed}.DayPicker-Day--sunday{background-color:#f7f8f8}.DayPicker-Day--sunday:not(.DayPicker-Day--today){color:#dce0e0}.DayPicker-Day--selected:not(.DayPicker-Day--disabled):not(.DayPicker-Day--outside){background-color:#4b9fd5;color:#fff}.DayPicker:not(.DayPicker--interactionDisabled) .DayPicker-Day:not(.DayPicker-Day--disabled):not(.DayPicker-Day--selected):not(.DayPicker-Day--highlighted):not(.DayPicker-Day--outside):hover{background-color:#f3f3f3}.DayPicker-Day--highlighted:not(.DayPicker-Day--disabled):not(.DayPicker-Day--selected):not(.DayPicker-Day--outside){background-color:#cae3f2}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".date-input-control{position:relative;display:inline-block;cursor:pointer}.date-input-control-input{width:130px;padding-left:24px!important;cursor:pointer}.date-input-control-input.is-filled{padding-right:16px!important}.date-input-control-icon{position:absolute;top:4px;left:4px}.date-input-control-icon path{fill:#cdcdcd;transition:fill .3s ease}.date-input-control-input:focus+.date-input-control-icon path{fill:#4b9fd5}.date-input-control-reset{position:absolute;top:4px;right:4px;border:none}.date-input-calendar{position:absolute;z-index:7500;top:100%;left:0;border:1px solid #e6e6e6;background-color:#fff;box-shadow:0 6px 12px rgba(0,0,0,.175)}.date-input-calendar-nav{display:flex;justify-content:space-between;align-items:center;padding-top:8px;padding-left:8px;padding-right:8px}.date-input-calender-month-select{width:70px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { BranchParameters } from '../types/branch-like';\n\ntype NavComponent = T.Omit<T.Component, 'alm' | 'qualifier' | 'leakPeriodDate' | 'path' | 'tags'>;\n\nexport function getComponentNavigation(\n  data: { component: string } & BranchParameters\n): Promise<NavComponent> {\n  return getJSON('/api/navigation/component', data).catch(throwGlobalError);\n}\n\nexport function getMarketplaceNavigation(): Promise<{ serverId: string; ncloc: number }> {\n  return getJSON('/api/navigation/marketplace').catch(throwGlobalError);\n}\n\nexport function getSettingsNavigation(): Promise<any> {\n  return getJSON('/api/navigation/settings').catch(throwGlobalError);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport const enum SettingsKey {\n  DaysBeforeDeletingInactiveBranchesAndPRs = 'sonar.dbcleaner.daysBeforeDeletingInactiveBranchesAndPRs',\n  DefaultProjectVisibility = 'projects.default.visibility',\n  ServerBaseUrl = 'sonar.core.serverBaseURL',\n  PluginRiskConsent = 'sonar.plugins.risk.consent'\n}\n\nexport type Setting = SettingValue & { definition: SettingDefinition };\n\nexport type SettingType =\n  | 'STRING'\n  | 'TEXT'\n  | 'JSON'\n  | 'PASSWORD'\n  | 'BOOLEAN'\n  | 'FLOAT'\n  | 'INTEGER'\n  | 'LICENSE'\n  | 'LONG'\n  | 'SINGLE_SELECT_LIST'\n  | 'PROPERTY_SET';\n\nexport interface SettingDefinition {\n  description?: string;\n  key: string;\n  multiValues?: boolean;\n  name?: string;\n  options: string[];\n  type?: SettingType;\n}\n\nexport interface SettingFieldDefinition extends SettingDefinition {\n  description: string;\n  name: string;\n}\n\nexport interface SettingCategoryDefinition extends SettingDefinition {\n  category: string;\n  defaultValue?: string;\n  deprecatedKey?: string;\n  fields: SettingFieldDefinition[];\n  multiValues?: boolean;\n  subCategory: string;\n}\n\nexport interface SettingValue {\n  fieldValues?: Array<T.Dict<string>>;\n  inherited?: boolean;\n  key: string;\n  parentFieldValues?: Array<T.Dict<string>>;\n  parentValue?: string;\n  parentValues?: string[];\n  value?: string;\n  values?: string[];\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface PrivacyBadgeContainerProps {\n  className?: string;\n  qualifier: string;\n  visibility: T.Visibility;\n}\n\nexport default function PrivacyBadgeContainer({\n  className,\n  qualifier,\n  visibility\n}: PrivacyBadgeContainerProps) {\n  if (visibility !== 'private') {\n    return null;\n  }\n\n  return (\n    <Tooltip overlay={translate('visibility', visibility, 'description', qualifier)}>\n      <div className={classNames('badge', className)}>{translate('visibility', visibility)}</div>\n    </Tooltip>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport Radio from 'sonar-ui-common/components/controls/Radio';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  canTurnToPrivate?: boolean;\n  className?: string;\n  onChange: (visibility: T.Visibility) => void;\n  showDetails?: boolean;\n  visibility?: T.Visibility;\n}\n\nexport default class VisibilitySelector extends React.PureComponent<Props> {\n  render() {\n    return (\n      <div className={classNames(this.props.className)}>\n        {['public', 'private'].map(visibility => (\n          <Radio\n            className={`huge-spacer-right visibility-${visibility}`}\n            key={visibility}\n            value={visibility}\n            checked={this.props.visibility === visibility}\n            onCheck={this.props.onChange}\n            disabled={visibility === 'private' && !this.props.canTurnToPrivate}>\n            <div>\n              {translate('visibility', visibility)}\n              {this.props.showDetails && (\n                <p className=\"note\">{translate('visibility', visibility, 'description.long')}</p>\n              )}\n            </div>\n          </Radio>\n        ))}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { ResetButtonLink, SubmitButton } from 'sonar-ui-common/components/controls/buttons';\nimport Select from 'sonar-ui-common/components/controls/Select';\nimport SimpleModal from 'sonar-ui-common/components/controls/SimpleModal';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport DeferredSpinner from 'sonar-ui-common/components/ui/DeferredSpinner';\nimport MandatoryFieldMarker from 'sonar-ui-common/components/ui/MandatoryFieldMarker';\nimport MandatoryFieldsExplanation from 'sonar-ui-common/components/ui/MandatoryFieldsExplanation';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport { applyTemplateToProject, getPermissionTemplates } from '../../../../api/permissions';\n\ninterface Props {\n  onApply?: () => void;\n  onClose: () => void;\n  project: { key: string; name: string };\n}\n\ninterface State {\n  done: boolean;\n  loading: boolean;\n  permissionTemplate?: string;\n  permissionTemplates?: T.PermissionTemplate[];\n}\n\nexport default class ApplyTemplate extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { done: false, loading: true };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchPermissionTemplates();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchPermissionTemplates = () => {\n    getPermissionTemplates().then(\n      ({ permissionTemplates }) => {\n        if (this.mounted) {\n          this.setState({ loading: false, permissionTemplates });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  handleSubmit = () => {\n    if (this.state.permissionTemplate) {\n      return applyTemplateToProject({\n        projectKey: this.props.project.key,\n        templateId: this.state.permissionTemplate\n      }).then(() => {\n        if (this.mounted) {\n          if (this.props.onApply) {\n            this.props.onApply();\n          }\n          this.setState({ done: true });\n        }\n      });\n    } else {\n      return Promise.reject(undefined);\n    }\n  };\n\n  handlePermissionTemplateChange = ({ value }: { value: string }) => {\n    this.setState({ permissionTemplate: value });\n  };\n\n  render() {\n    const header = translateWithParameters(\n      'projects_role.apply_template_to_xxx',\n      this.props.project.name\n    );\n\n    return (\n      <SimpleModal\n        header={header}\n        onClose={this.props.onClose}\n        onSubmit={this.handleSubmit}\n        size=\"small\">\n        {({ onCloseClick, onFormSubmit, submitting }) => (\n          <form id=\"project-permissions-apply-template-form\" onSubmit={onFormSubmit}>\n            <header className=\"modal-head\">\n              <h2>{header}</h2>\n            </header>\n\n            <div className=\"modal-body\">\n              {this.state.done && (\n                <Alert variant=\"success\">{translate('projects_role.apply_template.success')}</Alert>\n              )}\n\n              {this.state.loading && <i className=\"spinner\" />}\n\n              {!this.state.done && !this.state.loading && (\n                <>\n                  <MandatoryFieldsExplanation className=\"modal-field\" />\n                  <div className=\"modal-field\">\n                    <label htmlFor=\"project-permissions-template\">\n                      {translate('template')}\n                      <MandatoryFieldMarker />\n                    </label>\n                    {this.state.permissionTemplates && (\n                      <Select\n                        clearable={false}\n                        id=\"project-permissions-template\"\n                        onChange={this.handlePermissionTemplateChange}\n                        options={this.state.permissionTemplates.map(permissionTemplate => ({\n                          label: permissionTemplate.name,\n                          value: permissionTemplate.id\n                        }))}\n                        value={this.state.permissionTemplate}\n                      />\n                    )}\n                  </div>\n                </>\n              )}\n            </div>\n\n            <footer className=\"modal-foot\">\n              <DeferredSpinner className=\"spacer-right\" loading={submitting} />\n              {!this.state.done && (\n                <SubmitButton disabled={submitting || !this.state.permissionTemplate}>\n                  {translate('apply')}\n                </SubmitButton>\n              )}\n              <ResetButtonLink onClick={onCloseClick}>\n                {translate(this.state.done ? 'close' : 'cancel')}\n              </ResetButtonLink>\n            </footer>\n          </form>\n        )}\n      </SimpleModal>\n    );\n  }\n}\n"],"sourceRoot":""}