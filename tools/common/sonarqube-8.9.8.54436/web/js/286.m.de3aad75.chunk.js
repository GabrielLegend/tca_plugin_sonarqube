(window.webpackJsonp=window.webpackJsonp||[]).push([[286],{1799:function(e,t){e.exports=function(){}},1878:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return S}));var s=n(568),o=n.n(s),i=n(2),r=n(322),c=n(319),a=n.n(c),l=n(31),p=n(375),u=n(364),d=n(324),h=n(976),m=n(977),f=n(599),b=n(602),g=n(624),y=n(328),v=n(1799),O=n.n(v),k=n(661),x=n(832),E=n(712),j=n(850),L=n(730);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class A extends i.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.rootNodeRef=i.createRef(),this.state={additionalLines:{},highlightedSymbols:[],loading:!1,openIssuesByLine:{},snippets:[]},this.expandBlock=(e,t)=>{const{branchLike:n,snippetGroup:s}=this.props,{key:o}=s.component,{snippets:i}=this.state,r=i.find(t=>t.index===e);if(!r)return Promise.reject();const c=L.a+L.c-1,a="up"===t?{from:Math.max(1,r.start-c),to:r.start-1}:{from:r.end+1,to:r.end+c};return Object(p.u)(C({key:o},a,{},Object(y.d)(n))).then(e=>e.reduce((e,t)=>(t.coverageStatus=Object(x.a)(t),e[t.line]=t,e),{})).then(n=>this.animateBlockExpansion(e,t,n))},this.expandComponent=()=>{const{branchLike:e,snippetGroup:t}=this.props,{key:n}=t.component;this.setState({loading:!0}),Object(p.u)(C({key:n},Object(y.d)(e))).then(e=>{this.mounted&&this.setState(({additionalLines:t})=>({additionalLines:C({},t,{},e),loading:!1,snippets:[{start:0,end:e[e.length-1].line,index:-1}]}))},()=>{this.mounted&&this.setState({loading:!1})})},this.handleOpenIssues=e=>{this.setState(t=>({openIssuesByLine:C({},t.openIssuesByLine,{[e.line]:!0})}))},this.handleCloseIssues=e=>{this.setState(t=>({openIssuesByLine:C({},t.openIssuesByLine,{[e.line]:!1})}))},this.handleSymbolClick=e=>{this.setState(({highlightedSymbols:t})=>({highlightedSymbols:e.filter(e=>!t.includes(e))}))},this.loadDuplications=e=>{this.props.loadDuplications(this.props.snippetGroup.component.key,e)},this.renderDuplicationPopup=(e,t)=>this.props.renderDuplicationPopup(this.props.snippetGroup.component,e,t)}componentDidMount(){this.mounted=!0,this.createSnippetsFromProps()}componentWillUnmount(){this.mounted=!1}createSnippetsFromProps(){const{issue:e,snippetGroup:t}=this.props,n=Object(L.d)({component:t.component.key,issue:e,locations:t.locations});this.setState({snippets:n})}getNodes(e){const t=this.rootNodeRef.current;if(!t)return;const n=t.querySelector("#snippet-wrapper-".concat(e));if(!n)return;const s=n.querySelector(".snippet");if(!s)return;const o=s.firstChild;return o?{wrapper:s,table:o}:void 0}cleanDom(e){const t=this.getNodes(e);if(!t)return;const{wrapper:n,table:s}=t;s.style.marginTop="",n.style.maxHeight=""}setMaxHeight(e,t,n=!1){const s=this.getNodes(e);if(!s)return;const{wrapper:o,table:i}=s,r=void 0!==t?t:i.getBoundingClientRect().height;if(n){const e=o.getBoundingClientRect().height;i.style.transition="none",i.style.marginTop="".concat(e-r,"px"),setTimeout(()=>{i.style.transition="",i.style.marginTop="0px",o.style.maxHeight="".concat(r+20,"px")},0)}else o.style.maxHeight="".concat(r+20,"px")}animateBlockExpansion(e,t,n){if(this.mounted){const{snippets:s}=this.state,o=Object(L.e)({direction:t,snippetIndex:e,snippets:s}),i=o.filter(e=>e.toDelete);return i.forEach(e=>this.setMaxHeight(e.index)),this.setMaxHeight(e),new Promise(s=>{this.setState(({additionalLines:e,snippets:t})=>({additionalLines:C({},e,{},n),snippets:t}),()=>{i.forEach(e=>{this.setMaxHeight(e.index,0)}),this.setMaxHeight(e,void 0,"up"===t),setTimeout(()=>{this.setState({snippets:o.filter(e=>!e.toDelete)},s),this.cleanDom(e)},200)})})}return Promise.resolve()}renderSnippet({index:e,issuesByLine:t,lastSnippetOfLastGroup:n,locationsByLine:s,snippet:o}){return i.createElement(j.a,{branchLike:this.props.branchLike,component:this.props.snippetGroup.component,duplications:this.props.duplications,duplicationsByLine:this.props.duplicationsByLine,expandBlock:this.expandBlock,handleCloseIssues:this.handleCloseIssues,handleOpenIssues:this.handleOpenIssues,handleSymbolClick:this.handleSymbolClick,highlightedLocationMessage:this.props.highlightedLocationMessage,highlightedSymbols:this.state.highlightedSymbols,index:e,issue:this.props.issue,issuePopup:this.props.issuePopup,issuesByLine:t,lastSnippetOfLastGroup:n,loadDuplications:this.loadDuplications,locations:this.props.locations,locationsByLine:s,onIssueChange:this.props.onIssueChange,onIssuePopupToggle:this.props.onIssuePopupToggle,onLocationSelect:this.props.onLocationSelect,openIssuesByLine:this.state.openIssuesByLine,renderDuplicationPopup:this.renderDuplicationPopup,scroll:this.props.scroll,snippet:o})}render(){const{branchLike:e,isLastOccurenceOfPrimaryComponent:t,issue:n,issuesByLine:s,issuePopup:o,lastSnippetGroup:r,snippetGroup:c}=this.props,{additionalLines:a,loading:l,snippets:p}=this.state,u=n.component===c.component.key&&void 0!==n.textRange?Object(f.d)([n]):{},d=1===p.length&&c.component.measures&&p[0].end-p[0].start===parseInt(c.component.measures.lines||"",10),h=Object(L.h)(p,C({},c.sources,{},a)),m=!(0===n.secondaryLocations.length)||t;return i.createElement("div",{className:"component-source-container",ref:this.rootNodeRef},i.createElement(E.a,{branchLike:e,expandable:!d,loading:l,onExpand:this.expandComponent,sourceViewerFile:c.component}),n.component===c.component.key&&void 0===n.textRange&&i.createElement("div",{className:"padded-top padded-left padded-right"},i.createElement(k.a,{issue:n,onChange:this.props.onIssueChange,onClick:O.a,onPopupToggle:this.props.onIssuePopupToggle,openPopup:o&&o.issue===n.key?o.name:void 0,selected:!0})),h.map((e,t)=>i.createElement("div",{id:"snippet-wrapper-".concat(p[t].index),key:p[t].index},this.renderSnippet({snippet:e,index:p[t].index,issuesByLine:s,locationsByLine:m?u:{},lastSnippetOfLastGroup:r&&t===p.length-1}))))}}function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class S extends i.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.state={components:{},duplicationsByLine:{},loading:!0,notAccessible:!1},this.fetchDuplications=e=>{Object(p.q)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){I(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({key:e},Object(y.d)(this.props.branchLike))).then(e=>{this.mounted&&this.setState({duplicatedFiles:e.files,duplications:e.duplications,duplicationsByLine:Object(f.a)(e.duplications)})},()=>{})},this.handleIssuePopupToggle=(e,t,n)=>{this.setState(s=>{const o=s.issuePopup&&s.issuePopup.name===t&&s.issuePopup.issue===e;return!1===n||o?!0!==n&&o?{issuePopup:void 0}:null:{issuePopup:{issue:e,name:t}}})},this.renderDuplicationPopup=(e,t,n)=>{const{duplicatedFiles:s,duplications:o}=this.state;if(!e||!s)return null;const r=Object(m.b)(o,t);return i.createElement(g.a.Consumer,null,({openComponent:t})=>i.createElement(h.a,{blocks:Object(m.a)(r,n),branchLike:this.props.branchLike,duplicatedFiles:s,inRemovedComponent:Object(m.c)(r),openComponent:t,sourceViewerFile:e}))}}componentDidMount(){this.mounted=!0,this.fetchIssueFlowSnippets(this.props.issue.key)}componentWillReceiveProps(e){e.issue.key!==this.props.issue.key&&this.fetchIssueFlowSnippets(e.issue.key)}componentWillUnmount(){this.mounted=!1}fetchIssueFlowSnippets(e){this.setState({loading:!0}),Object(u.h)(e).then(e=>{this.mounted&&(this.setState({components:e,issuePopup:void 0,loading:!1}),this.props.onLoaded&&this.props.onLoaded())},e=>{403!==e.status&&Object(d.a)(e),this.mounted&&this.setState({loading:!1,notAccessible:403===e.status})})}render(){const{loading:e,notAccessible:t}=this.state;if(e)return i.createElement("div",null,i.createElement(a.a,null));if(t)return i.createElement(r.Alert,{className:"spacer-top",variant:"warning"},Object(l.translate)("code_viewer.no_source_code_displayed_due_to_security"));const{issue:n,locations:s}=this.props,{components:c,duplications:p,duplicationsByLine:u}=this.state,d=Object(f.b)(this.props.issues),h=Object(L.f)(n,s,c),m=o()(h,({component:e})=>e.key===n.component);return i.createElement("div",null,h.map((e,t)=>i.createElement(b.a.Provider,{key:"".concat(n.key,"-").concat(this.props.selectedFlowIndex||0,"-").concat(t),value:{branchLike:this.props.branchLike,file:e.component}},i.createElement(A,{branchLike:this.props.branchLike,duplications:p,duplicationsByLine:u,highlightedLocationMessage:this.props.highlightedLocationMessage,issue:n,issuePopup:this.state.issuePopup,issuesByLine:d[e.component.key]||{},isLastOccurenceOfPrimaryComponent:t===m,lastSnippetGroup:t===h.length-1,loadDuplications:this.fetchDuplications,locations:e.locations||[],onIssueChange:this.props.onIssueChange,onIssuePopupToggle:this.handleIssuePopupToggle,onLocationSelect:this.props.onLocationSelect,renderDuplicationPopup:this.renderDuplicationPopup,scroll:this.props.scroll,snippetGroup:e}))))}}},374:function(e,t,n){"use strict";var s,o=this&&this.__extends||(s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(311),r=n(2),c=n(33),a=n(31),l=n(334),p=n(376),u=n(312),d=n(354),h=n(326),m=n(317);t.default=function(e){var t=e.children,n=e.className,s=e.overlayPlacement,o=e.small,c=e.toggleClassName;return r.createElement(h.default,{className:n,onOpen:e.onOpen,overlay:r.createElement("ul",{className:"menu"},t),overlayPlacement:s},r.createElement(u.Button,{className:i("dropdown-toggle",c,{"button-small":o})},r.createElement(p.default,{size:o?12:14}),r.createElement(l.default,{className:"little-spacer-left"})))};var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(e){e.preventDefault(),e.currentTarget.blur(),t.props.onClick&&t.props.onClick()},t}return o(t,e),t.prototype.render=function(){var e=this,t=i(this.props.className,{"text-danger":this.props.destructive});return this.props.download&&"string"==typeof this.props.to?r.createElement("li",null,r.createElement("a",{className:t,download:this.props.download,href:this.props.to,id:this.props.id},this.props.children)):this.props.to?r.createElement("li",null,r.createElement(c.Link,{className:t,id:this.props.id,to:this.props.to},this.props.children)):this.props.copyValue?r.createElement(d.ClipboardBase,null,(function(n){var s=n.setCopyButton,o=n.copySuccess;return r.createElement(m.default,{overlay:a.translate("copied_action"),visible:o},r.createElement("li",{"data-clipboard-text":e.props.copyValue,ref:s},r.createElement("a",{className:t,href:"#",id:e.props.id,onClick:e.handleClick},e.props.children)))})):r.createElement("li",null,r.createElement("a",{className:t,href:"#",id:this.props.id,onClick:this.handleClick},this.props.children))},t}(r.PureComponent);t.ActionsDropdownItem=f,t.ActionsDropdownDivider=function(){return r.createElement("li",{className:"divider"})}},376:function(e,t,n){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__rest||function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(n[s[o]]=e[s[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=n(315);t.default=function(e){var t=e.fill,n=void 0===t?"currentColor":t,c=e.size,a=void 0===c?14:c,l=o(e,["fill","size"]);return i.createElement(r.default,s({size:a,viewBox:"0 0 14 14"},l),i.createElement("g",{transform:"matrix(0.0364583,0,0,0.0364583,0,-1.16667)"},i.createElement("path",{d:"M256,224C256,206.333 249.75,191.25 237.25,178.75C224.75,166.25 209.667,160 192,160C174.333,160 159.25,166.25 146.75,178.75C134.25,191.25 128,206.333 128,224C128,241.667 134.25,256.75 146.75,269.25C159.25,281.75 174.333,288 192,288C209.667,288 224.75,281.75 237.25,269.25C249.75,256.75 256,241.667 256,224ZM384,196.75L384,252.25C384,254.25 383.333,256.167 382,258C380.667,259.833 379,260.917 377,261.25L330.75,268.25C327.583,277.25 324.333,284.833 321,291C326.833,299.333 335.75,310.833 347.75,325.5C349.417,327.5 350.25,329.583 350.25,331.75C350.25,333.917 349.5,335.833 348,337.5C343.5,343.667 335.25,352.667 323.25,364.5C311.25,376.333 303.417,382.25 299.75,382.25C297.75,382.25 295.583,381.5 293.25,380L258.75,353C251.417,356.833 243.833,360 236,362.5C233.333,385.167 230.917,400.667 228.75,409C227.583,413.667 224.583,416 219.75,416L164.25,416C161.917,416 159.875,415.292 158.125,413.875C156.375,412.458 155.417,410.667 155.25,408.5L148.25,362.5C140.083,359.833 132.583,356.75 125.75,353.25L90.5,380C88.833,381.5 86.75,382.25 84.25,382.25C81.917,382.25 79.833,381.333 78,379.5C57,360.5 43.25,346.5 36.75,337.5C35.583,335.833 35,333.917 35,331.75C35,329.75 35.667,327.833 37,326C39.5,322.5 43.75,316.958 49.75,309.375C55.75,301.792 60.25,295.917 63.25,291.75C58.75,283.417 55.333,275.167 53,267L7.25,260.25C5.083,259.917 3.333,258.875 2,257.125C0.667,255.375 0,253.417 0,251.25L0,195.75C0,193.75 0.667,191.833 2,190C3.333,188.167 4.917,187.083 6.75,186.75L53.25,179.75C55.583,172.083 58.833,164.417 63,156.75C56.333,147.25 47.417,135.75 36.25,122.25C34.583,120.25 33.75,118.25 33.75,116.25C33.75,114.583 34.5,112.667 36,110.5C40.333,104.5 48.542,95.542 60.625,83.625C72.708,71.708 80.583,65.75 84.25,65.75C86.417,65.75 88.583,66.583 90.75,68.25L125.25,95C132.583,91.167 140.167,88 148,85.5C150.667,62.833 153.083,47.333 155.25,39C156.417,34.333 159.417,32 164.25,32L219.75,32C222.083,32 224.125,32.708 225.875,34.125C227.625,35.542 228.583,37.333 228.75,39.5L235.75,85.5C243.917,88.167 251.417,91.25 258.25,94.75L293.75,68C295.25,66.5 297.25,65.75 299.75,65.75C301.917,65.75 304,66.583 306,68.25C327.5,88.083 341.25,102.25 347.25,110.75C348.417,112.083 349,113.917 349,116.25C349,118.25 348.333,120.167 347,122C344.5,125.5 340.25,131.042 334.25,138.625C328.25,146.208 323.75,152.083 320.75,156.25C325.083,164.583 328.5,172.75 331,180.75L376.75,187.75C378.917,188.083 380.667,189.125 382,190.875C383.333,192.625 384,194.583 384,196.75Z",style:{fill:n}})))}},384:function(e,t,n){var s=n(447),o=n(417),i=Object.prototype.hasOwnProperty,r=o((function(e,t,n){i.call(e,n)?e[n].push(t):s(e,n,[t])}));e.exports=r},387:function(e,t,n){var s=n(361);e.exports=function(e){var t=s(e),n=t%1;return t==t?n?t-n:t:0}},420:function(e,t){e.exports=function(e,t,n,s){for(var o=e.length,i=n+(s?1:-1);s?i--:++i<o;)if(t(e[i],i,e))return i;return-1}},568:function(e,t,n){var s=n(420),o=n(329),i=n(387),r=Math.max,c=Math.min;e.exports=function(e,t,n){var a=null==e?0:e.length;if(!a)return-1;var l=a-1;return void 0!==n&&(l=i(n),l=n<0?r(a+l,0):c(l,a-1)),s(e,o(t,3),l,!0)}},599:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return p})),n.d(t,"e",(function(){return u}));var s=n(665),o=n.n(s),i=n(600),r=n(601);function c(e){const t={};return e.forEach(e=>{const n=e.textRange?e.textRange.endLine:0;n in t||(t[n]=[]),t[n].push(e)}),t}function a(e=[]){return e.reduce((e,t)=>{e[t.component]=e[t.component]||{};const n=t.textRange?t.textRange.endLine:0;return e[t.component][n]=e[t.component][n]||[],e[t.component][n].push(t),e},{})}function l(e){const t={};return e.forEach(e=>{Object(r.a)(e.textRange).forEach(e=>{e.line in t||(t[e.line]=[]),t[e.line].push(e)})}),t}function p(e){if(null==e)return{};const t={};return e.forEach(({blocks:e},n)=>{e.forEach(e=>{if("1"===e._ref)for(let s=e.from;s<e.from+e.size;s++)s in t||(t[s]=[]),t[s].push(n)})}),t}function u(e){const t={};return e.forEach(e=>{const n=Object(i.c)(e.code||""),s=o()(n.map(e=>{const t=e.className.match(/sym-\d+/g);return null!=t?t:[]}));t[e.line]=s.filter(e=>e)}),t}},600:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return u}));var s=n(457),o=n.n(s);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t=""){const n=document.createElement("div");let s=[];return n.innerHTML=e,[].forEach.call(n.childNodes,e=>{if(1===e.nodeType){const n=t?t+" "+e.className:e.className,o=a(e.innerHTML,n);s=s.concat(o)}3===e.nodeType&&e.nodeValue&&s.push({className:t,markers:[],text:e.nodeValue})}),s}function l(e,t){const n=new RegExp("\\b".concat(t,"\\b"));return e.map(e=>n.test(e.className)?r({},e,{className:"".concat(e.className," highlighted")}):e)}function p(e,t,n,s){return t>=s?e.substr(t-s,n-t):e.substr(0,n-t)}function u(e,t,n="source-line-code-issue"){return t.forEach(t=>{const s=[];let i=0,c=t.line!==t.startLine;e.forEach(e=>{const a=(l=i,u=i+e.text.length,d=t.from,h=t.to,{from:Math.max(l,d),to:Math.min(u,h)});var l,u,d,h;const m=p(e.text,i,a.from,i),f=p(e.text,a.from,a.to,i),b=p(e.text,a.to,i+e.text.length,i);if(m.length&&s.push(r({},e,{text:m})),f.length){const i=-1===e.className.indexOf(n)?"".concat(e.className," ").concat(n):e.className;s.push({className:i,markers:c||null==t.index?e.markers:o()([...e.markers,t.index]),text:f}),c=!0}b.length&&s.push(r({},e,{text:b})),i+=e.text.length}),e=s.slice()}),e}},601:function(e,t,n){"use strict";function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){if(!e)return[];const t=[];for(let n=e.startLine;n<=e.endLine;n++){const s=n===e.startLine?e.startOffset:0,o=n===e.endLine?e.endOffset:999999;t.push({line:n,from:s,to:o})}return t}function r(e,t){return t?t.reduce((t,n)=>[...t,...n?i(n.textRange).filter(t=>t.line===e.line).map(e=>function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{startLine:n.textRange.startLine,index:n.index,text:n.msg})):[]],[]):[]}n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}))},602:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var s=n(2);const o=s.createContext({branchLike:{},file:{}})},604:function(e,t,n){var s=n(336),o=n(635),i=n(371),r=n(636),c=i((function(e){var t=s(e,r);return t.length&&t[0]===e[0]?o(t):[]}));e.exports=c},632:function(e,t,n){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__rest||function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(n[s[o]]=e[s[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=n(315);t.default=function(e){var t=e.fill,n=void 0===t?"currentColor":t,c=o(e,["fill"]);return i.createElement(r.default,s({},c),i.createElement("g",{fill:"none",fillRule:"evenodd"},i.createElement("path",{d:"M8 1v4H4",stroke:n,strokeWidth:"2",transform:"scale(-.83333 -.84583) rotate(45 7.66 -19.75)"}),i.createElement("path",{d:"M3 5.78h10v1.7H3z",fill:n}),i.createElement("path",{d:"M7.17 2.4h1.66v5.07H7.17z",fill:n}),i.createElement("g",null,i.createElement("path",{d:"M8.16 1.81V6.1H3.9",stroke:n,strokeWidth:"2",transform:"scale(.83333 .84583) rotate(45 -4.2 13.2)"}),i.createElement("path",{d:"M13 10.01H3v-1.7h10z",fill:n}),i.createElement("path",{d:"M8.83 13.4H7.17V9.15h1.66z",fill:n}))))}},635:function(e,t,n){var s=n(399),o=n(404),i=n(405),r=n(336),c=n(401),a=n(400),l=Math.min;e.exports=function(e,t,n){for(var p=n?i:o,u=e[0].length,d=e.length,h=d,m=Array(d),f=1/0,b=[];h--;){var g=e[h];h&&t&&(g=r(g,c(t))),f=l(g.length,f),m[h]=!n&&(t||u>=120&&g.length>=120)?new s(h&&g):void 0}g=e[0];var y=-1,v=m[0];e:for(;++y<u&&b.length<f;){var O=g[y],k=t?t(O):O;if(O=n||0!==O?O:0,!(v?a(v,k):p(b,k,n))){for(h=d;--h;){var x=m[h];if(!(x?a(x,k):p(e[h],k,n)))continue e}v&&v.push(k),b.push(O)}}return b}},636:function(e,t,n){var s=n(347);e.exports=function(e){return s(e)?e:[]}},712:function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var s=n(311),o=n(2),i=n(318),r=n(312),c=n(354),a=n(632),l=n.n(a),p=n(345),u=n.n(p),d=n(319),h=n.n(d),m=n(31),f=n(406),b=n(339),g=n(328),y=n(321),v=n(337);n(713);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e){const{branchLike:t,expandable:n,displayProjectName:a=!0,linkToProject:p=!0,loading:d,onExpand:O,sourceViewerFile:x}=e,{measures:E,path:j,project:L,projectName:w,q:C,subProject:P,subProjectName:A}=x,N=o.createElement(o.Fragment,null,o.createElement(u.a,{qualifier:v.a.Project})," ",o.createElement("span",null,w));return o.createElement("div",{className:"source-viewer-header-slim display-flex-row display-flex-space-between"},o.createElement("div",{className:"display-flex-center flex-1"},a&&o.createElement("div",{className:"spacer-right"},p?o.createElement("a",{className:"link-with-icon",href:Object(b.getPathUrlAsString)(Object(y.c)(L,t))},N):N),void 0!==P&&o.createElement(o.Fragment,null,o.createElement(u.a,{qualifier:v.a.SubProject})," ",o.createElement("span",{className:"spacer-right"},A)),o.createElement("div",{className:"spacer-right"},o.createElement(u.a,{qualifier:C})," ",o.createElement("span",null,Object(f.collapsedDirFromPath)(j)),o.createElement("span",{className:"component-name-file"},Object(f.fileFromPath)(j))),o.createElement("div",{className:"spacer-right"},o.createElement(c.ClipboardIconButton,{className:"button-link link-no-underline",copyValue:j}))),void 0!==E.issues&&o.createElement("div",{className:s("flex-0 big-spacer-left",{"little-spacer-right":!n||d})},o.createElement(i.c,{to:Object(y.j)(L,k({},Object(g.d)(t),{files:j,resolved:"false"}))},Object(m.translate)("source_viewer.view_all_issues"))),n&&o.createElement(h.a,{className:"little-spacer-right",loading:d},o.createElement("div",{className:"flex-0 big-spacer-left"},o.createElement(r.ButtonIcon,{className:"js-actions",onClick:O},o.createElement(l.a,null)))))}},713:function(e,t,n){var s=n(313),o=n(714);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var i={insert:"head",singleton:!1},r=(s(o,i),o.locals?o.locals:{});e.exports=r},714:function(e,t,n){(t=n(314)(!1)).push([e.i,".source-viewer-header-slim{padding:4px 10px;border-bottom:1px solid #cdcdcd;background-color:#f3f3f3;align-items:center;min-height:25px}",""]),e.exports=t},715:function(e,t){e.exports=function(e,t){for(var n=-1,s=Array(e);++n<e;)s[n]=t(n);return s}},716:function(e,t,n){var s=n(313),o=n(717);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var i={insert:"head",singleton:!1},r=(s(o,i),o.locals?o.locals:{});e.exports=r},717:function(e,t,n){(t=n(314)(!1)).push([e.i,'.source-line:hover .source-line-coverage,.source-line:hover .source-line-duplications,.source-line:hover .source-line-duplications-extra,.source-line:hover .source-line-issues,.source-line:hover .source-line-number,.source-line:hover .source-line-scm{border-color:#e9e9e9;background-color:#e9e9e9}.source-line:hover .source-line-code{background-color:#f5f5f5}.source-line [role=button]{cursor:pointer}.source-line-highlighted .source-line-coverage,.source-line-highlighted .source-line-duplications,.source-line-highlighted .source-line-duplications-extra,.source-line-highlighted .source-line-issues,.source-line-highlighted .source-line-number,.source-line-highlighted .source-line-scm,.source-line-highlighted:hover .source-line-coverage,.source-line-highlighted:hover .source-line-duplications,.source-line-highlighted:hover .source-line-duplications-extra,.source-line-highlighted:hover .source-line-issues,.source-line-highlighted:hover .source-line-number,.source-line-highlighted:hover .source-line-scm{border-color:#c4dfec!important;background-color:#c4dfec}.source-line-highlighted .source-line-code,.source-line-highlighted:hover .source-line-code{background-color:#d9edf7}.source-line-filtered .source-line-code{background-color:#fbf3d5!important}.source-line-filtered.source-line-highlighted .source-line-code,.source-line-filtered.source-line-highlighted:hover .source-line-code{background-color:#cdd9c4!important}.source-line-filtered.source-line-filtered-dark .source-line-code{background-color:#f9ebb7!important}.source-line-filtered.source-line-filtered-dark:hover .source-line-code,.source-line-filtered:hover .source-line-code{background-color:#f1e8cb!important}.source-line-last .source-line-code{padding-bottom:160px}.source-line-number,.source-line-scm,.source-viewer pre{line-height:18px;font-family:Consolas,Ubuntu Mono,Liberation Mono,Menlo,Courier,monospace;font-size:12px}.source-line-code{position:relative;padding:0 10px}.source-line-code pre{float:left;word-wrap:break-word;white-space:pre-wrap}.source-line-code .issue-list{margin-left:-10px;margin-right:-10px}.source-line-code-inner{min-height:18px}.source-line-code-inner:after,.source-line-code-inner:before{display:table;content:"";line-height:0}.source-line-code-inner:after{clear:both}.source-line-code-inner pre{-moz-tab-size:4;tab-size:4}.source-line-code-issue{display:inline-block;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAGCAYAAAAPDoR2AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1M0M2Rjk4M0M3QUYxMUUzODkzRUREMUM5OTNDMjY4QSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo1M0M2Rjk4NEM3QUYxMUUzODkzRUREMUM5OTNDMjY4QSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjUzQzZGOTgxQzdBRjExRTM4OTNFREQxQzk5M0MyNjhBIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjUzQzZGOTgyQzdBRjExRTM4OTNFREQxQzk5M0MyNjhBIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+bcqJtQAAAEhJREFUeNpi+G+swwDGDAwgbAWlwZiJAQFCgfgwEIfDRaC67ID4NRDnQ2kQnwFZwgFqnANMAQOUYY9sF0wBiCGH5CBkrAgQYACuWi4sSGW8yAAAAABJRU5ErkJggg==);background-repeat:repeat-x;background-size:4px;background-position:bottom}.source-meta{position:relative;vertical-align:top;width:1px;background-clip:padding-box;-webkit-user-select:none;-ms-user-select:none;user-select:none}.source-meta:focus{outline:none}.source-line-number{min-width:18px;padding:0 10px;background-color:#f3f3f3;color:#666;text-align:right}.source-line-issues{position:relative;padding:0 2px;background-color:#f3f3f3;white-space:nowrap}.source-line-with-issues svg{padding-right:2px;vertical-align:middle}.source-line-issues-counter{position:absolute;left:17px;line-height:8px;font-size:8px;z-index:900}.source-line-coverage,.source-line-duplications,.source-line-duplications-extra{background-color:#f3f3f3}.source-line-duplications-extra{display:none}.source-line-scm{padding:0 5px;background-color:#f3f3f3}.source-line-scm .dropdown{display:block}.source-line-scm [role=button]{height:18px}.source-line-scm-inner{max-width:40px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.source-line-bar{width:5px;height:18px}.source-line-bar:focus{outline:none}.source-line-covered{background-color:#b4dd78!important}.source-line-partially-covered,.source-line-uncovered{background-color:#a4030f!important}.source-line-partially-covered{background-image:repeating-linear-gradient(45deg,hsla(0,0%,100%,.5) 4px,transparent 0,transparent 8px,hsla(0,0%,100%,.5) 0,hsla(0,0%,100%,.5) 12px,transparent 0,transparent 16px,hsla(0,0%,100%,.5) 0,hsla(0,0%,100%,.5) 20px)!important}.source-line-duplicated{background-color:#797979!important}.source-viewer-bubble-popup a{font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:13px;text-align:left;-webkit-user-select:text;-ms-user-select:text;user-select:text;border-bottom:none;transition:none;color:unset}',""]),e.exports=t},729:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return c}));var s=n(604),o=n.n(s);function i(e=[],t=[]){const n=o()(e,t);return n.length?n:void 0}function r(e,t){return null!=e&&t.some(t=>t.index===e.index)?e:void 0}function c(e,t){return void 0!==e&&t.find(t=>t.key===e)?e:void 0}},730:function(e,t,n){"use strict";function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return p})),n.d(t,"h",(function(){return u})),n.d(t,"f",(function(){return d})),n.d(t,"e",(function(){return h})),n.d(t,"g",(function(){return m}));const i=11,r=9,c=50;function a([e,t],[n,s]){return!(e>s+i||t<n-i)}function l(e){return{component:e.component,textRange:e.textRange||{endLine:0,endOffset:0,startLine:0,startOffset:0}}}function p(e){const{component:t,issue:n,locations:s}=e,o=n.secondaryLocations.length>0,i=(o&&n.component===t&&void 0!==n.textRange?[l(n),...s]:s).reduce((e,t,s)=>{const o=Math.max(1,t.textRange.startLine-5),i=function(e){const{issue:t,locationEnd:n}=e,s=t.textRange&&t.textRange.endLine||0;return s&&s!==n?n+5:n+r}({issue:n,locationEnd:t.textRange.endLine});let c;return e=e.filter(e=>{if(a([e.start,e.end],[o,i])){let t=!1;return c||(c=e,t=!0),c.start=Math.min(o,e.start,c.start),c.end=Math.max(i,e.end,c.end),t}return!0}),void 0===c&&e.push({start:o,end:i,index:s}),e},[]);return o?i.sort((e,t)=>e.start-t.start):i}function u(e,t){return e.map(e=>{const n=[];for(let s=e.start;s<=e.end;s++)t[s]&&n.push(t[s]);return n}).filter(e=>e.length>0)}function d(e,t,n){let i,r="";const c=[],a=e=>{i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n[e]||{component:{key:e,measures:{},path:"",project:"",projectName:"",q:"FIL",uuid:""},sources:[]},{locations:[]}),c.push(i),r=e};return e.secondaryLocations.length>0&&t.every(t=>t.component!==e.component)&&a(e.component),t.forEach((e,t)=>{e.component!==r&&a(e.component),e.index=t,i.locations.push(e)}),c}function h({direction:e,snippetIndex:t,snippets:n}){const s=n.find(e=>e.index===t);if(!s)throw new Error("Snippet ".concat(t," not found"));return s.start=Math.max(0,s.start-("up"===e?c:0)),s.end+="down"===e?c:0,n.map(e=>e.index===t?s:(a([e.start,e.end],[s.start,s.end])&&(s.start=Math.min(e.start,s.start),s.end=Math.max(e.end,s.end),e.toDelete=!0),e))}function m(e,t){return e>=t[0].line&&e<=t[t.length-1].line}},764:function(e,t,n){"use strict";n.d(t,"a",(function(){return F}));var s=n(715),o=n.n(s),i=n(311),r=n(2),c=(n(716),n(549)),a=n(675),l=n(600),p=n(661);function u(e){const{issuePopup:t}=e;return r.createElement("div",{className:"issue-list"},e.issues.map(n=>r.createElement(p.a,{branchLike:e.branchLike,displayLocationsCount:e.displayIssueLocationsCount,displayLocationsLink:e.displayIssueLocationsLink,issue:n,key:n.key,onChange:e.onIssueChange,onClick:e.onIssueClick,onPopupToggle:e.onIssuePopupToggle,openPopup:t&&t.issue===n.key?t.name:void 0,selected:e.selectedIssue===n.key})))}class d extends r.PureComponent{constructor(e){super(e),this.handleSymbolClick=e=>{e.preventDefault();const t=e.currentTarget.className.match(/sym-\d+/g);t&&t.length>0&&this.props.onSymbolClick(t)},this.state={tokens:Object(l.c)(e.line.code||"")}}componentDidMount(){this.attachEvents(),this.props.highlightedLocationMessage&&this.activeMarkerNode&&this.props.scroll&&this.props.scroll(this.activeMarkerNode)}componentWillReceiveProps(e){e.line.code!==this.props.line.code&&this.setState({tokens:Object(l.c)(e.line.code||"")})}componentWillUpdate(){this.detachEvents()}componentDidUpdate(e){this.attachEvents(),this.props.highlightedLocationMessage&&(!e.highlightedLocationMessage||e.highlightedLocationMessage.index!==this.props.highlightedLocationMessage.index)&&this.activeMarkerNode&&this.props.scroll&&this.props.scroll(this.activeMarkerNode)}componentWillUnmount(){this.detachEvents()}attachEvents(){if(this.codeNode&&(this.symbols=this.codeNode.querySelectorAll(".sym"),this.symbols))for(let e=0;e<this.symbols.length;e++){this.symbols[e].addEventListener("click",this.handleSymbolClick)}}detachEvents(){if(this.symbols)for(let e=0;e<this.symbols.length;e++){this.symbols[e].addEventListener("click",this.handleSymbolClick)}}renderMarker(e,t,n,s){const{onLocationSelect:o}=this.props,i=o?()=>o(e):void 0,l=n?e=>this.activeMarkerNode=e:void 0;return r.createElement(c.a,{key:"marker-".concat(e),leading:s,onClick:i,selected:n},r.createElement("span",{ref:l},e+1),t&&r.createElement(a.a,{selected:!0},t))}render(){const{highlightedLocationMessage:e,highlightedSymbols:t,issues:n,issueLocations:s,line:o,onIssueSelect:c,padding:a,secondaryIssueLocations:p,selectedIssue:d,showIssues:h}=this.props;let m=[...this.state.tokens];if(t&&t.forEach(e=>{m=Object(l.b)(m,e)}),s.length>0&&(m=Object(l.a)(m,s)),p&&(m=Object(l.a)(m,p,"issue-location"),e)){const t=p.find(t=>t.index===e.index);t&&(m=Object(l.a)(m,[t],"selected"))}const f=i("source-line-code","code",{"has-issues":n.length>0}),b=[];let g=!1;m.forEach((t,n)=>{this.props.displayLocationMarkers&&t.markers.length>0&&t.markers.forEach(t=>{const n=void 0!==e&&e.index===t,s=p.find(e=>e.index===t),o=s&&s.text;b.push(this.renderMarker(t,o,n,g))}),b.push(r.createElement("span",{className:t.className,key:n},t.text)),g=(0===n||g)&&!t.text.trim().length});const y=a?{paddingBottom:"".concat(a,"px")}:void 0,v=n.filter(e=>e.key===d);return r.createElement("td",{className:f,"data-line-number":o.line,style:y},r.createElement("div",{className:"source-line-code-inner"},r.createElement("pre",{ref:e=>this.codeNode=e},b)),h&&n.length>0&&r.createElement(u,{branchLike:this.props.branchLike,displayIssueLocationsCount:this.props.displayIssueLocationsCount,displayIssueLocationsLink:this.props.displayIssueLocationsLink,issuePopup:this.props.issuePopup,issues:n,onIssueChange:this.props.onIssueChange,onIssueClick:c,onIssuePopupToggle:this.props.onIssuePopupToggle,selectedIssue:d}),d&&!h&&r.createElement(u,{branchLike:this.props.branchLike,issuePopup:this.props.issuePopup,issues:v,onIssueChange:this.props.onIssueChange,onIssueClick:c,onIssuePopupToggle:this.props.onIssuePopupToggle,selectedIssue:d}))}}var h=n(317),m=n.n(h),f=n(31);var b=r.memo((function({line:e,scroll:t,scrollToUncoveredLine:n}){const s=r.useRef(null);r.useEffect(()=>{n&&t&&s.current&&t(s.current)},[n,t,s]);const o="source-meta source-line-coverage"+(null!=e.coverageStatus?" source-line-".concat(e.coverageStatus):""),i=function(e){if("uncovered"===e.coverageStatus)return e.conditions?Object(f.translateWithParameters)("source_viewer.tooltip.uncovered.conditions",e.conditions):Object(f.translate)("source_viewer.tooltip.uncovered");if("covered"===e.coverageStatus)return e.conditions?Object(f.translateWithParameters)("source_viewer.tooltip.covered.conditions",e.conditions):Object(f.translate)("source_viewer.tooltip.covered");if("partially-covered"===e.coverageStatus)return e.conditions?Object(f.translateWithParameters)("source_viewer.tooltip.partially-covered.conditions",e.coveredConditions||0,e.conditions):Object(f.translate)("source_viewer.tooltip.partially-covered");return}(e);return r.createElement("td",{className:o,"data-line-number":e.line,ref:s},r.createElement(m.a,{overlay:i,placement:"bottom"},r.createElement("div",{"aria-label":i,className:"source-line-bar"})))})),g=n(326),y=n.n(g),v=n(360),O=n.n(v),k=n(372);var x=r.memo((function(e){const{blocksLoaded:t,duplicated:n,index:s,line:o}=e,[c,a]=r.useState(!1),l=i("source-meta","source-line-duplications",{"source-line-duplicated":n});return n?r.createElement("td",{className:l,"data-index":s,"data-line-number":o.line},r.createElement(m.a,{overlay:c?void 0:Object(f.translate)("source_viewer.tooltip.duplicated_block"),placement:"right"},r.createElement("div",null,r.createElement(O.a,{onRequestClose:()=>a(!1),open:c,overlay:r.createElement(g.DropdownOverlay,{placement:k.PopupPlacement.RightTop},e.renderDuplicationPopup(s,o.line))},r.createElement("div",{"aria-label":Object(f.translate)("source_viewer.tooltip.duplicated_block"),className:"source-line-bar",onClick:()=>{a(!0),!t&&o.duplicated&&e.onClick&&e.onClick(o)},role:"button",tabIndex:0}))))):r.createElement("td",{className:l,"data-index":s,"data-line-number":o.line},r.createElement("div",{className:"source-line-bar"}))})),E=n(457),j=n.n(E),L=n(443),w=n.n(L),C=n(545);var P=r.memo((function(e){const{issues:t,issuesOpen:n,line:s}=e,o=t.length>0,c=i("source-meta","source-line-issues",{"source-line-with-issues":o});if(!o)return r.createElement("td",{className:c,"data-line-number":s.line});const a=Object(C.c)(t)[0];let l;return l=j()(t.map(e=>e.type)).length>1?Object(f.translate)("source_viewer.issues_on_line.multiple_issues"):1===t.length?Object(f.translateWithParameters)("source_viewer.issues_on_line.issue_of_type_X",Object(f.translate)("issue.type",a.type)):Object(f.translateWithParameters)("source_viewer.issues_on_line.X_issues_of_type_Y",t.length,Object(f.translate)("issue.type",a.type,"plural")),r.createElement("td",{className:c,"data-line-number":s.line},r.createElement("span",{"aria-label":Object(f.translate)("source_viewer.issues_on_line",n?"hide":"show"),onClick:t=>{t.preventDefault(),t.currentTarget.blur(),e.onClick()},role:"button",tabIndex:0},r.createElement(m.a,{overlay:l},r.createElement(w.a,{type:a.type})),t.length>1&&r.createElement("span",{className:"source-line-issues-counter"},t.length)))})),A=n(374),N=n(339),I=n(321),S=n(602);var D=r.memo((function({firstLineNumber:e,line:t}){return r.createElement(S.a.Consumer,null,({branchLike:n,file:s})=>{const o=Object(I.e)(s.project,n,s.key,t.line),i=Object(N.getPathUrlAsString)(o,!1),c=t.line-4<e;return r.createElement(g.DropdownOverlay,{className:"big-spacer-left",noPadding:!0,placement:c?k.PopupPlacement.BottomLeft:k.PopupPlacement.TopLeft},r.createElement("ul",{className:"padded source-viewer-bubble-popup nowrap"},r.createElement(A.ActionsDropdownItem,{copyValue:i},Object(f.translate)("component_viewer.copy_permalink"))))})}));var M=r.memo((function({displayOptions:e,firstLineNumber:t,line:n}){const[s,o]=r.useState(!1),{line:i}=n;return!!i?r.createElement("td",{className:"source-meta source-line-number","data-line-number":i},e?r.createElement(O.a,{closeOnClickOutside:!0,onRequestClose:()=>o(!1),open:s,overlay:r.createElement(D,{firstLineNumber:t,line:n})},r.createElement("span",{"aria-expanded":s,"aria-haspopup":!0,"aria-label":Object(f.translateWithParameters)("source_viewer.line_X",i),onClick:()=>o(!0),role:"button",tabIndex:0},i)):i):r.createElement("td",{className:"source-meta source-line-number"})})),R=n(363),_=n.n(R);var B=r.memo((function({line:e}){const t=void 0!==e.scmAuthor&&""!==e.scmAuthor,n=void 0!==e.scmDate;return r.createElement("div",{className:"source-viewer-bubble-popup abs-width-400"},t&&r.createElement("div",null,r.createElement("h4",null,Object(f.translate)("author")),e.scmAuthor),n&&r.createElement("div",{className:i({"spacer-top":t})},r.createElement("h4",null,Object(f.translate)("source_viewer.tooltip.scm.commited_on")),r.createElement(_.a,{date:e.scmDate})),e.scmRevision&&r.createElement("div",{className:i({"spacer-top":t||n})},r.createElement("h4",null,Object(f.translate)("source_viewer.tooltip.scm.revision")),e.scmRevision))}));var T=r.memo((function({line:e,previousLine:t}){const n=!!e.line,s=r.createElement("div",{className:"source-line-scm-inner"},function(e,t){let n=!0;null!=t&&null!=e.scmRevision&&null!=t.scmRevision&&(n=e.scmRevision!==t.scmRevision||e.scmDate!==t.scmDate);return n}(e,t)?e.scmAuthor||"…":" ");if(n){let t=Object(f.translate)("source_viewer.click_for_scm_info");return e.scmAuthor&&(t="".concat(Object(f.translateWithParameters)("source_viewer.author_X",e.scmAuthor),", ").concat(t)),r.createElement("td",{className:"source-meta source-line-scm","data-line-number":e.line},r.createElement(y.a,{overlay:r.createElement(B,{line:e}),overlayPlacement:k.PopupPlacement.RightTop},r.createElement("div",{"aria-label":t,role:"button"},s)))}return r.createElement("td",{className:"source-meta source-line-scm","data-line-number":e.line},s)}));class F extends r.PureComponent{constructor(){super(...arguments),this.handleIssuesIndicatorClick=()=>{if(this.props.openIssues)this.props.onIssuesClose(this.props.line),this.props.onIssueUnselect();else{this.props.onIssuesOpen(this.props.line);const{issues:e}=this.props;e.length>0&&this.props.onIssueSelect(e[0].key)}}}render(){const{branchLike:e,displayAllIssues:t,displayCoverage:n,displayDuplications:s,displayIssueLocationsCount:c,displayIssueLocationsLink:a,displayLineNumberOptions:l,displayLocationMarkers:p,highlightedLocationMessage:u,displayIssues:h,displaySCM:m=!0,duplications:f,duplicationsCount:g,firstLineNumber:y,highlighted:v,highlightedSymbols:O,issueLocations:k,issuePopup:E,issues:j,last:L,line:w,openIssues:C,previousLine:A,scrollToUncoveredLine:N,secondaryIssueLocations:I,selectedIssue:S,verticalBuffer:D}=this.props,R=i("source-line",{"source-line-highlighted":v,"source-line-filtered":w.isNew,"source-line-filtered-dark":n&&("uncovered"===w.coverageStatus||"partially-covered"===w.coverageStatus),"source-line-last":!0===L}),_=D?18*D:void 0,B=!1!==l;return r.createElement("tr",{className:R,"data-line-number":w.line},r.createElement(M,{displayOptions:B,firstLineNumber:y,line:w}),m&&r.createElement(T,{line:w,previousLine:A}),h&&!t?r.createElement(P,{issues:j,issuesOpen:C,line:w,onClick:this.handleIssuesIndicatorClick}):r.createElement("td",{className:"source-meta source-line-issues"}),s&&r.createElement(x,{blocksLoaded:g>0,duplicated:Boolean(w.duplicated),index:0,key:0,line:this.props.line,onClick:this.props.loadDuplications,renderDuplicationPopup:this.props.renderDuplicationPopup}),g>1&&o()(g-1,e=>r.createElement(x,{blocksLoaded:!0,duplicated:f.includes(e+1),index:e+1,key:e+1,line:this.props.line,renderDuplicationPopup:this.props.renderDuplicationPopup})),n&&r.createElement(b,{line:w,scroll:this.props.scroll,scrollToUncoveredLine:N}),r.createElement(d,{branchLike:e,displayIssueLocationsCount:c,displayIssueLocationsLink:a,displayLocationMarkers:p,highlightedLocationMessage:u,highlightedSymbols:O,issueLocations:k,issuePopup:E,issues:j,line:w,onIssueChange:this.props.onIssueChange,onIssuePopupToggle:this.props.onIssuePopupToggle,onIssueSelect:this.props.onIssueSelect,onLocationSelect:this.props.onLocationSelect,onSymbolClick:this.props.onSymbolClick,padding:_,scroll:this.props.scroll,secondaryIssueLocations:I,selectedIssue:S,showIssues:C||t}))}}},850:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var s=n(311),o=n.n(s),i=n(2),r=n(632),c=n.n(r),a=n(31),l=n(435),p=n(764),u=n(599),d=n(601),h=n(729),m=(n(859),n(730));class f extends i.PureComponent{constructor(e){super(e),this.doScroll=e=>{this.props.scroll&&this.props.scroll(e);const t=this.snippetNodeRef.current;if(t){const n=t.getBoundingClientRect().width/2;Object(l.scrollHorizontally)(e,{leftOffset:n,rightOffset:n,parent:t})}},this.scrollToLastExpandedRow=()=>{if(this.props.scroll){const e=this.snippetNodeRef.current;if(!e)return;const t=e.querySelectorAll("tr"),n=t[t.length-1];this.props.scroll(n,100)}},this.expandBlock=e=>()=>this.props.expandBlock(this.props.index,e).then(()=>{"down"===e&&this.scrollToLastExpandedRow()}),this.snippetNodeRef=i.createRef()}renderLine({displayDuplications:e,displaySCM:t,index:n,issuesForLine:s,issueLocations:o,line:r,snippet:c,symbols:a,verticalBuffer:l}){const u=Object(d.b)(r,this.props.locations),{displayLineNumberOptions:m,duplications:f,duplicationsByLine:b}=this.props,g=f?f.length:0,y=g&&b&&b[r.line]||[],v=s.some(e=>e.key===this.props.issue.key),O=c&&c.length?c[0].line:0,k=()=>{};return i.createElement(p.a,{branchLike:this.props.branchLike,displayAllIssues:!1,displayCoverage:!0,displayDuplications:e,displayIssues:!v||s.length>1,displayLineNumberOptions:m,displayLocationMarkers:!0,displaySCM:t,duplications:y,duplicationsCount:g,firstLineNumber:O,highlighted:!1,highlightedLocationMessage:Object(h.b)(this.props.highlightedLocationMessage,u),highlightedSymbols:Object(h.a)(a,this.props.highlightedSymbols),issueLocations:o,issuePopup:this.props.issuePopup,issues:s,key:r.line,last:!1,line:r,loadDuplications:this.props.loadDuplications||k,onIssueChange:this.props.onIssueChange,onIssuePopupToggle:this.props.onIssuePopupToggle,onIssueSelect:k,onIssueUnselect:k,onIssuesClose:this.props.handleCloseIssues,onIssuesOpen:this.props.handleOpenIssues,onLocationSelect:this.props.onLocationSelect,onSymbolClick:this.props.handleSymbolClick,openIssues:this.props.openIssuesByLine[r.line],previousLine:n>0?c[n-1]:void 0,renderDuplicationPopup:this.props.renderDuplicationPopup,scroll:this.doScroll,secondaryIssueLocations:u,selectedIssue:Object(h.c)(this.props.issue.key,s),verticalBuffer:l})}render(){const{component:e,displaySCM:t,issue:n,issuesByLine:s={},lastSnippetOfLastGroup:r,locationsByLine:l,openIssuesByLine:p,snippet:d}=this.props,h=e.measures&&e.measures.lines&&parseInt(e.measures.lines,10),f=Object(u.e)(d),b=d[d.length-1].line,g=n.textRange?n.textRange.endLine:n.line,y=Math.max(...Object.keys(s).map(e=>parseInt(e,10)).filter(e=>Object(m.g)(e,d)&&(e===g||p[e]))),v=r?Math.max(0,m.b-(b-y)):0,O=Boolean(this.props.loadDuplications)&&d.some(e=>!!e.duplicated);return i.createElement("div",{className:"source-viewer-code snippet",ref:this.snippetNodeRef},i.createElement("div",null,d[0].line>1&&i.createElement("div",{className:"expand-block expand-block-above"},i.createElement("button",{"aria-label":Object(a.translate)("source_viewer.expand_above"),onClick:this.expandBlock("up"),type:"button"},i.createElement(c.a,null))),i.createElement("table",{className:o()("source-table",{"expand-up":d[0].line>1,"expand-down":!h||d[d.length-1].line<h})},i.createElement("tbody",null,d.map((e,n)=>this.renderLine({displayDuplications:O,displaySCM:t,index:n,issuesForLine:s[e.line]||[],issueLocations:l[e.line]||[],line:e,snippet:d,symbols:f[e.line],verticalBuffer:n===d.length-1?v:0})))),(!h||d[d.length-1].line<h)&&i.createElement("div",{className:"expand-block expand-block-below"},i.createElement("button",{"aria-label":Object(a.translate)("source_viewer.expand_below"),onClick:this.expandBlock("down"),type:"button"},i.createElement(c.a,null)))))}}},859:function(e,t,n){var s=n(313),o=n(860);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var i={insert:"head",singleton:!1},r=(s(o,i),o.locals?o.locals:{});e.exports=r},860:function(e,t,n){(t=n(314)(!1)).push([e.i,'.snippet{margin:8px;border:1px solid #cdcdcd;overflow-x:auto;overflow-y:hidden;transition:max-height .2s}.snippet>div{display:table;width:100%;position:relative;transition:margin-top .2s}.snippet table{width:100%}.expand-block{position:absolute;z-index:2;width:100%}.expand-block>button{background:transparent;box-sizing:border-box;color:#666;height:20px;width:100%;padding:2px;border:0;text-align:left;cursor:pointer}.expand-block>button:active,.expand-block>button:focus,.expand-block>button:hover{color:#236a97;outline:none}.expand-block-above{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAAXNSR0IArs4c6QAAADdJREFUCB1dzMEKADAIAlBd1v9/bcc2YgRjHh8qq2qTxCQzsX4wM6y30RARF3sy0Es1SIK7Y64OpCES1W69JS4AAAAASUVORK5CYII=");top:0}.expand-block-below{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4wQQBjQEQVd5jwAAADhJREFUCNddyTEKADEMA8GVA/7/Z+PGwUp1cGTaYe/tv5lxrLWoKj6SiMzkjZDEG7JtANt0N+ccLrB/KZxXTt7fAAAAAElFTkSuQmCC");bottom:0}.source-table.expand-up{margin-top:20px}.source-table.expand-down{margin-bottom:20px}',""]),e.exports=t},976:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var s=n(330),o=n.n(s),i=n(384),r=n.n(i),c=n(2),a=n(318),l=n(345),p=n.n(l),u=n(322),d=n(31),h=n(406),m=n(328),f=n(321);class b extends c.PureComponent{constructor(){super(...arguments),this.isDifferentComponent=(e,t)=>Boolean(e&&t&&(e.project!==t.project||e.subProject!==t.subProject)),this.handleFileClick=e=>{e.preventDefault(),e.currentTarget.blur();const{key:t,line:n}=e.currentTarget.dataset;this.shouldLink()&&t&&this.props.openComponent({branchLike:this.props.branchLike,key:t,line:n?Number(n):void 0})}}shouldLink(){const{branchLike:e}=this.props;return!Object(m.h)(e)}renderDuplication(e,t,n){return this.shouldLink()?c.createElement("a",{"data-key":e.key,"data-line":n,href:"#",onClick:this.handleFileClick,title:e.name},t):t}render(){const{duplicatedFiles:e={},sourceViewerFile:t}=this.props,n=r()(this.props.blocks,"_ref");let s=Object.keys(n).map(t=>({blocks:n[t],file:e[t]}));return s=o()(s,e=>e.file.projectName!==t.projectName,e=>e.file.subProjectName!==t.subProjectName,e=>e.file.key!==t.key),c.createElement("div",{className:"source-viewer-bubble-popup abs-width-400"},this.props.inRemovedComponent&&c.createElement(u.Alert,{variant:"warning"},Object(d.translate)("duplications.dups_found_on_deleted_resource")),s.length>0&&c.createElement(c.Fragment,null,c.createElement("h6",{className:"spacer-bottom"},Object(d.translate)("component_viewer.transition.duplication")),s.map(e=>c.createElement("div",{className:"spacer-top text-ellipsis",key:e.file.key},c.createElement("div",{className:"component-name"},this.isDifferentComponent(e.file,this.props.sourceViewerFile)&&c.createElement(c.Fragment,null,c.createElement("div",{className:"component-name-parent"},c.createElement(p.a,{className:"little-spacer-right",qualifier:"TRK"}),c.createElement(a.c,{to:Object(f.v)(e.file.project)},e.file.projectName)),e.file.subProject&&e.file.subProjectName&&c.createElement("div",{className:"component-name-parent"},c.createElement(p.a,{className:"little-spacer-right",qualifier:"BRC"}),e.file.subProjectName)),e.file.key!==this.props.sourceViewerFile.key&&c.createElement("div",{className:"component-name-path"},this.renderDuplication(e.file,c.createElement(c.Fragment,null,c.createElement("span",null,Object(h.collapsedDirFromPath)(e.file.name)),c.createElement("span",{className:"component-name-file"},Object(h.fileFromPath)(e.file.name))))),c.createElement("div",{className:"component-name-path"},"Lines: ",e.blocks.map((t,n)=>c.createElement(c.Fragment,{key:n},this.renderDuplication(e.file,c.createElement(c.Fragment,null,t.from," – ",t.from+t.size-1),t.from),n<e.blocks.length-1&&", "))))))))}}},977:function(e,t,n){"use strict";function s(e,t){let n=!1;return e.filter(e=>{const s=e.from>t||e.from+e.size<t,o=!("1"===e._ref)||(s||n),i=void 0!==e._ref&&o;return"1"!==e._ref||s||(n=!0),i})}function o(e,t){return e&&e[t]&&e[t].blocks||[]}function i(e){return e.some(e=>void 0===e._ref)}n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i}))}}]);
//# sourceMappingURL=286.m.de3aad75.chunk.js.map