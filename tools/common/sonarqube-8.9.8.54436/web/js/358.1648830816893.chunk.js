(window.webpackJsonp=window.webpackJsonp||[]).push([[358],{1046:function(e,t,a){var n=a(700),r=a(764),i=a(678),o=a(720),c=a(696),s=a(1016),l=o((function(e,t){var a=s(t);return c(a)&&(a=void 0),c(e)?n(e,r(t,1,c,!0),i(a,2)):[]}));e.exports=l},2218:function(e,t,a){"use strict";a.r(t),a.d(t,"PullRequestOverview",(function(){return A}));var n=a(805),r=a.n(n),i=a(1046),o=a.n(i),c=a(660),s=a(13),l=a(674),m=a(672),u=a.n(m),d=a(671),p=a(176),v=a(750),f=a(894),h=a(677),b=a(707),g=a(859),y=a(676),E=a(1017),w=a(1491),O=a(1492),N=a(1490),_=a(1510),j=(a(1489),a(1004)),k=a(669);var x=s.memo((function(e){var t=e.className,a=e.measures,n=e.type,r=Object(j.i)(n),i=Object(b.findMeasure)(a,r);return i&&void 0!==i.value?s.createElement("div",{className:c(t,"display-flex-center")},s.createElement("span",{className:"huge"},Object(k.formatMeasure)(i.value,"PERCENT")),s.createElement("span",{className:"label flex-1 spacer-left text-right"},Object(p.translate)("component_measures.facet_category.overall_category.estimated"))):null})),D=a(665),q=a(667),B=a(729),C=a.n(B),M=a(698),R=a(670);var S,L=s.memo((function(e){var t=e.component,a=e.level,n="OK"===a,r=void 0===t.qualityGate?Object(R.y)():Object(R.x)(t.qualityGate.key);return s.createElement("div",{className:c("overview-quality-gate-badge-large small",{failed:!n,success:n})},s.createElement("div",{className:"display-flex-center"},s.createElement("span",null,Object(p.translate)("overview.on_new_code_long")),s.createElement(u.a,{className:"little-spacer-left",overlay:s.createElement(D.FormattedMessage,{defaultMessage:Object(p.translate)("overview.quality_gate.conditions_on_new_code"),id:"overview.quality_gate.conditions_on_new_code",values:{link:s.createElement(q.c,{to:r},Object(p.translate)("overview.quality_gate"))}})},s.createElement(C.a,{fill:M.colors.transparentWhite,size:12}))),void 0!==a&&s.createElement("h3",{className:"huge-spacer-top huge"},Object(p.translate)("metric.level",a)))})),P=(S=function(e,t){return(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}S(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),W=function(){for(var e=0,t=0,a=arguments.length;t<a;t++)e+=arguments[t].length;var n=Array(e),r=0;for(t=0;t<a;t++)for(var i=arguments[t],o=0,c=i.length;o<c;o++,r++)n[r]=i[o];return n},A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={loading:!1,measures:[]},t.conditionsHaveChanged=function(e){var a,n,r=null!==(a=e.conditions)&&void 0!==a?a:[],i=null!==(n=t.props.conditions)&&void 0!==n?n:[],c=o()(r.filter((function(e){return"ERROR"===e.level})),i.filter((function(e){return"ERROR"===e.level})),(function(e){return e.metric}));return void 0===e.conditions&&void 0!==t.props.conditions||c.length>0},t.fetchBranchStatusData=function(){var e=t.props,a=e.branchLike,n=e.component.key;t.props.fetchBranchStatus(a,n)},t.fetchBranchData=function(){var e=t.props,a=e.branchLike,n=e.component.key,i=e.conditions;t.setState({loading:!0});var o=void 0!==i?r()(W(j.d,i.filter((function(e){return"OK"!==e.level})).map((function(e){return e.metric})))):j.d;Object(f.f)(n,o,Object(h.d)(a)).then((function(e){var a=e.component,n=e.metrics;t.mounted&&a.measures&&t.setState({loading:!1,measures:Object(b.enhanceMeasuresWithMetrics)(a.measures||[],n)})}),(function(){t.mounted&&t.setState({loading:!1})}))},t}return P(t,e),t.prototype.componentDidMount=function(){this.mounted=!0,void 0===this.props.conditions?this.fetchBranchStatusData():this.fetchBranchData()},t.prototype.componentDidUpdate=function(e){this.conditionsHaveChanged(e)&&this.fetchBranchData()},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=this.props,t=e.branchLike,a=e.component,n=e.conditions,r=e.ignoredConditions,i=e.status,o=this.state,l=o.loading,m=o.measures;if(l)return s.createElement("div",{className:"page page-limited"},s.createElement("i",{className:"spinner"}));if(void 0===n)return null;var f=n.filter((function(e){return"ERROR"===e.level})).map((function(e){return Object(b.enhanceConditionWithMeasure)(e,m)})).filter(v.isDefined);return s.createElement("div",{className:"page page-limited"},s.createElement("div",{className:c("pr-overview",{"has-conditions":f.length>0})},r&&s.createElement(d.Alert,{className:"big-spacer-bottom",display:"inline",variant:"info"},s.createElement("span",{className:"text-middle"},Object(p.translate)("overview.quality_gate.ignored_conditions")),s.createElement(u.a,{className:"spacer-left",overlay:Object(p.translate)("overview.quality_gate.ignored_conditions.tooltip")})),s.createElement("div",{className:"display-flex-row"},s.createElement("div",{className:"big-spacer-right"},s.createElement("h2",{className:"overview-panel-title spacer-bottom small display-inline-flex-center"},Object(p.translate)("overview.quality_gate"),s.createElement(u.a,{className:"little-spacer-left",overlay:s.createElement("div",{className:"big-padded-top big-padded-bottom"},Object(p.translate)("overview.quality_gate.help"))})),s.createElement(L,{component:a,level:i})),f.length>0&&s.createElement("div",{className:"pr-overview-failed-conditions big-spacer-right"},s.createElement("h2",{className:"overview-panel-title spacer-bottom small"},Object(p.translate)("overview.failed_conditions")),s.createElement(_.b,{branchLike:t,collapsible:!0,component:a,failedConditions:f})),s.createElement("div",{className:"flex-1"},s.createElement("h2",{className:"overview-panel-title spacer-bottom small"},Object(p.translate)("overview.measures")),s.createElement("div",{className:"overview-panel-content"},[E.b.Bug,E.b.Vulnerability,E.b.SecurityHotspot,E.b.CodeSmell].map((function(e){return s.createElement("div",{className:"overview-measures-row display-flex-row",key:e},s.createElement("div",{className:"overview-panel-big-padded flex-1 small display-flex-center"},s.createElement(w.a,{branchLike:t,component:a,measures:m,type:e,useDiffMetric:!0})),s.createElement("div",{className:"overview-panel-big-padded overview-measures-aside display-flex-center"},s.createElement(O.a,{branchLike:t,component:a,measures:m,type:e,useDiffMetric:!0})))})),[j.c.Coverage,j.c.Duplication].map((function(e){return s.createElement("div",{className:"overview-measures-row display-flex-row",key:e},s.createElement("div",{className:"overview-panel-big-padded flex-1 small display-flex-center"},s.createElement(N.a,{branchLike:t,component:a,measures:m,type:e,useDiffMetric:!0})),s.createElement(x,{className:"overview-panel-big-padded overview-measures-aside text-right overview-measures-emphasis",measures:m,type:e}))})))))))},t}(s.PureComponent),H={fetchBranchStatus:g.c};t.default=Object(l.b)((function(e,t){var a=t.branchLike,n=t.component,r=Object(y.getBranchStatusByBranchLike)(e,n.key,a);return{conditions:r.conditions,ignoredConditions:r.ignoredConditions,status:r.status}}),H)(A)}}]);
//# sourceMappingURL=358.1648830816893.chunk.js.map