{"version":3,"sources":["webpack:///./src/main/js/apps/permissions/global/components/AllHoldersList.tsx","webpack:///./src/main/js/apps/permissions/global/components/PageHeader.tsx","webpack:///./src/main/js/apps/permissions/global/components/App.tsx","webpack:///./node_modules/sonar-ui-common/components/controls/HelpTooltip.js","webpack:///./node_modules/sonar-ui-common/components/controls/Checkbox.js","webpack:///./src/main/js/app/components/embed-docs-modal/Suggestions.tsx","webpack:///./node_modules/sonar-ui-common/components/controls/HelpTooltip.css?2512","webpack:///./node_modules/sonar-ui-common/components/controls/HelpTooltip.css","webpack:///./node_modules/lodash/isArrayLikeObject.js","webpack:///./node_modules/lodash/without.js","webpack:///./node_modules/sonar-ui-common/components/controls/ListFooter.js","webpack:///./node_modules/lodash/_baseDifference.js","webpack:///./node_modules/sonar-ui-common/components/controls/Checkbox.css?7974","webpack:///./node_modules/sonar-ui-common/components/controls/Checkbox.css","webpack:///./node_modules/sonar-ui-common/components/controls/RadioToggle.js","webpack:///./node_modules/sonar-ui-common/components/controls/RadioToggle.css?35f6","webpack:///./node_modules/sonar-ui-common/components/controls/RadioToggle.css","webpack:///./src/main/js/apps/permissions/utils.ts","webpack:///./src/main/js/api/permissions.ts","webpack:///./node_modules/lodash/partition.js","webpack:///./node_modules/sonar-ui-common/components/icons/GroupIcon.js","webpack:///./src/main/js/apps/permissions/styles.css?a730","webpack:///./src/main/js/apps/permissions/styles.css","webpack:///./src/main/js/apps/permissions/shared/components/SearchForm.tsx","webpack:///./src/main/js/apps/permissions/shared/components/PermissionCell.tsx","webpack:///./src/main/js/apps/permissions/shared/components/GroupHolder.tsx","webpack:///./src/main/js/apps/permissions/shared/components/PermissionHeader.tsx","webpack:///./src/main/js/apps/permissions/shared/components/UserHolder.tsx","webpack:///./src/main/js/apps/permissions/shared/components/HoldersList.tsx"],"names":["handleToggleUser","user","permission","permissions","includes","this","props","revokePermissionFromUser","login","grantPermissionToUser","handleToggleGroup","group","revokePermissionFromGroup","name","grantPermissionToGroup","appState","filter","groups","groupsPaging","users","usersPaging","hasPortfoliosEnabled","qualifiers","Portfolio","hasApplicationsEnabled","Application","count","total","length","HoldersList","loading","onToggleGroup","onToggleUser","query","SearchForm","onFilter","onSearch","loadMore","onLoadMore","state","className","super","mounted","loadUsersAndGroups","userPage","groupsPage","getUsers","q","undefined","p","Promise","resolve","paging","getGroups","all","loadHolders","setState","then","usersResponse","groupsResponse","stopLoading","pageIndex","addPermissionToGroup","map","candidate","addPermissionToUser","removePermissionFromGroup","removePermissionFromUser","groupName","Suggestions","suggestions","defer","title","__assign","Object","assign","t","s","i","n","arguments","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","defineProperty","exports","value","classNames","React","HelpIcon_1","theme_1","Tooltip_1","HelpTooltip","_a","_b","size","createElement","default","mouseLeaveDelay","onShow","overlay","placement","children","ThemeConsumer","theme","fill","colors","gray71","DarkHelpTooltip","transparentBlack","fillInner","white","extendStatics","__extends","d","b","setPrototypeOf","__proto__","Array","__","constructor","create","DeferredSpinner_1","Checkbox","_super","_this","handleClick","event","preventDefault","currentTarget","blur","disabled","onCheck","checked","id","render","right","thirdState","note","href","onClick","role","Boolean","defaultProps","PureComponent","Consumer","addSuggestions","removeSuggestions","SuggestionsInner","prevProps","api","content","__esModule","module","options","exported","locals","___CSS_LOADER_API_IMPORT___","push","isArrayLike","isObjectLike","baseDifference","baseRest","isArrayLikeObject","without","array","values","l10n_1","measures_1","buttons_1","button","needReload","ready","hasMore","reload","Button","translate","translateWithParameters","formatMeasure","SetCache","arrayIncludes","arrayIncludesWith","arrayMap","baseUnary","cacheHas","iteratee","comparator","index","isCommon","result","valuesLength","outer","computed","valuesIndex","RadioToggle","renderOption","option","htmlId","key","toString","onChange","type","tooltip","htmlFor","label","PERMISSIONS_ORDER_FOR_PROJECT_TEMPLATE","PERMISSIONS_ORDER_GLOBAL","category","PERMISSIONS_ORDER_FOR_VIEW","PERMISSIONS_ORDER_BY_QUALIFIER","TRK","VW","SVW","APP","DEV","convertToPermissionDefinition","l10nPrefix","getMessage","messageKey","cloudMessageKey","description","filterPermissions","convertToPermissionDefinitions","isPermissionDefinitionGroup","data","catch","getPermissionTemplates","createPermissionTemplate","updatePermissionTemplate","deletePermissionTemplate","setDefaultPermissionTemplate","templateId","qualifier","applyTemplateToProject","bulkApplyTemplate","grantTemplatePermissionToUser","revokeTemplatePermissionFromUser","grantTemplatePermissionToGroup","revokeTemplatePermissionFromGroup","addProjectCreatorToTemplate","removeProjectCreatorFromTemplate","getPermissionsUsersForComponent","ps","getPermissionsGroupsForComponent","getGlobalPermissionsUsers","getGlobalPermissionsGroups","getPermissionTemplateUsers","r","getPermissionTemplateGroups","changeProjectVisibility","project","visibility","changeProjectDefaultVisibility","projectVisibility","partition","createAggregator","Icon_1","iconProps","ThemedIcon","viewBox","transform","style","gray67","filterOptions","minLength","placeholder","permissionItem","selectedPermission","selected","handleCheck","_checked","onToggle","whiteSpace","handlePermissionClick","onSelectPermission","getTooltipOverlay","InstanceMessage","message","showPublicProjectsWarning","Alert","variant","permissionCells","Avatar","hash","avatar","email","initialPermissionsCount","handleGroupToggle","handleUserToggle","getItemInitialPermissionsCount","item","isPermissionUser","columns","colSpan","items","itemWithPermissions","itemWithoutPermissions","renderEmpty","renderItem"],"mappings":"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","file":"js/293.m.38ef94c3.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport ListFooter from 'sonar-ui-common/components/controls/ListFooter';\nimport { getAppState, Store } from '../../../../store/rootReducer';\nimport { ComponentQualifier } from '../../../../types/component';\nimport HoldersList from '../../shared/components/HoldersList';\nimport SearchForm from '../../shared/components/SearchForm';\nimport {\n  convertToPermissionDefinitions,\n  filterPermissions,\n  PERMISSIONS_ORDER_GLOBAL\n} from '../../utils';\n\ninterface StateProps {\n  appState: Pick<T.AppState, 'qualifiers'>;\n}\n\ninterface OwnProps {\n  filter: string;\n  grantPermissionToGroup: (groupName: string, permission: string) => Promise<void>;\n  grantPermissionToUser: (login: string, permission: string) => Promise<void>;\n  groups: T.PermissionGroup[];\n  groupsPaging?: T.Paging;\n  loadHolders: () => void;\n  loading?: boolean;\n  onLoadMore: () => void;\n  onFilter: (filter: string) => void;\n  onSearch: (query: string) => void;\n  query: string;\n  revokePermissionFromGroup: (groupName: string, permission: string) => Promise<void>;\n  revokePermissionFromUser: (login: string, permission: string) => Promise<void>;\n  users: T.PermissionUser[];\n  usersPaging?: T.Paging;\n}\n\ntype Props = StateProps & OwnProps;\n\nexport class AllHoldersList extends React.PureComponent<Props> {\n  handleToggleUser = (user: T.PermissionUser, permission: string) => {\n    const hasPermission = user.permissions.includes(permission);\n    if (hasPermission) {\n      return this.props.revokePermissionFromUser(user.login, permission);\n    } else {\n      return this.props.grantPermissionToUser(user.login, permission);\n    }\n  };\n\n  handleToggleGroup = (group: T.PermissionGroup, permission: string) => {\n    const hasPermission = group.permissions.includes(permission);\n\n    if (hasPermission) {\n      return this.props.revokePermissionFromGroup(group.name, permission);\n    } else {\n      return this.props.grantPermissionToGroup(group.name, permission);\n    }\n  };\n\n  render() {\n    const { appState, filter, groups, groupsPaging, users, usersPaging } = this.props;\n    const l10nPrefix = 'global_permissions';\n\n    const hasPortfoliosEnabled = appState.qualifiers.includes(ComponentQualifier.Portfolio);\n    const hasApplicationsEnabled = appState.qualifiers.includes(ComponentQualifier.Application);\n    const permissions = convertToPermissionDefinitions(\n      filterPermissions(PERMISSIONS_ORDER_GLOBAL, hasApplicationsEnabled, hasPortfoliosEnabled),\n      l10nPrefix\n    );\n\n    let count = 0;\n    let total = 0;\n    if (filter !== 'users') {\n      count += groups.length;\n      total += groupsPaging ? groupsPaging.total : groups.length;\n    }\n    if (filter !== 'groups') {\n      count += users.length;\n      total += usersPaging ? usersPaging.total : users.length;\n    }\n\n    return (\n      <>\n        <HoldersList\n          filter={this.props.filter}\n          groups={this.props.groups}\n          loading={this.props.loading}\n          onToggleGroup={this.handleToggleGroup}\n          onToggleUser={this.handleToggleUser}\n          permissions={permissions}\n          query={this.props.query}\n          users={this.props.users}>\n          <SearchForm\n            filter={this.props.filter}\n            onFilter={this.props.onFilter}\n            onSearch={this.props.onSearch}\n            query={this.props.query}\n          />\n        </HoldersList>\n        <ListFooter count={count} loadMore={this.props.onLoadMore} total={total} />\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = (state: Store): StateProps => ({\n  appState: getAppState(state)\n});\n\nexport default connect(mapStateToProps)(AllHoldersList);\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  loading?: boolean;\n}\n\nexport default class PageHeader extends React.PureComponent<Props> {\n  render() {\n    return (\n      <header className=\"page-header\">\n        <h1 className=\"page-title\">{translate('global_permissions.page')}</h1>\n\n        {this.props.loading && <i className=\"spinner\" />}\n\n        <div className=\"page-description\">{translate('global_permissions.page.description')}</div>\n      </header>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { without } from 'lodash';\nimport * as React from 'react';\nimport { Helmet } from 'react-helmet-async';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport * as api from '../../../../api/permissions';\nimport Suggestions from '../../../../app/components/embed-docs-modal/Suggestions';\nimport '../../styles.css';\nimport AllHoldersList from './AllHoldersList';\nimport PageHeader from './PageHeader';\n\ninterface State {\n  filter: 'all' | 'groups' | 'users';\n  groups: T.PermissionGroup[];\n  groupsPaging?: T.Paging;\n  loading: boolean;\n  query: string;\n  users: T.PermissionUser[];\n  usersPaging?: T.Paging;\n}\n\nexport default class App extends React.PureComponent<{}, State> {\n  mounted = false;\n\n  constructor(props: {}) {\n    super(props);\n    this.state = {\n      filter: 'all',\n      groups: [],\n      loading: true,\n      query: '',\n      users: []\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.loadHolders();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadUsersAndGroups = (userPage?: number, groupsPage?: number) => {\n    const { filter, query } = this.state;\n\n    const getUsers: Promise<{ paging?: T.Paging; users: T.PermissionUser[] }> =\n      filter !== 'groups'\n        ? api.getGlobalPermissionsUsers({\n            q: query || undefined,\n            p: userPage\n          })\n        : Promise.resolve({ paging: undefined, users: [] });\n\n    const getGroups: Promise<{ paging?: T.Paging; groups: T.PermissionGroup[] }> =\n      filter !== 'users'\n        ? api.getGlobalPermissionsGroups({\n            q: query || undefined,\n            p: groupsPage\n          })\n        : Promise.resolve({ paging: undefined, groups: [] });\n\n    return Promise.all([getUsers, getGroups]);\n  };\n\n  loadHolders = () => {\n    this.setState({ loading: true });\n    return this.loadUsersAndGroups().then(([usersResponse, groupsResponse]) => {\n      if (this.mounted) {\n        this.setState({\n          groups: groupsResponse.groups,\n          groupsPaging: groupsResponse.paging,\n          loading: false,\n          users: usersResponse.users,\n          usersPaging: usersResponse.paging\n        });\n      }\n    }, this.stopLoading);\n  };\n\n  onLoadMore = () => {\n    const { usersPaging, groupsPaging } = this.state;\n    this.setState({ loading: true });\n    return this.loadUsersAndGroups(\n      usersPaging ? usersPaging.pageIndex + 1 : 1,\n      groupsPaging ? groupsPaging.pageIndex + 1 : 1\n    ).then(([usersResponse, groupsResponse]) => {\n      if (this.mounted) {\n        this.setState(({ groups, users }) => ({\n          groups: [...groups, ...groupsResponse.groups],\n          groupsPaging: groupsResponse.paging,\n          loading: false,\n          users: [...users, ...usersResponse.users],\n          usersPaging: usersResponse.paging\n        }));\n      }\n    }, this.stopLoading);\n  };\n\n  onFilter = (filter: 'all' | 'groups' | 'users') => {\n    this.setState({ filter }, this.loadHolders);\n  };\n\n  onSearch = (query: string) => {\n    this.setState({ query }, this.loadHolders);\n  };\n\n  addPermissionToGroup = (groups: T.PermissionGroup[], group: string, permission: string) => {\n    return groups.map(candidate =>\n      candidate.name === group\n        ? { ...candidate, permissions: [...candidate.permissions, permission] }\n        : candidate\n    );\n  };\n\n  addPermissionToUser = (users: T.PermissionUser[], user: string, permission: string) => {\n    return users.map(candidate =>\n      candidate.login === user\n        ? { ...candidate, permissions: [...candidate.permissions, permission] }\n        : candidate\n    );\n  };\n\n  removePermissionFromGroup = (groups: T.PermissionGroup[], group: string, permission: string) => {\n    return groups.map(candidate =>\n      candidate.name === group\n        ? { ...candidate, permissions: without(candidate.permissions, permission) }\n        : candidate\n    );\n  };\n\n  removePermissionFromUser = (users: T.PermissionUser[], user: string, permission: string) => {\n    return users.map(candidate =>\n      candidate.login === user\n        ? { ...candidate, permissions: without(candidate.permissions, permission) }\n        : candidate\n    );\n  };\n\n  grantPermissionToGroup = (group: string, permission: string) => {\n    if (this.mounted) {\n      this.setState(({ groups }) => ({\n        groups: this.addPermissionToGroup(groups, group, permission)\n      }));\n      return api\n        .grantPermissionToGroup({\n          groupName: group,\n          permission\n        })\n        .then(\n          () => {},\n          () => {\n            if (this.mounted) {\n              this.setState(({ groups }) => ({\n                groups: this.removePermissionFromGroup(groups, group, permission)\n              }));\n            }\n          }\n        );\n    }\n    return Promise.resolve();\n  };\n\n  grantPermissionToUser = (user: string, permission: string) => {\n    if (this.mounted) {\n      this.setState(({ users }) => ({\n        users: this.addPermissionToUser(users, user, permission)\n      }));\n      return api\n        .grantPermissionToUser({\n          login: user,\n          permission\n        })\n        .then(\n          () => {},\n          () => {\n            if (this.mounted) {\n              this.setState(({ users }) => ({\n                users: this.removePermissionFromUser(users, user, permission)\n              }));\n            }\n          }\n        );\n    }\n    return Promise.resolve();\n  };\n\n  revokePermissionFromGroup = (group: string, permission: string) => {\n    if (this.mounted) {\n      this.setState(({ groups }) => ({\n        groups: this.removePermissionFromGroup(groups, group, permission)\n      }));\n      return api\n        .revokePermissionFromGroup({\n          groupName: group,\n          permission\n        })\n        .then(\n          () => {},\n          () => {\n            if (this.mounted) {\n              this.setState(({ groups }) => ({\n                groups: this.addPermissionToGroup(groups, group, permission)\n              }));\n            }\n          }\n        );\n    }\n    return Promise.resolve();\n  };\n\n  revokePermissionFromUser = (user: string, permission: string) => {\n    if (this.mounted) {\n      this.setState(({ users }) => ({\n        users: this.removePermissionFromUser(users, user, permission)\n      }));\n      return api\n        .revokePermissionFromUser({\n          login: user,\n          permission\n        })\n        .then(\n          () => {},\n          () => {\n            if (this.mounted) {\n              this.setState(({ users }) => ({\n                users: this.addPermissionToUser(users, user, permission)\n              }));\n            }\n          }\n        );\n    }\n    return Promise.resolve();\n  };\n\n  stopLoading = () => {\n    if (this.mounted) {\n      this.setState({ loading: false });\n    }\n  };\n\n  render() {\n    return (\n      <div className=\"page page-limited\">\n        <Suggestions suggestions=\"global_permissions\" />\n        <Helmet defer={false} title={translate('global_permissions.permission')} />\n        <PageHeader loading={this.state.loading} />\n        <AllHoldersList\n          filter={this.state.filter}\n          grantPermissionToGroup={this.grantPermissionToGroup}\n          grantPermissionToUser={this.grantPermissionToUser}\n          groups={this.state.groups}\n          groupsPaging={this.state.groupsPaging}\n          loadHolders={this.loadHolders}\n          loading={this.state.loading}\n          onFilter={this.onFilter}\n          onLoadMore={this.onLoadMore}\n          onSearch={this.onSearch}\n          query={this.state.query}\n          revokePermissionFromGroup={this.revokePermissionFromGroup}\n          revokePermissionFromUser={this.revokePermissionFromUser}\n          users={this.state.users}\n          usersPaging={this.state.usersPaging}\n        />\n      </div>\n    );\n  }\n}\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar classNames = require(\"classnames\");\nvar React = require(\"react\");\nvar HelpIcon_1 = require(\"../icons/HelpIcon\");\nvar theme_1 = require(\"../theme\");\nrequire(\"./HelpTooltip.css\");\nvar Tooltip_1 = require(\"./Tooltip\");\nfunction HelpTooltip(_a) {\n    var _b = _a.size, size = _b === void 0 ? 12 : _b, props = __rest(_a, [\"size\"]);\n    return (React.createElement(\"div\", { className: classNames('help-tooltip', props.className) },\n        React.createElement(Tooltip_1.default, { mouseLeaveDelay: 0.25, onShow: props.onShow, overlay: props.overlay, placement: props.placement },\n            React.createElement(\"span\", { className: \"display-inline-flex-center\" }, props.children || (React.createElement(theme_1.ThemeConsumer, null, function (theme) { return React.createElement(HelpIcon_1.default, { fill: theme.colors.gray71, size: size }); }))))));\n}\nexports.default = HelpTooltip;\nfunction DarkHelpTooltip(_a) {\n    var _b = _a.size, size = _b === void 0 ? 12 : _b, props = __rest(_a, [\"size\"]);\n    return (React.createElement(HelpTooltip, __assign({}, props),\n        React.createElement(theme_1.ThemeConsumer, null, function (_a) {\n            var colors = _a.colors;\n            return (React.createElement(HelpIcon_1.default, { fill: colors.transparentBlack, fillInner: colors.white, size: size }));\n        })));\n}\nexports.DarkHelpTooltip = DarkHelpTooltip;\n//# sourceMappingURL=HelpTooltip.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar classNames = require(\"classnames\");\nvar React = require(\"react\");\nvar DeferredSpinner_1 = require(\"../ui/DeferredSpinner\");\nrequire(\"./Checkbox.css\");\nvar Checkbox = (function (_super) {\n    __extends(Checkbox, _super);\n    function Checkbox() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.handleClick = function (event) {\n            event.preventDefault();\n            event.currentTarget.blur();\n            if (!_this.props.disabled) {\n                _this.props.onCheck(!_this.props.checked, _this.props.id);\n            }\n        };\n        return _this;\n    }\n    Checkbox.prototype.render = function () {\n        var _a = this.props, checked = _a.checked, children = _a.children, disabled = _a.disabled, id = _a.id, loading = _a.loading, right = _a.right, thirdState = _a.thirdState, title = _a.title;\n        var className = classNames('icon-checkbox', {\n            'icon-checkbox-checked': checked,\n            'icon-checkbox-single': thirdState,\n            'icon-checkbox-disabled': disabled,\n        });\n        if (children) {\n            return (React.createElement(\"a\", { \"aria-checked\": checked, className: classNames('link-checkbox', this.props.className, {\n                    note: disabled,\n                    disabled: disabled,\n                }), href: \"#\", id: id, onClick: this.handleClick, role: \"checkbox\", title: title },\n                right && children,\n                React.createElement(DeferredSpinner_1.default, { loading: Boolean(loading) },\n                    React.createElement(\"i\", { className: className })),\n                !right && children));\n        }\n        if (loading) {\n            return React.createElement(DeferredSpinner_1.default, null);\n        }\n        return (React.createElement(\"a\", { \"aria-checked\": checked, className: classNames(className, this.props.className), href: \"#\", id: id, onClick: this.handleClick, role: \"checkbox\", title: title }));\n    };\n    Checkbox.defaultProps = {\n        thirdState: false,\n    };\n    return Checkbox;\n}(React.PureComponent));\nexports.default = Checkbox;\n//# sourceMappingURL=Checkbox.js.map","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { SuggestionsContext } from './SuggestionsContext';\n\ninterface Props {\n  suggestions: string;\n}\n\nexport default function Suggestions({ suggestions }: Props) {\n  return (\n    <SuggestionsContext.Consumer>\n      {({ addSuggestions, removeSuggestions }) => (\n        <SuggestionsInner\n          addSuggestions={addSuggestions}\n          removeSuggestions={removeSuggestions}\n          suggestions={suggestions}\n        />\n      )}\n    </SuggestionsContext.Consumer>\n  );\n}\n\ninterface SuggestionsInnerProps {\n  addSuggestions: (key: string) => void;\n  removeSuggestions: (key: string) => void;\n  suggestions: string;\n}\n\nclass SuggestionsInner extends React.PureComponent<SuggestionsInnerProps> {\n  componentDidMount() {\n    this.props.addSuggestions(this.props.suggestions);\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.suggestions !== this.props.suggestions) {\n      this.props.removeSuggestions(this.props.suggestions);\n      this.props.addSuggestions(prevProps.suggestions);\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.removeSuggestions(this.props.suggestions);\n  }\n\n  render() {\n    return null;\n  }\n}\n","var api = require(\"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../css-loader/dist/cjs.js??ref--6-1!../../../postcss-loader/src/index.js??postcss!./HelpTooltip.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".help-tooltip{display:inline-flex;align-items:center;vertical-align:middle}.help-toolip-link{display:block;width:12px;height:12px;border:none}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var isArrayLike = require('./isArrayLike'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\nmodule.exports = isArrayLikeObject;\n","var baseDifference = require('./_baseDifference'),\n    baseRest = require('./_baseRest'),\n    isArrayLikeObject = require('./isArrayLikeObject');\n\n/**\n * Creates an array excluding all given values using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * **Note:** Unlike `_.pull`, this method returns a new array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {...*} [values] The values to exclude.\n * @returns {Array} Returns the new array of filtered values.\n * @see _.difference, _.xor\n * @example\n *\n * _.without([2, 1, 2, 3], 1, 2);\n * // => [3]\n */\nvar without = baseRest(function(array, values) {\n  return isArrayLikeObject(array)\n    ? baseDifference(array, values)\n    : [];\n});\n\nmodule.exports = without;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar classNames = require(\"classnames\");\nvar React = require(\"react\");\nvar l10n_1 = require(\"../../helpers/l10n\");\nvar measures_1 = require(\"../../helpers/measures\");\nvar DeferredSpinner_1 = require(\"../ui/DeferredSpinner\");\nvar buttons_1 = require(\"./buttons\");\nfunction ListFooter(props) {\n    var className = props.className, count = props.count, loading = props.loading, needReload = props.needReload, total = props.total, _a = props.ready, ready = _a === void 0 ? true : _a;\n    var hasMore = total && total > count;\n    var button;\n    if (needReload && props.reload) {\n        button = (React.createElement(buttons_1.Button, { className: \"spacer-left\", \"data-test\": \"reload\", disabled: loading, onClick: props.reload }, l10n_1.translate('reload')));\n    }\n    else if (hasMore && props.loadMore) {\n        button = (React.createElement(buttons_1.Button, { className: \"spacer-left\", disabled: loading, \"data-test\": \"show-more\", onClick: props.loadMore }, l10n_1.translate('show_more')));\n    }\n    return (React.createElement(\"footer\", { className: classNames('spacer-top note text-center', { 'new-loading': !ready }, className) },\n        l10n_1.translateWithParameters('x_of_y_shown', measures_1.formatMeasure(count, 'INT', null), measures_1.formatMeasure(total, 'INT', null)),\n        button,\n        loading && React.createElement(DeferredSpinner_1.default, { className: \"text-bottom spacer-left position-absolute\" })));\n}\nexports.default = ListFooter;\n//# sourceMappingURL=ListFooter.js.map","var SetCache = require('./_SetCache'),\n    arrayIncludes = require('./_arrayIncludes'),\n    arrayIncludesWith = require('./_arrayIncludesWith'),\n    arrayMap = require('./_arrayMap'),\n    baseUnary = require('./_baseUnary'),\n    cacheHas = require('./_cacheHas');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of methods like `_.difference` without support\n * for excluding multiple arrays or iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Array} values The values to exclude.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of filtered values.\n */\nfunction baseDifference(array, values, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      isCommon = true,\n      length = array.length,\n      result = [],\n      valuesLength = values.length;\n\n  if (!length) {\n    return result;\n  }\n  if (iteratee) {\n    values = arrayMap(values, baseUnary(iteratee));\n  }\n  if (comparator) {\n    includes = arrayIncludesWith;\n    isCommon = false;\n  }\n  else if (values.length >= LARGE_ARRAY_SIZE) {\n    includes = cacheHas;\n    isCommon = false;\n    values = new SetCache(values);\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee == null ? value : iteratee(value);\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var valuesIndex = valuesLength;\n      while (valuesIndex--) {\n        if (values[valuesIndex] === computed) {\n          continue outer;\n        }\n      }\n      result.push(value);\n    }\n    else if (!includes(values, computed, comparator)) {\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseDifference;\n","var api = require(\"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../css-loader/dist/cjs.js??ref--6-1!../../../postcss-loader/src/index.js??postcss!./Checkbox.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".icon-checkbox{display:inline-block;line-height:1;vertical-align:top;padding:1px 2px;box-sizing:border-box}a.icon-checkbox{border-bottom:none}.icon-checkbox:focus{outline:none}.icon-checkbox:before{content:\\\" \\\";display:inline-block;width:10px;height:10px;border:1px solid #236a97;border-radius:2px;transition:border-color .2s ease,background-color .2s ease,background-image .2s ease,box-shadow .4s ease}.icon-checkbox:not(.icon-checkbox-disabled):focus:before,.link-checkbox:not(.disabled):focus:focus .icon-checkbox:before{box-shadow:0 0 0 3px rgba(35,106,151,.25)}.icon-checkbox-checked:before{background-color:#4b9fd5;background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 14 14' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' clip-rule='evenodd' stroke-linejoin='round' stroke-miterlimit='1.414'%3E%3Cpath d='M12 4.665c0 .172-.06.318-.18.438l-5.55 5.55c-.12.12-.266.18-.438.18s-.318-.06-.438-.18L2.18 7.438C2.06 7.317 2 7.17 2 7s.06-.318.18-.44l.878-.876c.12-.12.267-.18.44-.18.17 0 .317.06.437.18l1.897 1.903 4.233-4.24c.12-.12.266-.18.438-.18s.32.06.44.18l.876.88c.12.12.18.265.18.438z' fill='%23fff' fill-rule='nonzero'/%3E%3C/svg%3E\\\");border-color:#4b9fd5}.icon-checkbox-checked.icon-checkbox-single:before{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 14 14' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' clip-rule='evenodd' stroke-linejoin='round' stroke-miterlimit='1.414'%3E%3Cpath d='M10 4.698A.697.697 0 0 0 9.302 4H4.698A.697.697 0 0 0 4 4.698v4.604c0 .386.312.698.698.698h4.604A.697.697 0 0 0 10 9.302V4.698z' fill='%23fff'/%3E%3C/svg%3E\\\")}.icon-checkbox-disabled:before{border:1px solid #bbb;cursor:not-allowed}.icon-checkbox-disabled.icon-checkbox-checked:before{background-color:#bbb}.icon-checkbox-invisible{visibility:hidden}.link-checkbox{color:inherit;border-bottom:none}.link-checkbox.disabled,.link-checkbox.disabled:hover,.link-checkbox.disabled label{color:#666;cursor:not-allowed}.link-checkbox:active,.link-checkbox:focus,.link-checkbox:hover{color:inherit}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar classNames = require(\"classnames\");\nvar React = require(\"react\");\nrequire(\"./RadioToggle.css\");\nvar Tooltip_1 = require(\"./Tooltip\");\nvar RadioToggle = (function (_super) {\n    __extends(RadioToggle, _super);\n    function RadioToggle() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.renderOption = function (option) {\n            var checked = option.value === _this.props.value;\n            var htmlId = _this.props.name + '__' + option.value;\n            return (React.createElement(\"li\", { key: option.value.toString() },\n                React.createElement(\"input\", { checked: checked, disabled: option.disabled, id: htmlId, name: _this.props.name, onChange: function () { return _this.props.onCheck(option.value); }, type: \"radio\" }),\n                React.createElement(Tooltip_1.default, { overlay: option.tooltip || undefined },\n                    React.createElement(\"label\", { htmlFor: htmlId }, option.label))));\n        };\n        return _this;\n    }\n    RadioToggle.prototype.render = function () {\n        return (React.createElement(\"ul\", { className: classNames('radio-toggle', this.props.className) }, this.props.options.map(this.renderOption)));\n    };\n    RadioToggle.defaultProps = {\n        disabled: false,\n        value: null,\n    };\n    return RadioToggle;\n}(React.PureComponent));\nexports.default = RadioToggle;\n//# sourceMappingURL=RadioToggle.js.map","var api = require(\"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../css-loader/dist/cjs.js??ref--6-1!../../../postcss-loader/src/index.js??postcss!./RadioToggle.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".radio-toggle{font-size:0;white-space:nowrap}.radio-toggle,.radio-toggle>li{display:inline-block;vertical-align:middle}.radio-toggle>li{font-size:12px}.radio-toggle>li:first-child>label{border-top-left-radius:2px;border-bottom-left-radius:2px}.radio-toggle>li:last-child>label{border-top-right-radius:2px;border-bottom-right-radius:2px}.radio-toggle>li+li>label{border-left:none}.radio-toggle>li>label{display:inline-block;padding:0 12px;margin:0;border:1px solid #236a97;color:#236a97;height:22px;line-height:22px;cursor:pointer;font-weight:600}.radio-toggle input[type=radio]{display:none}.radio-toggle input[type=radio]:checked+label{background-color:#236a97;color:#fff}.radio-toggle input[type=radio]:disabled+label{color:#bbb;border-color:#ddd;background:#ebebeb;cursor:not-allowed}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { hasMessage, translate } from 'sonar-ui-common/helpers/l10n';\nimport { isSonarCloud } from '../../helpers/system';\n\nexport const PERMISSIONS_ORDER_FOR_PROJECT_TEMPLATE = [\n  'user',\n  'codeviewer',\n  'issueadmin',\n  'securityhotspotadmin',\n  'admin',\n  'scan'\n];\n\nexport const PERMISSIONS_ORDER_GLOBAL = [\n  'admin',\n  { category: 'administer', permissions: ['gateadmin', 'profileadmin'] },\n  'scan',\n  { category: 'creator', permissions: ['provisioning', 'applicationcreator', 'portfoliocreator'] }\n];\n\nexport const PERMISSIONS_ORDER_FOR_VIEW = ['user', 'admin'];\n\nexport const PERMISSIONS_ORDER_FOR_DEV = ['user', 'admin'];\n\nexport const PERMISSIONS_ORDER_BY_QUALIFIER: T.Dict<string[]> = {\n  TRK: PERMISSIONS_ORDER_FOR_PROJECT_TEMPLATE,\n  VW: PERMISSIONS_ORDER_FOR_VIEW,\n  SVW: PERMISSIONS_ORDER_FOR_VIEW,\n  APP: PERMISSIONS_ORDER_FOR_VIEW,\n  DEV: PERMISSIONS_ORDER_FOR_DEV\n};\n\nfunction convertToPermissionDefinition(permission: string, l10nPrefix: string) {\n  const getMessage = (messageKey: string) => {\n    const cloudMessageKey = `${messageKey}.sonarcloud`;\n    return isSonarCloud() && hasMessage(cloudMessageKey)\n      ? translate(cloudMessageKey)\n      : translate(messageKey);\n  };\n\n  const name = getMessage(`${l10nPrefix}.${permission}`);\n  const description = getMessage(`${l10nPrefix}.${permission}.desc`);\n\n  return {\n    key: permission,\n    name,\n    description\n  };\n}\n\nexport function filterPermissions(\n  permissions: Array<string | { category: string; permissions: string[] }>,\n  hasApplicationsEnabled: boolean,\n  hasPortfoliosEnabled: boolean\n) {\n  return permissions.map(permission => {\n    if (typeof permission === 'object' && permission.category === 'creator') {\n      return {\n        ...permission,\n        permissions: permission.permissions.filter(p => {\n          return (\n            p === 'provisioning' ||\n            (p === 'portfoliocreator' && hasPortfoliosEnabled) ||\n            (p === 'applicationcreator' && hasApplicationsEnabled)\n          );\n        })\n      };\n    }\n    return permission;\n  });\n}\n\nexport function convertToPermissionDefinitions(\n  permissions: Array<string | { category: string; permissions: string[] }>,\n  l10nPrefix: string\n): Array<T.PermissionDefinition | T.PermissionDefinitionGroup> {\n  return permissions.map(permission => {\n    if (typeof permission === 'object') {\n      return {\n        category: permission.category,\n        permissions: permission.permissions.map(permission =>\n          convertToPermissionDefinition(permission, l10nPrefix)\n        )\n      };\n    }\n    return convertToPermissionDefinition(permission, l10nPrefix);\n  });\n}\n\nexport function isPermissionDefinitionGroup(\n  permission?: T.PermissionDefinition | T.PermissionDefinitionGroup\n): permission is T.PermissionDefinitionGroup {\n  return Boolean(permission && (permission as T.PermissionDefinitionGroup).category);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post, postJSON, RequestData } from 'sonar-ui-common/helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\nimport { BaseSearchProjectsParameters } from './components';\n\nconst PAGE_SIZE = 100;\n\nexport function grantPermissionToUser(data: {\n  projectKey?: string;\n  login: string;\n  permission: string;\n}) {\n  return post('/api/permissions/add_user', data).catch(throwGlobalError);\n}\n\nexport function revokePermissionFromUser(data: {\n  projectKey?: string;\n  login: string;\n  permission: string;\n}) {\n  return post('/api/permissions/remove_user', data).catch(throwGlobalError);\n}\n\nexport function grantPermissionToGroup(data: {\n  projectKey?: string;\n  groupName: string;\n  permission: string;\n}) {\n  return post('/api/permissions/add_group', data).catch(throwGlobalError);\n}\n\nexport function revokePermissionFromGroup(data: {\n  projectKey?: string;\n  groupName: string;\n  permission: string;\n}) {\n  return post('/api/permissions/remove_group', data).catch(throwGlobalError);\n}\n\ninterface GetPermissionTemplatesResponse {\n  permissionTemplates: T.PermissionTemplate[];\n  defaultTemplates: Array<{ templateId: string; qualifier: string }>;\n  permissions: Array<{ key: string; name: string; description: string }>;\n}\n\nexport function getPermissionTemplates(): Promise<GetPermissionTemplatesResponse> {\n  const url = '/api/permissions/search_templates';\n  return getJSON(url);\n}\n\nexport function createPermissionTemplate(data: RequestData) {\n  return postJSON('/api/permissions/create_template', data);\n}\n\nexport function updatePermissionTemplate(data: RequestData): Promise<void> {\n  return post('/api/permissions/update_template', data);\n}\n\nexport function deletePermissionTemplate(data: RequestData) {\n  return post('/api/permissions/delete_template', data).catch(throwGlobalError);\n}\n\n/**\n * Set default permission template for a given qualifier\n */\nexport function setDefaultPermissionTemplate(templateId: string, qualifier: string): Promise<void> {\n  return post('/api/permissions/set_default_template', { templateId, qualifier });\n}\n\nexport function applyTemplateToProject(data: RequestData) {\n  return post('/api/permissions/apply_template', data).catch(throwGlobalError);\n}\n\nexport function bulkApplyTemplate(data: BaseSearchProjectsParameters): Promise<void> {\n  return post('/api/permissions/bulk_apply_template', data);\n}\n\nexport function grantTemplatePermissionToUser(data: {\n  templateId: string;\n  login: string;\n  permission: string;\n}): Promise<void> {\n  return post('/api/permissions/add_user_to_template', data);\n}\n\nexport function revokeTemplatePermissionFromUser(data: {\n  templateId: string;\n  login: string;\n  permission: string;\n}): Promise<void> {\n  return post('/api/permissions/remove_user_from_template', data);\n}\n\nexport function grantTemplatePermissionToGroup(data: RequestData): Promise<void> {\n  return post('/api/permissions/add_group_to_template', data);\n}\n\nexport function revokeTemplatePermissionFromGroup(data: RequestData): Promise<void> {\n  return post('/api/permissions/remove_group_from_template', data);\n}\n\nexport function addProjectCreatorToTemplate(templateId: string, permission: string): Promise<void> {\n  return post('/api/permissions/add_project_creator_to_template', { templateId, permission });\n}\n\nexport function removeProjectCreatorFromTemplate(\n  templateId: string,\n  permission: string\n): Promise<void> {\n  return post('/api/permissions/remove_project_creator_from_template', { templateId, permission });\n}\n\nexport function getPermissionsUsersForComponent(data: {\n  projectKey: string;\n  q?: string;\n  permission?: string;\n  p?: number;\n  ps?: number;\n}): Promise<{ paging: T.Paging; users: T.PermissionUser[] }> {\n  if (!data.ps) {\n    data.ps = PAGE_SIZE;\n  }\n  return getJSON('/api/permissions/users', data).catch(throwGlobalError);\n}\n\nexport function getPermissionsGroupsForComponent(data: {\n  projectKey: string;\n  q?: string;\n  permission?: string;\n  p?: number;\n  ps?: number;\n}): Promise<{ paging: T.Paging; groups: T.PermissionGroup[] }> {\n  if (!data.ps) {\n    data.ps = PAGE_SIZE;\n  }\n  return getJSON('/api/permissions/groups', data).catch(throwGlobalError);\n}\n\nexport function getGlobalPermissionsUsers(data: {\n  q?: string;\n  permission?: string;\n  p?: number;\n  ps?: number;\n}): Promise<{ paging: T.Paging; users: T.PermissionUser[] }> {\n  if (!data.ps) {\n    data.ps = PAGE_SIZE;\n  }\n  return getJSON('/api/permissions/users', data);\n}\n\nexport function getGlobalPermissionsGroups(data: {\n  q?: string;\n  permission?: string;\n  p?: number;\n  ps?: number;\n}): Promise<{ paging: T.Paging; groups: T.PermissionGroup[] }> {\n  if (!data.ps) {\n    data.ps = PAGE_SIZE;\n  }\n  return getJSON('/api/permissions/groups', data);\n}\n\nexport function getPermissionTemplateUsers(\n  templateId: string,\n  query?: string,\n  permission?: string\n): Promise<any> {\n  const data: RequestData = { templateId, ps: PAGE_SIZE };\n  if (query) {\n    data.q = query;\n  }\n  if (permission) {\n    data.permission = permission;\n  }\n  return getJSON('/api/permissions/template_users', data).then(r => r.users);\n}\n\nexport function getPermissionTemplateGroups(\n  templateId: string,\n  query?: string,\n  permission?: string\n): Promise<any> {\n  const data: RequestData = { templateId, ps: PAGE_SIZE };\n  if (query) {\n    data.q = query;\n  }\n  if (permission) {\n    data.permission = permission;\n  }\n  return getJSON('/api/permissions/template_groups', data).then(r => r.groups);\n}\n\nexport function changeProjectVisibility(\n  project: string,\n  visibility: T.Visibility\n): Promise<void | Response> {\n  return post('/api/projects/update_visibility', { project, visibility }).catch(throwGlobalError);\n}\n\nexport function changeProjectDefaultVisibility(\n  projectVisibility: T.Visibility\n): Promise<void | Response> {\n  return post('/api/projects/update_default_visibility', { projectVisibility }).catch(\n    throwGlobalError\n  );\n}\n","var createAggregator = require('./_createAggregator');\n\n/**\n * Creates an array of elements split into two groups, the first of which\n * contains elements `predicate` returns truthy for, the second of which\n * contains elements `predicate` returns falsey for. The predicate is\n * invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the array of grouped elements.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'age': 36, 'active': false },\n *   { 'user': 'fred',    'age': 40, 'active': true },\n *   { 'user': 'pebbles', 'age': 1,  'active': false }\n * ];\n *\n * _.partition(users, function(o) { return o.active; });\n * // => objects for [['fred'], ['barney', 'pebbles']]\n *\n * // The `_.matches` iteratee shorthand.\n * _.partition(users, { 'age': 1, 'active': false });\n * // => objects for [['pebbles'], ['barney', 'fred']]\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.partition(users, ['active', false]);\n * // => objects for [['barney', 'pebbles'], ['fred']]\n *\n * // The `_.property` iteratee shorthand.\n * _.partition(users, 'active');\n * // => objects for [['fred'], ['barney', 'pebbles']]\n */\nvar partition = createAggregator(function(result, value, key) {\n  result[key ? 0 : 1].push(value);\n}, function() { return [[], []]; });\n\nmodule.exports = partition;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = require(\"react\");\nvar Icon_1 = require(\"./Icon\");\nfunction GroupIcon(_a) {\n    var fill = _a.fill, _b = _a.size, size = _b === void 0 ? 36 : _b, iconProps = __rest(_a, [\"fill\", \"size\"]);\n    return (React.createElement(Icon_1.ThemedIcon, __assign({ viewBox: \"0 0 36 36\" }, iconProps), function (_a) {\n        var theme = _a.theme;\n        return (React.createElement(\"g\", { transform: \"matrix(0.0625,0,0,0.0625,3,4)\" },\n            React.createElement(\"path\", { d: \"M148.25,224C121.25,224.833 99.167,235.5 82,256L48.5,256C34.833,256 23.333,252.625 14,245.875C4.667,239.125 0,229.25 0,216.25C0,157.417 10.333,128 31,128C32,128 35.625,129.75 41.875,133.25C48.125,136.75 56.25,140.292 66.25,143.875C76.25,147.458 86.167,149.25 96,149.25C107.167,149.25 118.25,147.333 129.25,143.5C128.417,149.667 128,155.167 128,160C128,183.167 134.75,204.5 148.25,224ZM416,383.25C416,403.25 409.917,419.042 397.75,430.625C385.583,442.208 369.417,448 349.25,448L130.75,448C110.583,448 94.417,442.208 82.25,430.625C70.083,419.042 64,403.25 64,383.25C64,374.417 64.292,365.792 64.875,357.375C65.458,348.958 66.625,339.875 68.375,330.125C70.125,320.375 72.333,311.333 75,303C77.667,294.667 81.25,286.542 85.75,278.625C90.25,270.708 95.417,263.958 101.25,258.375C107.083,252.792 114.208,248.333 122.625,245C131.042,241.667 140.333,240 150.5,240C152.167,240 155.75,241.792 161.25,245.375C166.75,248.958 172.833,252.958 179.5,257.375C186.167,261.792 195.083,265.792 206.25,269.375C217.417,272.958 228.667,274.75 240,274.75C251.333,274.75 262.583,272.958 273.75,269.375C284.917,265.792 293.833,261.792 300.5,257.375C307.167,252.958 313.25,248.958 318.75,245.375C324.25,241.792 327.833,240 329.5,240C339.667,240 348.958,241.667 357.375,245C365.792,248.333 372.917,252.792 378.75,258.375C384.583,263.958 389.75,270.708 394.25,278.625C398.75,286.542 402.333,294.667 405,303C407.667,311.333 409.875,320.375 411.625,330.125C413.375,339.875 414.542,348.958 415.125,357.375C415.708,365.792 416,374.417 416,383.25ZM160,64C160,81.667 153.75,96.75 141.25,109.25C128.75,121.75 113.667,128 96,128C78.333,128 63.25,121.75 50.75,109.25C38.25,96.75 32,81.667 32,64C32,46.333 38.25,31.25 50.75,18.75C63.25,6.25 78.333,0 96,0C113.667,0 128.75,6.25 141.25,18.75C153.75,31.25 160,46.333 160,64ZM336,160C336,186.5 326.625,209.125 307.875,227.875C289.125,246.625 266.5,256 240,256C213.5,256 190.875,246.625 172.125,227.875C153.375,209.125 144,186.5 144,160C144,133.5 153.375,110.875 172.125,92.125C190.875,73.375 213.5,64 240,64C266.5,64 289.125,73.375 307.875,92.125C326.625,110.875 336,133.5 336,160ZM480,216.25C480,229.25 475.333,239.125 466,245.875C456.667,252.625 445.167,256 431.5,256L398,256C380.833,235.5 358.75,224.833 331.75,224C345.25,204.5 352,183.167 352,160C352,155.167 351.583,149.667 350.75,143.5C361.75,147.333 372.833,149.25 384,149.25C393.833,149.25 403.75,147.458 413.75,143.875C423.75,140.292 431.875,136.75 438.125,133.25C444.375,129.75 448,128 449,128C469.667,128 480,157.417 480,216.25ZM448,64C448,81.667 441.75,96.75 429.25,109.25C416.75,121.75 401.667,128 384,128C366.333,128 351.25,121.75 338.75,109.25C326.25,96.75 320,81.667 320,64C320,46.333 326.25,31.25 338.75,18.75C351.25,6.25 366.333,0 384,0C401.667,0 416.75,6.25 429.25,18.75C441.75,31.25 448,46.333 448,64Z\", style: { fill: fill || theme.colors.gray67 } })));\n    }));\n}\nexports.default = GroupIcon;\n//# sourceMappingURL=GroupIcon.js.map","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".permissions-table .permission-column.selected{background-color:#d9edf7}.permissions-table .permission-column-inner{width:90px}.permissions-table .divider{background:#fff;padding:16px 0}.permissions-table .divider:after{display:block;content:\\\"\\\";background:#e6e6e6;height:1px;width:100%}.permissions-table td:first-of-type{max-width:320px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport RadioToggle from 'sonar-ui-common/components/controls/RadioToggle';\nimport SearchBox from 'sonar-ui-common/components/controls/SearchBox';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\n\ninterface Props {\n  filter: string;\n  onFilter: (value: string) => void;\n  onSearch: (value: string) => void;\n  query: string;\n}\n\nexport default function SearchForm(props: Props) {\n  const filterOptions = [\n    { value: 'all', label: translate('all') },\n    { value: 'users', label: translate('users.page') },\n    { value: 'groups', label: translate('user_groups.page') }\n  ];\n\n  return (\n    <div className=\"display-flex-row\">\n      <RadioToggle\n        name=\"users-or-groups\"\n        onCheck={props.onFilter}\n        options={filterOptions}\n        value={props.filter}\n      />\n\n      <div className=\"flex-1 spacer-left\">\n        <SearchBox\n          minLength={3}\n          onChange={props.onSearch}\n          placeholder={translate('search.search_for_users_or_groups')}\n          value={props.query}\n        />\n      </div>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport Checkbox from 'sonar-ui-common/components/controls/Checkbox';\nimport { isPermissionDefinitionGroup } from '../../utils';\n\ninterface Props {\n  loading: string[];\n  onCheck: (checked: boolean, permission?: string) => void;\n  permission: T.PermissionDefinition | T.PermissionDefinitionGroup;\n  permissionItem: T.PermissionGroup | T.PermissionUser;\n  selectedPermission?: string;\n}\n\nexport default class PermissionCell extends React.PureComponent<Props> {\n  render() {\n    const { loading, onCheck, permission, permissionItem, selectedPermission } = this.props;\n    if (isPermissionDefinitionGroup(permission)) {\n      return (\n        <td className=\"text-middle\">\n          {permission.permissions.map(permission => (\n            <div key={permission.key}>\n              <Checkbox\n                checked={permissionItem.permissions.includes(permission.key)}\n                disabled={loading.includes(permission.key)}\n                id={permission.key}\n                onCheck={onCheck}>\n                <span className=\"little-spacer-left\">{permission.name}</span>\n              </Checkbox>\n            </div>\n          ))}\n        </td>\n      );\n    } else {\n      return (\n        <td\n          className={classNames('permission-column text-center text-middle', {\n            selected: permission.key === selectedPermission\n          })}>\n          <Checkbox\n            checked={permissionItem.permissions.includes(permission.key)}\n            disabled={loading.includes(permission.key)}\n            id={permission.key}\n            onCheck={onCheck}\n          />\n        </td>\n      );\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { without } from 'lodash';\nimport * as React from 'react';\nimport GroupIcon from 'sonar-ui-common/components/icons/GroupIcon';\nimport { isPermissionDefinitionGroup } from '../../utils';\nimport PermissionCell from './PermissionCell';\n\ninterface Props {\n  group: T.PermissionGroup;\n  onToggle: (group: T.PermissionGroup, permission: string) => Promise<void>;\n  permissions: T.PermissionDefinitions;\n  selectedPermission?: string;\n}\n\ninterface State {\n  loading: string[];\n}\n\nexport default class GroupHolder extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: [] };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  stopLoading = (permission: string) => {\n    if (this.mounted) {\n      this.setState(state => ({ loading: without(state.loading, permission) }));\n    }\n  };\n\n  handleCheck = (_checked: boolean, permission?: string) => {\n    if (permission !== undefined) {\n      this.setState(state => ({ loading: [...state.loading, permission] }));\n      this.props.onToggle(this.props.group, permission).then(\n        () => this.stopLoading(permission),\n        () => this.stopLoading(permission)\n      );\n    }\n  };\n\n  render() {\n    const { group } = this.props;\n\n    return (\n      <tr>\n        <td className=\"nowrap text-middle\">\n          <div className=\"display-flex-center\">\n            <GroupIcon className=\"big-spacer-right\" />\n            <div className=\"max-width-100\">\n              <div className=\"max-width-100 text-ellipsis\">\n                <strong>{group.name}</strong>\n              </div>\n              <div className=\"little-spacer-top\" style={{ whiteSpace: 'normal' }}>\n                {group.description}\n              </div>\n            </div>\n          </div>\n        </td>\n        {this.props.permissions.map(permission => (\n          <PermissionCell\n            key={isPermissionDefinitionGroup(permission) ? permission.category : permission.key}\n            loading={this.state.loading}\n            onCheck={this.handleCheck}\n            permission={permission}\n            permissionItem={group}\n            selectedPermission={this.props.selectedPermission}\n          />\n        ))}\n      </tr>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as classNames from 'classnames';\nimport * as React from 'react';\nimport HelpTooltip from 'sonar-ui-common/components/controls/HelpTooltip';\nimport Tooltip from 'sonar-ui-common/components/controls/Tooltip';\nimport { Alert } from 'sonar-ui-common/components/ui/Alert';\nimport { translate, translateWithParameters } from 'sonar-ui-common/helpers/l10n';\nimport InstanceMessage from '../../../../components/common/InstanceMessage';\nimport { isPermissionDefinitionGroup } from '../../utils';\n\ninterface Props {\n  onSelectPermission?: (permission: string) => void;\n  permission: T.PermissionDefinition | T.PermissionDefinitionGroup;\n  selectedPermission?: string;\n  showPublicProjectsWarning?: boolean;\n}\n\nexport default class PermissionHeader extends React.PureComponent<Props> {\n  handlePermissionClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    const { permission } = this.props;\n    if (this.props.onSelectPermission && !isPermissionDefinitionGroup(permission)) {\n      this.props.onSelectPermission(permission.key);\n    }\n  };\n\n  getTooltipOverlay = () => {\n    const { permission } = this.props;\n\n    if (isPermissionDefinitionGroup(permission)) {\n      return permission.permissions.map(permission => (\n        <React.Fragment key={permission.key}>\n          <b className=\"little-spacer-right\">{permission.name}:</b>\n          <InstanceMessage key={permission.key} message={permission.description} />\n          <br />\n        </React.Fragment>\n      ));\n    } else {\n      if (this.props.showPublicProjectsWarning && ['user', 'codeviewer'].includes(permission.key)) {\n        return (\n          <div>\n            <InstanceMessage message={permission.description} />\n            <Alert className=\"spacer-top\" variant=\"warning\">\n              {translate('projects_role.public_projects_warning')}\n            </Alert>\n          </div>\n        );\n      }\n      return <InstanceMessage message={permission.description} />;\n    }\n  };\n\n  render() {\n    const { onSelectPermission, permission } = this.props;\n    let name;\n    if (isPermissionDefinitionGroup(permission)) {\n      name = translate('global_permissions', permission.category);\n    } else {\n      name = onSelectPermission ? (\n        <Tooltip\n          overlay={translateWithParameters(\n            'global_permissions.filter_by_x_permission',\n            permission.name\n          )}>\n          <a href=\"#\" onClick={this.handlePermissionClick}>\n            {permission.name}\n          </a>\n        </Tooltip>\n      ) : (\n        permission.name\n      );\n    }\n    return (\n      <th\n        className={classNames('permission-column text-center text-middle', {\n          selected:\n            !isPermissionDefinitionGroup(permission) &&\n            permission.key === this.props.selectedPermission\n        })}>\n        <div className=\"permission-column-inner\">\n          {name}\n          <HelpTooltip className=\"spacer-left\" overlay={this.getTooltipOverlay()} />\n        </div>\n      </th>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { without } from 'lodash';\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport Avatar from '../../../../components/ui/Avatar';\nimport { isPermissionDefinitionGroup } from '../../utils';\nimport PermissionCell from './PermissionCell';\n\ninterface Props {\n  onToggle: (user: T.PermissionUser, permission: string) => Promise<void>;\n  permissions: T.PermissionDefinitions;\n  selectedPermission?: string;\n  user: T.PermissionUser;\n}\n\ninterface State {\n  loading: string[];\n}\n\nexport default class UserHolder extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: [] };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  stopLoading = (permission: string) => {\n    if (this.mounted) {\n      this.setState(state => ({ loading: without(state.loading, permission) }));\n    }\n  };\n\n  handleCheck = (_checked: boolean, permission?: string) => {\n    if (permission !== undefined) {\n      this.setState(state => ({ loading: [...state.loading, permission] }));\n      this.props.onToggle(this.props.user, permission).then(\n        () => this.stopLoading(permission),\n        () => this.stopLoading(permission)\n      );\n    }\n  };\n\n  render() {\n    const { user } = this.props;\n    const permissionCells = this.props.permissions.map(permission => (\n      <PermissionCell\n        key={isPermissionDefinitionGroup(permission) ? permission.category : permission.key}\n        loading={this.state.loading}\n        onCheck={this.handleCheck}\n        permission={permission}\n        permissionItem={user}\n        selectedPermission={this.props.selectedPermission}\n      />\n    ));\n\n    if (user.login === '<creator>') {\n      return (\n        <tr>\n          <td className=\"nowrap text-middle\">\n            <div>\n              <strong>{user.name}</strong>\n            </div>\n            <div className=\"little-spacer-top\" style={{ whiteSpace: 'normal' }}>\n              {translate('permission_templates.project_creators.explanation')}\n            </div>\n          </td>\n          {permissionCells}\n        </tr>\n      );\n    }\n\n    return (\n      <tr>\n        <td className=\"nowrap text-middle\">\n          <div className=\"display-flex-center\">\n            <Avatar\n              className=\"text-middle big-spacer-right flex-0\"\n              hash={user.avatar}\n              name={user.name}\n              size={36}\n            />\n            <div className=\"max-width-100\">\n              <div className=\"max-width-100 text-ellipsis\">\n                <strong>{user.name}</strong>\n                <span className=\"note spacer-left\">{user.login}</span>\n              </div>\n              <div className=\"little-spacer-top max-width-100 text-ellipsis\">{user.email}</div>\n            </div>\n          </div>\n        </td>\n        {permissionCells}\n      </tr>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { partition, sortBy } from 'lodash';\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { isPermissionDefinitionGroup } from '../../utils';\nimport GroupHolder from './GroupHolder';\nimport PermissionHeader from './PermissionHeader';\nimport UserHolder from './UserHolder';\n\ninterface Props {\n  filter?: string;\n  groups: T.PermissionGroup[];\n  loading?: boolean;\n  onSelectPermission?: (permission: string) => void;\n  onToggleGroup: (group: T.PermissionGroup, permission: string) => Promise<void>;\n  onToggleUser: (user: T.PermissionUser, permission: string) => Promise<void>;\n  permissions: T.PermissionDefinitions;\n  query?: string;\n  selectedPermission?: string;\n  showPublicProjectsWarning?: boolean;\n  users: T.PermissionUser[];\n}\n\ninterface State {\n  initialPermissionsCount: T.Dict<number>;\n}\nexport default class HoldersList extends React.PureComponent<Props, State> {\n  state: State = { initialPermissionsCount: {} };\n  componentDidUpdate(prevProps: Props) {\n    if (this.props.filter !== prevProps.filter || this.props.query !== prevProps.query) {\n      this.setState({ initialPermissionsCount: {} });\n    }\n  }\n\n  isPermissionUser(item: T.PermissionGroup | T.PermissionUser): item is T.PermissionUser {\n    return (item as T.PermissionUser).login !== undefined;\n  }\n\n  handleGroupToggle = (group: T.PermissionGroup, permission: string) => {\n    const key = group.id || group.name;\n    if (this.state.initialPermissionsCount[key] === undefined) {\n      this.setState(state => ({\n        initialPermissionsCount: {\n          ...state.initialPermissionsCount,\n          [key]: group.permissions.length\n        }\n      }));\n    }\n    return this.props.onToggleGroup(group, permission);\n  };\n\n  handleUserToggle = (user: T.PermissionUser, permission: string) => {\n    if (this.state.initialPermissionsCount[user.login] === undefined) {\n      this.setState(state => ({\n        initialPermissionsCount: {\n          ...state.initialPermissionsCount,\n          [user.login]: user.permissions.length\n        }\n      }));\n    }\n    return this.props.onToggleUser(user, permission);\n  };\n\n  getItemInitialPermissionsCount = (item: T.PermissionGroup | T.PermissionUser) => {\n    const key = this.isPermissionUser(item) ? item.login : item.id || item.name;\n    return this.state.initialPermissionsCount[key] !== undefined\n      ? this.state.initialPermissionsCount[key]\n      : item.permissions.length;\n  };\n\n  renderEmpty() {\n    const columns = this.props.permissions.length + 1;\n    return (\n      <tr>\n        <td colSpan={columns}>{translate('no_results_search')}</td>\n      </tr>\n    );\n  }\n\n  renderItem(item: T.PermissionUser | T.PermissionGroup, permissions: T.PermissionDefinitions) {\n    return this.isPermissionUser(item) ? (\n      <UserHolder\n        key={`user-${item.login}`}\n        onToggle={this.handleUserToggle}\n        permissions={permissions}\n        selectedPermission={this.props.selectedPermission}\n        user={item}\n      />\n    ) : (\n      <GroupHolder\n        group={item}\n        key={`group-${item.id || item.name}`}\n        onToggle={this.handleGroupToggle}\n        permissions={permissions}\n        selectedPermission={this.props.selectedPermission}\n      />\n    );\n  }\n\n  render() {\n    const { permissions } = this.props;\n    const items = sortBy([...this.props.users, ...this.props.groups], item => {\n      if (this.isPermissionUser(item) && item.login === '<creator>') {\n        return 0;\n      }\n      return item.name;\n    });\n    const [itemWithPermissions, itemWithoutPermissions] = partition(items, item =>\n      this.getItemInitialPermissionsCount(item)\n    );\n    return (\n      <div className=\"boxed-group boxed-group-inner\">\n        <table className=\"data zebra permissions-table\">\n          <thead>\n            <tr>\n              <td className=\"nowrap bordered-bottom\">{this.props.children}</td>\n              {permissions.map(permission => (\n                <PermissionHeader\n                  key={\n                    isPermissionDefinitionGroup(permission) ? permission.category : permission.key\n                  }\n                  onSelectPermission={this.props.onSelectPermission}\n                  permission={permission}\n                  selectedPermission={this.props.selectedPermission}\n                  showPublicProjectsWarning={this.props.showPublicProjectsWarning}\n                />\n              ))}\n            </tr>\n          </thead>\n          <tbody>\n            {items.length === 0 && !this.props.loading && this.renderEmpty()}\n            {itemWithPermissions.map(item => this.renderItem(item, permissions))}\n            {itemWithPermissions.length > 0 && itemWithoutPermissions.length > 0 && (\n              <>\n                <tr>\n                  <td className=\"divider\" colSpan={20} />\n                </tr>\n                <tr />\n                {/* Keep correct zebra colors in the table */}\n              </>\n            )}\n            {itemWithoutPermissions.map(item => this.renderItem(item, permissions))}\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n}\n"],"sourceRoot":""}