(window.webpackJsonp=window.webpackJsonp||[]).push([[293],{1866:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return j}));var s=r(349),n=r.n(s),o=r(2),i=r(335),a=r(31),l=r(497),c=r(341),p=(r(757),r(325)),u=r(351),d=r.n(u),m=r(327),h=r(337),g=r(765),f=r(759),b=r(431);class v extends o.PureComponent{constructor(){super(...arguments),this.handleToggleUser=(e,t)=>e.permissions.includes(t)?this.props.revokePermissionFromUser(e.login,t):this.props.grantPermissionToUser(e.login,t),this.handleToggleGroup=(e,t)=>e.permissions.includes(t)?this.props.revokePermissionFromGroup(e.name,t):this.props.grantPermissionToGroup(e.name,t)}render(){const{appState:e,filter:t,groups:r,groupsPaging:s,users:n,usersPaging:i}=this.props,a=e.qualifiers.includes(h.a.Portfolio),l=e.qualifiers.includes(h.a.Application),c=Object(b.d)(Object(b.e)(b.c,l,a),"global_permissions");let p=0,u=0;return"users"!==t&&(p+=r.length,u+=s?s.total:r.length),"groups"!==t&&(p+=n.length,u+=i?i.total:n.length),o.createElement(o.Fragment,null,o.createElement(g.a,{filter:this.props.filter,groups:this.props.groups,loading:this.props.loading,onToggleGroup:this.handleToggleGroup,onToggleUser:this.handleToggleUser,permissions:c,query:this.props.query,users:this.props.users},o.createElement(f.a,{filter:this.props.filter,onFilter:this.props.onFilter,onSearch:this.props.onSearch,query:this.props.query})),o.createElement(d.a,{count:p,loadMore:this.props.onLoadMore,total:u}))}}var y=Object(p.b)(e=>({appState:Object(m.getAppState)(e)}))(v);class O extends o.PureComponent{render(){return o.createElement("header",{className:"page-header"},o.createElement("h1",{className:"page-title"},Object(a.translate)("global_permissions.page")),this.props.loading&&o.createElement("i",{className:"spinner"}),o.createElement("div",{className:"page-description"},Object(a.translate)("global_permissions.page.description")))}}function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){C(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class j extends o.PureComponent{constructor(e){super(e),this.mounted=!1,this.loadUsersAndGroups=(e,t)=>{const{filter:r,query:s}=this.state,n="groups"!==r?l.i({q:s||void 0,p:e}):Promise.resolve({paging:void 0,users:[]}),o="users"!==r?l.h({q:s||void 0,p:t}):Promise.resolve({paging:void 0,groups:[]});return Promise.all([n,o])},this.loadHolders=()=>(this.setState({loading:!0}),this.loadUsersAndGroups().then(([e,t])=>{this.mounted&&this.setState({groups:t.groups,groupsPaging:t.paging,loading:!1,users:e.users,usersPaging:e.paging})},this.stopLoading)),this.onLoadMore=()=>{const{usersPaging:e,groupsPaging:t}=this.state;return this.setState({loading:!0}),this.loadUsersAndGroups(e?e.pageIndex+1:1,t?t.pageIndex+1:1).then(([e,t])=>{this.mounted&&this.setState(({groups:r,users:s})=>({groups:[...r,...t.groups],groupsPaging:t.paging,loading:!1,users:[...s,...e.users],usersPaging:e.paging}))},this.stopLoading)},this.onFilter=e=>{this.setState({filter:e},this.loadHolders)},this.onSearch=e=>{this.setState({query:e},this.loadHolders)},this.addPermissionToGroup=(e,t,r)=>e.map(e=>e.name===t?k({},e,{permissions:[...e.permissions,r]}):e),this.addPermissionToUser=(e,t,r)=>e.map(e=>e.login===t?k({},e,{permissions:[...e.permissions,r]}):e),this.removePermissionFromGroup=(e,t,r)=>e.map(e=>e.name===t?k({},e,{permissions:n()(e.permissions,r)}):e),this.removePermissionFromUser=(e,t,r)=>e.map(e=>e.login===t?k({},e,{permissions:n()(e.permissions,r)}):e),this.grantPermissionToGroup=(e,t)=>this.mounted?(this.setState(({groups:r})=>({groups:this.addPermissionToGroup(r,e,t)})),l.o({groupName:e,permission:t}).then(()=>{},()=>{this.mounted&&this.setState(({groups:r})=>({groups:this.removePermissionFromGroup(r,e,t)}))})):Promise.resolve(),this.grantPermissionToUser=(e,t)=>this.mounted?(this.setState(({users:r})=>({users:this.addPermissionToUser(r,e,t)})),l.p({login:e,permission:t}).then(()=>{},()=>{this.mounted&&this.setState(({users:r})=>({users:this.removePermissionFromUser(r,e,t)}))})):Promise.resolve(),this.revokePermissionFromGroup=(e,t)=>this.mounted?(this.setState(({groups:r})=>({groups:this.removePermissionFromGroup(r,e,t)})),l.t({groupName:e,permission:t}).then(()=>{},()=>{this.mounted&&this.setState(({groups:r})=>({groups:this.addPermissionToGroup(r,e,t)}))})):Promise.resolve(),this.revokePermissionFromUser=(e,t)=>this.mounted?(this.setState(({users:r})=>({users:this.removePermissionFromUser(r,e,t)})),l.u({login:e,permission:t}).then(()=>{},()=>{this.mounted&&this.setState(({users:r})=>({users:this.addPermissionToUser(r,e,t)}))})):Promise.resolve(),this.stopLoading=()=>{this.mounted&&this.setState({loading:!1})},this.state={filter:"all",groups:[],loading:!0,query:"",users:[]}}componentDidMount(){this.mounted=!0,this.loadHolders()}componentWillUnmount(){this.mounted=!1}render(){return o.createElement("div",{className:"page page-limited"},o.createElement(c.a,{suggestions:"global_permissions"}),o.createElement(i.a,{defer:!1,title:Object(a.translate)("global_permissions.permission")}),o.createElement(O,{loading:this.state.loading}),o.createElement(y,{filter:this.state.filter,grantPermissionToGroup:this.grantPermissionToGroup,grantPermissionToUser:this.grantPermissionToUser,groups:this.state.groups,groupsPaging:this.state.groupsPaging,loadHolders:this.loadHolders,loading:this.state.loading,onFilter:this.onFilter,onLoadMore:this.onLoadMore,onSearch:this.onSearch,query:this.state.query,revokePermissionFromGroup:this.revokePermissionFromGroup,revokePermissionFromUser:this.revokePermissionFromUser,users:this.state.users,usersPaging:this.state.usersPaging}))}}},323:function(e,t,r){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},n=this&&this.__rest||function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(r[s[n]]=e[s[n]])}return r};Object.defineProperty(t,"__esModule",{value:!0});var o=r(311),i=r(2),a=r(380),l=r(342);r(343);var c=r(317);function p(e){var t=e.size,r=void 0===t?12:t,s=n(e,["size"]);return i.createElement("div",{className:o("help-tooltip",s.className)},i.createElement(c.default,{mouseLeaveDelay:.25,onShow:s.onShow,overlay:s.overlay,placement:s.placement},i.createElement("span",{className:"display-inline-flex-center"},s.children||i.createElement(l.ThemeConsumer,null,(function(e){return i.createElement(a.default,{fill:e.colors.gray71,size:r})})))))}t.default=p,t.DarkHelpTooltip=function(e){var t=e.size,r=void 0===t?12:t,o=n(e,["size"]);return i.createElement(p,s({},o),i.createElement(l.ThemeConsumer,null,(function(e){var t=e.colors;return i.createElement(a.default,{fill:t.transparentBlack,fillInner:t.white,size:r})})))}},338:function(e,t,r){"use strict";var s,n=this&&this.__extends||(s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(311),i=r(2),a=r(319);r(356);var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(e){e.preventDefault(),e.currentTarget.blur(),t.props.disabled||t.props.onCheck(!t.props.checked,t.props.id)},t}return n(t,e),t.prototype.render=function(){var e=this.props,t=e.checked,r=e.children,s=e.disabled,n=e.id,l=e.loading,c=e.right,p=e.thirdState,u=e.title,d=o("icon-checkbox",{"icon-checkbox-checked":t,"icon-checkbox-single":p,"icon-checkbox-disabled":s});return r?i.createElement("a",{"aria-checked":t,className:o("link-checkbox",this.props.className,{note:s,disabled:s}),href:"#",id:n,onClick:this.handleClick,role:"checkbox",title:u},c&&r,i.createElement(a.default,{loading:Boolean(l)},i.createElement("i",{className:d})),!c&&r):l?i.createElement(a.default,null):i.createElement("a",{"aria-checked":t,className:o(d,this.props.className),href:"#",id:n,onClick:this.handleClick,role:"checkbox",title:u})},t.defaultProps={thirdState:!1},t}(i.PureComponent);t.default=l},341:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var s=r(2),n=r(379);function o({suggestions:e}){return s.createElement(n.a.Consumer,null,({addSuggestions:t,removeSuggestions:r})=>s.createElement(i,{addSuggestions:t,removeSuggestions:r,suggestions:e}))}class i extends s.PureComponent{componentDidMount(){this.props.addSuggestions(this.props.suggestions)}componentDidUpdate(e){e.suggestions!==this.props.suggestions&&(this.props.removeSuggestions(this.props.suggestions),this.props.addSuggestions(e.suggestions))}componentWillUnmount(){this.props.removeSuggestions(this.props.suggestions)}render(){return null}}},343:function(e,t,r){var s=r(313),n=r(344);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var o={insert:"head",singleton:!1},i=(s(n,o),n.locals?n.locals:{});e.exports=i},344:function(e,t,r){(t=r(314)(!1)).push([e.i,".help-tooltip{display:inline-flex;align-items:center;vertical-align:middle}.help-toolip-link{display:block;width:12px;height:12px;border:none}",""]),e.exports=t},347:function(e,t,r){var s=r(381),n=r(392);e.exports=function(e){return n(e)&&s(e)}},349:function(e,t,r){var s=r(352),n=r(371),o=r(347),i=n((function(e,t){return o(e)?s(e,t):[]}));e.exports=i},351:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(311),n=r(2),o=r(31),i=r(320),a=r(319),l=r(312);t.default=function(e){var t,r=e.className,c=e.count,p=e.loading,u=e.needReload,d=e.total,m=e.ready,h=void 0===m||m,g=d&&d>c;return u&&e.reload?t=n.createElement(l.Button,{className:"spacer-left","data-test":"reload",disabled:p,onClick:e.reload},o.translate("reload")):g&&e.loadMore&&(t=n.createElement(l.Button,{className:"spacer-left",disabled:p,"data-test":"show-more",onClick:e.loadMore},o.translate("show_more"))),n.createElement("footer",{className:s("spacer-top note text-center",{"new-loading":!h},r)},o.translateWithParameters("x_of_y_shown",i.formatMeasure(c,"INT",null),i.formatMeasure(d,"INT",null)),t,p&&n.createElement(a.default,{className:"text-bottom spacer-left position-absolute"}))}},352:function(e,t,r){var s=r(399),n=r(404),o=r(405),i=r(336),a=r(401),l=r(400);e.exports=function(e,t,r,c){var p=-1,u=n,d=!0,m=e.length,h=[],g=t.length;if(!m)return h;r&&(t=i(t,a(r))),c?(u=o,d=!1):t.length>=200&&(u=l,d=!1,t=new s(t));e:for(;++p<m;){var f=e[p],b=null==r?f:r(f);if(f=c||0!==f?f:0,d&&b==b){for(var v=g;v--;)if(t[v]===b)continue e;h.push(f)}else u(t,b,c)||h.push(f)}return h}},356:function(e,t,r){var s=r(313),n=r(357);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var o={insert:"head",singleton:!1},i=(s(n,o),n.locals?n.locals:{});e.exports=i},357:function(e,t,r){(t=r(314)(!1)).push([e.i,".icon-checkbox{display:inline-block;line-height:1;vertical-align:top;padding:1px 2px;box-sizing:border-box}a.icon-checkbox{border-bottom:none}.icon-checkbox:focus{outline:none}.icon-checkbox:before{content:\" \";display:inline-block;width:10px;height:10px;border:1px solid #236a97;border-radius:2px;transition:border-color .2s ease,background-color .2s ease,background-image .2s ease,box-shadow .4s ease}.icon-checkbox:not(.icon-checkbox-disabled):focus:before,.link-checkbox:not(.disabled):focus:focus .icon-checkbox:before{box-shadow:0 0 0 3px rgba(35,106,151,.25)}.icon-checkbox-checked:before{background-color:#4b9fd5;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 14 14' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' clip-rule='evenodd' stroke-linejoin='round' stroke-miterlimit='1.414'%3E%3Cpath d='M12 4.665c0 .172-.06.318-.18.438l-5.55 5.55c-.12.12-.266.18-.438.18s-.318-.06-.438-.18L2.18 7.438C2.06 7.317 2 7.17 2 7s.06-.318.18-.44l.878-.876c.12-.12.267-.18.44-.18.17 0 .317.06.437.18l1.897 1.903 4.233-4.24c.12-.12.266-.18.438-.18s.32.06.44.18l.876.88c.12.12.18.265.18.438z' fill='%23fff' fill-rule='nonzero'/%3E%3C/svg%3E\");border-color:#4b9fd5}.icon-checkbox-checked.icon-checkbox-single:before{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 14 14' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' clip-rule='evenodd' stroke-linejoin='round' stroke-miterlimit='1.414'%3E%3Cpath d='M10 4.698A.697.697 0 0 0 9.302 4H4.698A.697.697 0 0 0 4 4.698v4.604c0 .386.312.698.698.698h4.604A.697.697 0 0 0 10 9.302V4.698z' fill='%23fff'/%3E%3C/svg%3E\")}.icon-checkbox-disabled:before{border:1px solid #bbb;cursor:not-allowed}.icon-checkbox-disabled.icon-checkbox-checked:before{background-color:#bbb}.icon-checkbox-invisible{visibility:hidden}.link-checkbox{color:inherit;border-bottom:none}.link-checkbox.disabled,.link-checkbox.disabled:hover,.link-checkbox.disabled label{color:#666;cursor:not-allowed}.link-checkbox:active,.link-checkbox:focus,.link-checkbox:hover{color:inherit}",""]),e.exports=t},397:function(e,t,r){"use strict";var s,n=this&&this.__extends||(s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(311),i=r(2);r(408);var a=r(317),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderOption=function(e){var r=e.value===t.props.value,s=t.props.name+"__"+e.value;return i.createElement("li",{key:e.value.toString()},i.createElement("input",{checked:r,disabled:e.disabled,id:s,name:t.props.name,onChange:function(){return t.props.onCheck(e.value)},type:"radio"}),i.createElement(a.default,{overlay:e.tooltip||void 0},i.createElement("label",{htmlFor:s},e.label)))},t}return n(t,e),t.prototype.render=function(){return i.createElement("ul",{className:o("radio-toggle",this.props.className)},this.props.options.map(this.renderOption))},t.defaultProps={disabled:!1,value:null},t}(i.PureComponent);t.default=l},408:function(e,t,r){var s=r(313),n=r(409);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var o={insert:"head",singleton:!1},i=(s(n,o),n.locals?n.locals:{});e.exports=i},409:function(e,t,r){(t=r(314)(!1)).push([e.i,".radio-toggle{font-size:0;white-space:nowrap}.radio-toggle,.radio-toggle>li{display:inline-block;vertical-align:middle}.radio-toggle>li{font-size:12px}.radio-toggle>li:first-child>label{border-top-left-radius:2px;border-bottom-left-radius:2px}.radio-toggle>li:last-child>label{border-top-right-radius:2px;border-bottom-right-radius:2px}.radio-toggle>li+li>label{border-left:none}.radio-toggle>li>label{display:inline-block;padding:0 12px;margin:0;border:1px solid #236a97;color:#236a97;height:22px;line-height:22px;cursor:pointer;font-weight:600}.radio-toggle input[type=radio]{display:none}.radio-toggle input[type=radio]:checked+label{background-color:#236a97;color:#fff}.radio-toggle input[type=radio]:disabled+label{color:#bbb;border-color:#ddd;background:#ebebeb;cursor:not-allowed}",""]),e.exports=t},431:function(e,t,r){"use strict";r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return l})),r.d(t,"a",(function(){return p})),r.d(t,"e",(function(){return d})),r.d(t,"d",(function(){return m})),r.d(t,"f",(function(){return h}));var s=r(31),n=r(6);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const a=["user","codeviewer","issueadmin","securityhotspotadmin","admin","scan"],l=["admin",{category:"administer",permissions:["gateadmin","profileadmin"]},"scan",{category:"creator",permissions:["provisioning","applicationcreator","portfoliocreator"]}],c=["user","admin"],p={TRK:a,VW:c,SVW:c,APP:c,DEV:["user","admin"]};function u(e,t){const r=e=>{const t="".concat(e,".sonarcloud");return Object(n.isSonarCloud)()&&Object(s.hasMessage)(t)?Object(s.translate)(t):Object(s.translate)(e)};return{key:e,name:r("".concat(t,".").concat(e)),description:r("".concat(t,".").concat(e,".desc"))}}function d(e,t,r){return e.map(e=>"object"==typeof e&&"creator"===e.category?function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{permissions:e.permissions.filter(e=>"provisioning"===e||"portfoliocreator"===e&&r||"applicationcreator"===e&&t)}):e)}function m(e,t){return e.map(e=>"object"==typeof e?{category:e.category,permissions:e.permissions.map(e=>u(e,t))}:u(e,t))}function h(e){return Boolean(e&&e.category)}},497:function(e,t,r){"use strict";r.d(t,"p",(function(){return o})),r.d(t,"u",(function(){return i})),r.d(t,"o",(function(){return a})),r.d(t,"t",(function(){return l})),r.d(t,"l",(function(){return c})),r.d(t,"f",(function(){return p})),r.d(t,"y",(function(){return u})),r.d(t,"g",(function(){return d})),r.d(t,"x",(function(){return m})),r.d(t,"b",(function(){return h})),r.d(t,"c",(function(){return g})),r.d(t,"r",(function(){return f})),r.d(t,"w",(function(){return b})),r.d(t,"q",(function(){return v})),r.d(t,"v",(function(){return y})),r.d(t,"a",(function(){return O})),r.d(t,"s",(function(){return P})),r.d(t,"n",(function(){return k})),r.d(t,"m",(function(){return C})),r.d(t,"i",(function(){return j})),r.d(t,"h",(function(){return x})),r.d(t,"k",(function(){return E})),r.d(t,"j",(function(){return _})),r.d(t,"e",(function(){return w})),r.d(t,"d",(function(){return S}));var s=r(9),n=r(324);function o(e){return Object(s.post)("/api/permissions/add_user",e).catch(n.a)}function i(e){return Object(s.post)("/api/permissions/remove_user",e).catch(n.a)}function a(e){return Object(s.post)("/api/permissions/add_group",e).catch(n.a)}function l(e){return Object(s.post)("/api/permissions/remove_group",e).catch(n.a)}function c(){return Object(s.getJSON)("/api/permissions/search_templates")}function p(e){return Object(s.postJSON)("/api/permissions/create_template",e)}function u(e){return Object(s.post)("/api/permissions/update_template",e)}function d(e){return Object(s.post)("/api/permissions/delete_template",e).catch(n.a)}function m(e,t){return Object(s.post)("/api/permissions/set_default_template",{templateId:e,qualifier:t})}function h(e){return Object(s.post)("/api/permissions/apply_template",e).catch(n.a)}function g(e){return Object(s.post)("/api/permissions/bulk_apply_template",e)}function f(e){return Object(s.post)("/api/permissions/add_user_to_template",e)}function b(e){return Object(s.post)("/api/permissions/remove_user_from_template",e)}function v(e){return Object(s.post)("/api/permissions/add_group_to_template",e)}function y(e){return Object(s.post)("/api/permissions/remove_group_from_template",e)}function O(e,t){return Object(s.post)("/api/permissions/add_project_creator_to_template",{templateId:e,permission:t})}function P(e,t){return Object(s.post)("/api/permissions/remove_project_creator_from_template",{templateId:e,permission:t})}function k(e){return e.ps||(e.ps=100),Object(s.getJSON)("/api/permissions/users",e).catch(n.a)}function C(e){return e.ps||(e.ps=100),Object(s.getJSON)("/api/permissions/groups",e).catch(n.a)}function j(e){return e.ps||(e.ps=100),Object(s.getJSON)("/api/permissions/users",e)}function x(e){return e.ps||(e.ps=100),Object(s.getJSON)("/api/permissions/groups",e)}function E(e,t,r){const n={templateId:e,ps:100};return t&&(n.q=t),r&&(n.permission=r),Object(s.getJSON)("/api/permissions/template_users",n).then(e=>e.users)}function _(e,t,r){const n={templateId:e,ps:100};return t&&(n.q=t),r&&(n.permission=r),Object(s.getJSON)("/api/permissions/template_groups",n).then(e=>e.groups)}function w(e,t){return Object(s.post)("/api/projects/update_visibility",{project:e,visibility:t}).catch(n.a)}function S(e){return Object(s.post)("/api/projects/update_default_visibility",{projectVisibility:e}).catch(n.a)}},502:function(e,t,r){var s=r(417)((function(e,t,r){e[r?0:1].push(t)}),(function(){return[[],[]]}));e.exports=s},619:function(e,t,r){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},n=this&&this.__rest||function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(r[s[n]]=e[s[n]])}return r};Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),i=r(315);t.default=function(e){var t=e.fill,r=(e.size,n(e,["fill","size"]));return o.createElement(i.ThemedIcon,s({viewBox:"0 0 36 36"},r),(function(e){var r=e.theme;return o.createElement("g",{transform:"matrix(0.0625,0,0,0.0625,3,4)"},o.createElement("path",{d:"M148.25,224C121.25,224.833 99.167,235.5 82,256L48.5,256C34.833,256 23.333,252.625 14,245.875C4.667,239.125 0,229.25 0,216.25C0,157.417 10.333,128 31,128C32,128 35.625,129.75 41.875,133.25C48.125,136.75 56.25,140.292 66.25,143.875C76.25,147.458 86.167,149.25 96,149.25C107.167,149.25 118.25,147.333 129.25,143.5C128.417,149.667 128,155.167 128,160C128,183.167 134.75,204.5 148.25,224ZM416,383.25C416,403.25 409.917,419.042 397.75,430.625C385.583,442.208 369.417,448 349.25,448L130.75,448C110.583,448 94.417,442.208 82.25,430.625C70.083,419.042 64,403.25 64,383.25C64,374.417 64.292,365.792 64.875,357.375C65.458,348.958 66.625,339.875 68.375,330.125C70.125,320.375 72.333,311.333 75,303C77.667,294.667 81.25,286.542 85.75,278.625C90.25,270.708 95.417,263.958 101.25,258.375C107.083,252.792 114.208,248.333 122.625,245C131.042,241.667 140.333,240 150.5,240C152.167,240 155.75,241.792 161.25,245.375C166.75,248.958 172.833,252.958 179.5,257.375C186.167,261.792 195.083,265.792 206.25,269.375C217.417,272.958 228.667,274.75 240,274.75C251.333,274.75 262.583,272.958 273.75,269.375C284.917,265.792 293.833,261.792 300.5,257.375C307.167,252.958 313.25,248.958 318.75,245.375C324.25,241.792 327.833,240 329.5,240C339.667,240 348.958,241.667 357.375,245C365.792,248.333 372.917,252.792 378.75,258.375C384.583,263.958 389.75,270.708 394.25,278.625C398.75,286.542 402.333,294.667 405,303C407.667,311.333 409.875,320.375 411.625,330.125C413.375,339.875 414.542,348.958 415.125,357.375C415.708,365.792 416,374.417 416,383.25ZM160,64C160,81.667 153.75,96.75 141.25,109.25C128.75,121.75 113.667,128 96,128C78.333,128 63.25,121.75 50.75,109.25C38.25,96.75 32,81.667 32,64C32,46.333 38.25,31.25 50.75,18.75C63.25,6.25 78.333,0 96,0C113.667,0 128.75,6.25 141.25,18.75C153.75,31.25 160,46.333 160,64ZM336,160C336,186.5 326.625,209.125 307.875,227.875C289.125,246.625 266.5,256 240,256C213.5,256 190.875,246.625 172.125,227.875C153.375,209.125 144,186.5 144,160C144,133.5 153.375,110.875 172.125,92.125C190.875,73.375 213.5,64 240,64C266.5,64 289.125,73.375 307.875,92.125C326.625,110.875 336,133.5 336,160ZM480,216.25C480,229.25 475.333,239.125 466,245.875C456.667,252.625 445.167,256 431.5,256L398,256C380.833,235.5 358.75,224.833 331.75,224C345.25,204.5 352,183.167 352,160C352,155.167 351.583,149.667 350.75,143.5C361.75,147.333 372.833,149.25 384,149.25C393.833,149.25 403.75,147.458 413.75,143.875C423.75,140.292 431.875,136.75 438.125,133.25C444.375,129.75 448,128 449,128C469.667,128 480,157.417 480,216.25ZM448,64C448,81.667 441.75,96.75 429.25,109.25C416.75,121.75 401.667,128 384,128C366.333,128 351.25,121.75 338.75,109.25C326.25,96.75 320,81.667 320,64C320,46.333 326.25,31.25 338.75,18.75C351.25,6.25 366.333,0 384,0C401.667,0 416.75,6.25 429.25,18.75C441.75,31.25 448,46.333 448,64Z",style:{fill:t||r.colors.gray67}}))}))}},757:function(e,t,r){var s=r(313),n=r(758);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var o={insert:"head",singleton:!1},i=(s(n,o),n.locals?n.locals:{});e.exports=i},758:function(e,t,r){(t=r(314)(!1)).push([e.i,'.permissions-table .permission-column.selected{background-color:#d9edf7}.permissions-table .permission-column-inner{width:90px}.permissions-table .divider{background:#fff;padding:16px 0}.permissions-table .divider:after{display:block;content:"";background:#e6e6e6;height:1px;width:100%}.permissions-table td:first-of-type{max-width:320px}',""]),e.exports=t},759:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var s=r(2),n=r(397),o=r.n(n),i=r(355),a=r.n(i),l=r(31);function c(e){const t=[{value:"all",label:Object(l.translate)("all")},{value:"users",label:Object(l.translate)("users.page")},{value:"groups",label:Object(l.translate)("user_groups.page")}];return s.createElement("div",{className:"display-flex-row"},s.createElement(o.a,{name:"users-or-groups",onCheck:e.onFilter,options:t,value:e.filter}),s.createElement("div",{className:"flex-1 spacer-left"},s.createElement(a.a,{minLength:3,onChange:e.onSearch,placeholder:Object(l.translate)("search.search_for_users_or_groups"),value:e.query})))}},765:function(e,t,r){"use strict";r.d(t,"a",(function(){return T}));var s=r(330),n=r.n(s),o=r(502),i=r.n(o),a=r(2),l=r(31),c=r(431),p=r(349),u=r.n(p),d=r(619),m=r.n(d),h=r(311),g=r(338),f=r.n(g);class b extends a.PureComponent{render(){const{loading:e,onCheck:t,permission:r,permissionItem:s,selectedPermission:n}=this.props;return Object(c.f)(r)?a.createElement("td",{className:"text-middle"},r.permissions.map(r=>a.createElement("div",{key:r.key},a.createElement(f.a,{checked:s.permissions.includes(r.key),disabled:e.includes(r.key),id:r.key,onCheck:t},a.createElement("span",{className:"little-spacer-left"},r.name))))):a.createElement("td",{className:h("permission-column text-center text-middle",{selected:r.key===n})},a.createElement(f.a,{checked:s.permissions.includes(r.key),disabled:e.includes(r.key),id:r.key,onCheck:t}))}}class v extends a.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.state={loading:[]},this.stopLoading=e=>{this.mounted&&this.setState(t=>({loading:u()(t.loading,e)}))},this.handleCheck=(e,t)=>{void 0!==t&&(this.setState(e=>({loading:[...e.loading,t]})),this.props.onToggle(this.props.group,t).then(()=>this.stopLoading(t),()=>this.stopLoading(t)))}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}render(){const{group:e}=this.props;return a.createElement("tr",null,a.createElement("td",{className:"nowrap text-middle"},a.createElement("div",{className:"display-flex-center"},a.createElement(m.a,{className:"big-spacer-right"}),a.createElement("div",{className:"max-width-100"},a.createElement("div",{className:"max-width-100 text-ellipsis"},a.createElement("strong",null,e.name)),a.createElement("div",{className:"little-spacer-top",style:{whiteSpace:"normal"}},e.description)))),this.props.permissions.map(t=>a.createElement(b,{key:Object(c.f)(t)?t.category:t.key,loading:this.state.loading,onCheck:this.handleCheck,permission:t,permissionItem:e,selectedPermission:this.props.selectedPermission})))}}var y=r(323),O=r.n(y),P=r(317),k=r.n(P),C=r(322),j=r(460);class x extends a.PureComponent{constructor(){super(...arguments),this.handlePermissionClick=e=>{e.preventDefault(),e.currentTarget.blur();const{permission:t}=this.props;this.props.onSelectPermission&&!Object(c.f)(t)&&this.props.onSelectPermission(t.key)},this.getTooltipOverlay=()=>{const{permission:e}=this.props;return Object(c.f)(e)?e.permissions.map(e=>a.createElement(a.Fragment,{key:e.key},a.createElement("b",{className:"little-spacer-right"},e.name,":"),a.createElement(j.a,{key:e.key,message:e.description}),a.createElement("br",null))):this.props.showPublicProjectsWarning&&["user","codeviewer"].includes(e.key)?a.createElement("div",null,a.createElement(j.a,{message:e.description}),a.createElement(C.Alert,{className:"spacer-top",variant:"warning"},Object(l.translate)("projects_role.public_projects_warning"))):a.createElement(j.a,{message:e.description})}}render(){const{onSelectPermission:e,permission:t}=this.props;let r;return r=Object(c.f)(t)?Object(l.translate)("global_permissions",t.category):e?a.createElement(k.a,{overlay:Object(l.translateWithParameters)("global_permissions.filter_by_x_permission",t.name)},a.createElement("a",{href:"#",onClick:this.handlePermissionClick},t.name)):t.name,a.createElement("th",{className:h("permission-column text-center text-middle",{selected:!Object(c.f)(t)&&t.key===this.props.selectedPermission})},a.createElement("div",{className:"permission-column-inner"},r,a.createElement(O.a,{className:"spacer-left",overlay:this.getTooltipOverlay()})))}}var E=r(389);class _ extends a.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.state={loading:[]},this.stopLoading=e=>{this.mounted&&this.setState(t=>({loading:u()(t.loading,e)}))},this.handleCheck=(e,t)=>{void 0!==t&&(this.setState(e=>({loading:[...e.loading,t]})),this.props.onToggle(this.props.user,t).then(()=>this.stopLoading(t),()=>this.stopLoading(t)))}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}render(){const{user:e}=this.props,t=this.props.permissions.map(t=>a.createElement(b,{key:Object(c.f)(t)?t.category:t.key,loading:this.state.loading,onCheck:this.handleCheck,permission:t,permissionItem:e,selectedPermission:this.props.selectedPermission}));return"<creator>"===e.login?a.createElement("tr",null,a.createElement("td",{className:"nowrap text-middle"},a.createElement("div",null,a.createElement("strong",null,e.name)),a.createElement("div",{className:"little-spacer-top",style:{whiteSpace:"normal"}},Object(l.translate)("permission_templates.project_creators.explanation"))),t):a.createElement("tr",null,a.createElement("td",{className:"nowrap text-middle"},a.createElement("div",{className:"display-flex-center"},a.createElement(E.a,{className:"text-middle big-spacer-right flex-0",hash:e.avatar,name:e.name,size:36}),a.createElement("div",{className:"max-width-100"},a.createElement("div",{className:"max-width-100 text-ellipsis"},a.createElement("strong",null,e.name),a.createElement("span",{className:"note spacer-left"},e.login)),a.createElement("div",{className:"little-spacer-top max-width-100 text-ellipsis"},e.email)))),t)}}function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){N(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function N(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class T extends a.PureComponent{constructor(){super(...arguments),this.state={initialPermissionsCount:{}},this.handleGroupToggle=(e,t)=>{const r=e.id||e.name;return void 0===this.state.initialPermissionsCount[r]&&this.setState(t=>({initialPermissionsCount:S({},t.initialPermissionsCount,{[r]:e.permissions.length})})),this.props.onToggleGroup(e,t)},this.handleUserToggle=(e,t)=>(void 0===this.state.initialPermissionsCount[e.login]&&this.setState(t=>({initialPermissionsCount:S({},t.initialPermissionsCount,{[e.login]:e.permissions.length})})),this.props.onToggleUser(e,t)),this.getItemInitialPermissionsCount=e=>{const t=this.isPermissionUser(e)?e.login:e.id||e.name;return void 0!==this.state.initialPermissionsCount[t]?this.state.initialPermissionsCount[t]:e.permissions.length}}componentDidUpdate(e){this.props.filter===e.filter&&this.props.query===e.query||this.setState({initialPermissionsCount:{}})}isPermissionUser(e){return void 0!==e.login}renderEmpty(){const e=this.props.permissions.length+1;return a.createElement("tr",null,a.createElement("td",{colSpan:e},Object(l.translate)("no_results_search")))}renderItem(e,t){return this.isPermissionUser(e)?a.createElement(_,{key:"user-".concat(e.login),onToggle:this.handleUserToggle,permissions:t,selectedPermission:this.props.selectedPermission,user:e}):a.createElement(v,{group:e,key:"group-".concat(e.id||e.name),onToggle:this.handleGroupToggle,permissions:t,selectedPermission:this.props.selectedPermission})}render(){const{permissions:e}=this.props,t=n()([...this.props.users,...this.props.groups],e=>this.isPermissionUser(e)&&"<creator>"===e.login?0:e.name),[r,s]=i()(t,e=>this.getItemInitialPermissionsCount(e));return a.createElement("div",{className:"boxed-group boxed-group-inner"},a.createElement("table",{className:"data zebra permissions-table"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("td",{className:"nowrap bordered-bottom"},this.props.children),e.map(e=>a.createElement(x,{key:Object(c.f)(e)?e.category:e.key,onSelectPermission:this.props.onSelectPermission,permission:e,selectedPermission:this.props.selectedPermission,showPublicProjectsWarning:this.props.showPublicProjectsWarning})))),a.createElement("tbody",null,0===t.length&&!this.props.loading&&this.renderEmpty(),r.map(t=>this.renderItem(t,e)),r.length>0&&s.length>0&&a.createElement(a.Fragment,null,a.createElement("tr",null,a.createElement("td",{className:"divider",colSpan:20})),a.createElement("tr",null)),s.map(t=>this.renderItem(t,e)))))}}}}]);
//# sourceMappingURL=293.m.38ef94c3.chunk.js.map