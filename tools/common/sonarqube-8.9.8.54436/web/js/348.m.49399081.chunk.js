(window.webpackJsonp=window.webpackJsonp||[]).push([[348,368],{1073:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return i}));var s=a(2),n=a(38),r=a(31),c=a(339);function i(){const e=decodeURIComponent(Object(n.getCookie)("AUTHENTICATION-ERROR")||"");return s.createElement("div",{className:"page-wrapper-simple",id:"bd"},s.createElement("div",{className:"page-simple",id:"nonav"},s.createElement("div",{className:"text-center"},s.createElement("p",{id:"unauthorized"},Object(r.translate)("unauthorized.message")),Boolean(e)&&s.createElement("p",{className:"spacer-top"},Object(r.translate)("unauthorized.reason")," ",e),s.createElement("div",{className:"big-spacer-top"},s.createElement("a",{href:Object(c.getBaseUrl)()+"/"},Object(r.translate)("layout.home"))))))}},1873:function(e,t,a){"use strict";a.r(t),a.d(t,"ChangeAdminPasswordApp",(function(){return E})),a.d(t,"mapStateToProps",(function(){return _}));var s=a(2),n=a(325),r=a(458),c=a(367),i=a(327),l=a(312),o=a(322),m=a(340),d=a.n(m),u=a(346),p=a.n(u),h=a(31),f=a(339),b=a(672),w=a(1073);function g(e){const{canAdmin:t,canSubmit:a,confirmPasswordValue:n,passwordValue:r,location:c,submitting:i,success:m}=e;return t?s.createElement("div",{className:"page-wrapper-simple"},s.createElement("div",{className:"page-simple"},m?s.createElement(o.Alert,{variant:"success"},s.createElement("p",{className:"spacer-bottom"},Object(h.translate)("users.change_admin_password.form.success")),s.createElement("a",{href:Object(f.getReturnUrl)(c)},Object(h.translate)("users.change_admin_password.form.continue_to_app"))):s.createElement(s.Fragment,null,s.createElement(b.a,null),s.createElement("h1",{className:"text-center bg-danger big padded"},Object(h.translate)("users.change_admin_password.instance_is_at_risk")),s.createElement("p",{className:"text-center huge huge-spacer-top"},Object(h.translate)("users.change_admin_password.header")),s.createElement("p",{className:"text-center huge-spacer-top huge-spacer-bottom"},Object(h.translate)("users.change_admin_password.description")),s.createElement("form",{className:"text-center",onSubmit:t=>{t.preventDefault(),e.onSubmit()}},s.createElement("h2",{className:"big-spacer-bottom big"},Object(h.translate)("users.change_admin_password.form.header")),s.createElement(p.a,{className:"form-field"}),s.createElement("div",{className:"form-field"},s.createElement("label",{htmlFor:"user-password"},Object(h.translate)("users.change_admin_password.form.password"),s.createElement(d.a,null)),s.createElement("input",{id:"user-password",name:"password",onChange:t=>{e.onPasswordChange(t.currentTarget.value)},required:!0,type:"password",value:r})),s.createElement("div",{className:"form-field"},s.createElement("label",{htmlFor:"confirm-user-password"},Object(h.translate)("users.change_admin_password.form.confirm"),s.createElement(d.a,null)),s.createElement("input",{id:"confirm-user-password",name:"confirm-password",onChange:t=>{e.onConfirmPasswordChange(t.currentTarget.value)},required:!0,type:"password",value:n}),n===r&&"admin"===r&&s.createElement(o.Alert,{className:"spacer-top",variant:"warning"},Object(h.translate)("users.change_admin_password.form.cannot_use_default_password"))),s.createElement("div",{className:"form-field"},s.createElement(l.SubmitButton,{disabled:!a||i},Object(h.translate)("update_verb"),i&&s.createElement("i",{className:"spinner spacer-left"}))))))):s.createElement(w.default,null)}class E extends s.PureComponent{constructor(e){super(e),this.mounted=!1,this.handlePasswordChange=e=>{this.setState({passwordValue:e},this.checkCanSubmit)},this.handleConfirmPasswordChange=e=>{this.setState({confirmPasswordValue:e},this.checkCanSubmit)},this.handleSubmit=async()=>{const{canSubmit:e,passwordValue:t}=this.state;if(e){this.setState({submitting:!0});const e=await Object(r.a)({login:"admin",password:t}).then(()=>!0,()=>!1);this.mounted&&this.setState({submitting:!1,success:e})}},this.checkCanSubmit=()=>{this.setState(({passwordValue:e,confirmPasswordValue:t})=>({canSubmit:e===t&&"admin"!==e}))},this.state={passwordValue:"",confirmPasswordValue:"",submitting:!1,success:!e.instanceUsesDefaultAdminCredentials}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}render(){const{canAdmin:e,location:t}=this.props,{canSubmit:a,confirmPasswordValue:n,passwordValue:r,submitting:c,success:i}=this.state;return s.createElement(g,{canAdmin:e,passwordValue:r,confirmPasswordValue:n,canSubmit:a,onPasswordChange:this.handlePasswordChange,onConfirmPasswordChange:this.handleConfirmPasswordChange,onSubmit:this.handleSubmit,submitting:c,success:i,location:t})}}const _=e=>{const{canAdmin:t,instanceUsesDefaultAdminCredentials:a}=Object(i.getAppState)(e);return{canAdmin:t,instanceUsesDefaultAdminCredentials:a}};t.default=Object(n.b)(_)(Object(c.a)(E))},340:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(311),n=a(2),r=a(31);t.default=function(e){var t=e.className;return n.createElement("em",{"aria-label":r.translate("field_required"),className:s("mandatory little-spacer-left",t)},"*")}},346:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(311),n=a(2),r=a(316),c=a(31);t.default=function(e){var t=e.className;return n.createElement("div",{"aria-hidden":!0,className:s("text-muted",t)},n.createElement(r.FormattedMessage,{id:"fields_marked_with_x_required",defaultMessage:c.translate("fields_marked_with_x_required"),values:{star:n.createElement("em",{className:"mandatory"},"*")}}))}}}]);
//# sourceMappingURL=348.m.49399081.chunk.js.map