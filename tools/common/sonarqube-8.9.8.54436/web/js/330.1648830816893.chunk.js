(window.webpackJsonp=window.webpackJsonp||[]).push([[330],{1122:function(e,t,n){"use strict";var r=n(13),a=n(674),o=n(735),c=n.n(o),l=n(676);t.a=Object(a.b)((function(e,t){var n=t.branchLike,r=t.component;return{status:Object(l.getBranchStatusByBranchLike)(e,r,n).status}}))((function(e){var t=e.status;return t?r.createElement(c.a,{level:t,small:!0}):null}))},2202:function(e,t,n){"use strict";n.r(t),n.d(t,"App",(function(){return ne}));var r,a=n(13),o=n(176),c=n(985),l=n.n(c),s=n(755),i=n.n(s),u=n(876),p=n.n(u),m=n(677),h=n(672),d=n.n(h),f=n(723),b=n.n(f),_=n(715),j=n.n(_),g=n(1122),O=n(944),y=n(1309),E=n.n(y),v=n(668),k=n.n(v),N=n(973),S=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),P=function(e){function t(t){var n=e.call(this,t)||this;return n.mounted=!1,n.handleOnChange=function(){var e=n.props,t=e.branch,r=e.component,a=!n.state.excludedFromPurge;n.setState({loading:!0}),Object(N.c)(r.key,t.name,a).then((function(){n.mounted&&n.setState({excludedFromPurge:a,loading:!1})})).catch((function(){n.mounted&&n.setState({loading:!1})}))},n.state={excludedFromPurge:t.branch.excludedFromPurge,loading:!1},n}return S(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=this.props.branch,t=this.state,n=t.excludedFromPurge,r=t.loading,c=Object(m.g)(e),l=c||r;return a.createElement(a.Fragment,null,a.createElement(E.a,{disabled:l,onChange:this.handleOnChange,value:n}),a.createElement("span",{className:"spacer-left"},a.createElement(k.a,{loading:r})),c&&a.createElement(d.a,{overlay:Object(o.translate)("project_branch_pull_request.branch.auto_deletion.main_branch_tooltip")}))},t}(a.PureComponent);var q=a.memo((function(e){var t=e.branchLike,n=e.component,r=e.displayPurgeSetting,c=e.onDelete,l=e.onRename,s=Object(m.b)(t);return a.createElement("tr",null,a.createElement("td",{className:"nowrap hide-overflow"},a.createElement(O.a,{branchLike:t,className:"little-spacer-right"}),a.createElement("span",{title:s},s),a.createElement("span",null,Object(m.g)(t)&&a.createElement("div",{className:"badge spacer-left"},Object(o.translate)("branches.main_branch")))),a.createElement("td",{className:"nowrap"},a.createElement(g.a,{branchLike:t,component:n.key})),a.createElement("td",{className:"nowrap"},a.createElement(j.a,{date:t.analysisDate})),r&&Object(m.f)(t)&&a.createElement("td",{className:"nowrap js-test-purge-toggle-container"},a.createElement(P,{branch:t,component:n})),a.createElement("td",{className:"nowrap"},a.createElement(b.a,null,Object(m.g)(t)?a.createElement(f.ActionsDropdownItem,{className:"js-rename",onClick:l},Object(o.translate)("project_branch_pull_request.branch.rename")):a.createElement(f.ActionsDropdownItem,{className:"js-delete",destructive:!0,onClick:c},Object(o.translate)(Object(m.h)(t)?"project_branch_pull_request.pull_request.delete":"project_branch_pull_request.branch.delete")))))}));var w,L=a.memo((function(e){var t=e.branchLikes,n=e.component,r=e.displayPurgeSetting,c=e.onDelete,l=e.onRename,s=e.title;return a.createElement("div",{className:"boxed-group boxed-group-inner"},a.createElement("table",{className:"data zebra zebra-hover fixed"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",{className:"nowrap"},s),a.createElement("th",{className:"nowrap",style:{width:"80px"}},Object(o.translate)("status")),a.createElement("th",{className:"nowrap",style:{width:"140px"}},Object(o.translate)("project_branch_pull_request.last_analysis_date")),r&&a.createElement("th",{className:"nowrap",style:{width:"150px"}},a.createElement("div",{className:"display-flex-center"},a.createElement("span",null,Object(o.translate)("project_branch_pull_request.branch.auto_deletion.keep_when_inactive")),a.createElement(d.a,{className:"little-spacer-left",overlay:Object(o.translate)("project_branch_pull_request.branch.auto_deletion.keep_when_inactive.tooltip")}))),a.createElement("th",{className:"nowrap",style:{width:"50px"}},Object(o.translate)("actions")))),a.createElement("tbody",null,t.map((function(e){return a.createElement(q,{branchLike:e,component:n,displayPurgeSetting:r,key:Object(m.c)(e),onDelete:function(){return c(e)},onRename:function(){return l(e)}})})))))})),C=n(661),R=n(680),B=n.n(R),D=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={loading:!1},t.handleSubmit=function(e){e.preventDefault(),t.setState({loading:!0}),(Object(m.h)(t.props.branchLike)?Object(N.b)({project:t.props.component.key,pullRequest:t.props.branchLike.key}):Object(N.a)({branch:t.props.branchLike.name,project:t.props.component.key})).then((function(){t.mounted&&(t.setState({loading:!1}),t.props.onDelete())}),(function(){t.mounted&&t.setState({loading:!1})}))},t}return D(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=this.props.branchLike,t=Object(o.translate)(Object(m.h)(e)?"project_branch_pull_request.pull_request.delete":"project_branch_pull_request.branch.delete");return a.createElement(B.a,{contentLabel:t,onRequestClose:this.props.onClose},a.createElement("header",{className:"modal-head"},a.createElement("h2",null,t)),a.createElement("form",{onSubmit:this.handleSubmit},a.createElement("div",{className:"modal-body"},Object(o.translateWithParameters)(Object(m.h)(e)?"project_branch_pull_request.pull_request.delete.are_you_sure":"project_branch_pull_request.branch.delete.are_you_sure",Object(m.b)(e))),a.createElement("footer",{className:"modal-foot"},this.state.loading&&a.createElement("i",{className:"spinner spacer-right"}),a.createElement(C.SubmitButton,{className:"button-red",disabled:this.state.loading},Object(o.translate)("delete")),a.createElement(C.ResetButtonLink,{onClick:this.props.onClose},Object(o.translate)("cancel")))))},t}(a.PureComponent),x=n(688),F=n.n(x),T=n(695),M=n.n(T),I=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),J=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={loading:!1},t.handleSubmit=function(e){e.preventDefault(),t.state.name&&(t.setState({loading:!0}),Object(N.f)(t.props.component.key,t.state.name).then((function(){t.mounted&&(t.setState({loading:!1}),t.props.onRename())}),(function(){t.mounted&&t.setState({loading:!1})})))},t.handleNameChange=function(e){t.setState({name:e.currentTarget.value})},t}return I(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=this.props.branch,t=Object(o.translate)("project_branch_pull_request.branch.rename"),n=this.state.loading||!this.state.name||this.state.name===e.name;return a.createElement(B.a,{contentLabel:t,onRequestClose:this.props.onClose,size:"small"},a.createElement("header",{className:"modal-head"},a.createElement("h2",null,t)),a.createElement("form",{onSubmit:this.handleSubmit},a.createElement("div",{className:"modal-body"},a.createElement(M.a,{className:"modal-field"}),a.createElement("div",{className:"modal-field"},a.createElement("label",{htmlFor:"rename-branch-name"},Object(o.translate)("new_name"),a.createElement(F.a,null)),a.createElement("input",{autoFocus:!0,id:"rename-branch-name",maxLength:100,name:"name",onChange:this.handleNameChange,required:!0,size:50,type:"text",value:void 0!==this.state.name?this.state.name:e.name}))),a.createElement("footer",{className:"modal-foot"},this.state.loading&&a.createElement("i",{className:"spinner spacer-right"}),a.createElement(C.SubmitButton,{disabled:n},Object(o.translate)("rename")),a.createElement(C.ResetButtonLink,{onClick:this.props.onClose},Object(o.translate)("cancel")))))},t}(a.PureComponent),U=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){e[e.Branch=0]="Branch",e[e.PullRequest=1]="PullRequest"}(w||(w={}));var W=[{key:w.Branch,label:a.createElement(a.Fragment,null,a.createElement(i.a,null),a.createElement("span",{className:"spacer-left"},Object(o.translate)("project_branch_pull_request.tabs.branches")))},{key:w.PullRequest,label:a.createElement(a.Fragment,null,a.createElement(p.a,null),a.createElement("span",{className:"spacer-left"},Object(o.translate)("project_branch_pull_request.tabs.pull_requests")))}],z=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={currentTab:w.Branch},t.onTabSelect=function(e){t.setState({currentTab:e})},t.onDeleteBranchLike=function(e){return t.setState({deleting:e})},t.onRenameBranchLike=function(e){return t.setState({renaming:e})},t.onClose=function(){return t.setState({deleting:void 0,renaming:void 0})},t.onModalActionFulfilled=function(){t.onClose(),t.props.onBranchesChange()},t}return U(t,e),t.prototype.render=function(){var e=this.props,t=e.branchLikes,n=e.component,r=this.state,c=r.currentTab,s=r.deleting,i=r.renaming,u=c===w.Branch,p=u?Object(m.j)(t.filter(m.f)):Object(m.k)(t.filter(m.h)),h=Object(o.translate)(u?"project_branch_pull_request.table.branch":"project_branch_pull_request.table.pull_request");return a.createElement(a.Fragment,null,a.createElement(l.a,{className:"branch-like-tabs",onSelect:this.onTabSelect,selected:c,tabs:W}),a.createElement(L,{branchLikes:p,component:n,displayPurgeSetting:u,onDelete:this.onDeleteBranchLike,onRename:this.onRenameBranchLike,title:h}),s&&a.createElement(A,{branchLike:s,component:n,onClose:this.onClose,onDelete:this.onModalActionFulfilled}),i&&Object(m.g)(i)&&a.createElement(J,{branch:i,component:n,onClose:this.onClose,onRename:this.onModalActionFulfilled}))},t}(a.PureComponent),V=n(674),Y=n(800),G=n(676),H=n(917),K=n(665),Q=n(667),X=n(669);var Z=a.memo((function(e){var t=e.branchAndPullRequestLifeTimeInDays,n=e.canAdmin,r=e.loading;return a.createElement(k.a,{loading:r},t&&a.createElement("p",{className:"page-description"},a.createElement(K.FormattedMessage,{defaultMessage:Object(o.translate)("project_branch_pull_request.lifetime_information"),id:"project_branch_pull_request.lifetime_information",values:{days:Object(X.formatMeasure)(t,"INT")}}),n&&a.createElement(K.FormattedMessage,{defaultMessage:Object(o.translate)("project_branch_pull_request.lifetime_information.admin"),id:"project_branch_pull_request.lifetime_information.admin",values:{settings:a.createElement(Q.c,{to:"/admin/settings"},Object(o.translate)("settings.page"))}})))})),$=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ee=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.state={loading:!0},t}return $(t,e),t.prototype.componentDidMount=function(){this.mounted=!0,this.fetchBranchAndPullRequestLifetimeSetting()},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.fetchBranchAndPullRequestLifetimeSetting=function(){var e=this;Object(Y.e)({keys:H.a.DaysBeforeDeletingInactiveBranchesAndPRs}).then((function(t){e.mounted&&e.setState({loading:!1,branchAndPullRequestLifeTimeInDays:t.length>0?t[0].value:void 0})}),(function(){e.mounted&&e.setState({loading:!1})}))},t.prototype.render=function(){var e=this.props.canAdmin,t=this.state,n=t.branchAndPullRequestLifeTimeInDays,r=t.loading;return a.createElement(Z,{branchAndPullRequestLifeTimeInDays:n,canAdmin:e,loading:r})},t}(a.PureComponent),te=Object(V.b)((function(e){return{canAdmin:Object(G.getAppState)(e).canAdmin}}))(ee);function ne(e){var t=e.branchLikes,n=e.component,r=e.onBranchesChange;return a.createElement("div",{className:"page page-limited",id:"project-branch-like"},a.createElement("header",{className:"page-header"},a.createElement("h1",null,Object(o.translate)("project_branch_pull_request.page")),a.createElement(te,null)),a.createElement(z,{branchLikes:t,component:n,onBranchesChange:r}))}t.default=a.memo(ne)},800:function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return i})),n.d(t,"h",(function(){return u})),n.d(t,"i",(function(){return p})),n.d(t,"f",(function(){return m})),n.d(t,"g",(function(){return h})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return b}));var r=n(786),a=n.n(r),o=n(49),c=n(673),l=n(780);function s(e){return Object(o.getJSON)("/api/settings/list_definitions",{component:e}).then((function(e){return e.definitions}),c.a)}function i(e){return Object(o.getJSON)("/api/settings/values",e).then((function(e){return e.settings}))}function u(e,t,n){var r={key:e.key,component:n};return Object(l.k)(e)&&e.multiValues?r.values=t:"PROPERTY_SET"===e.type?r.fieldValues=t.map((function(e){return a()(e,(function(e){return null==e}))})).map(JSON.stringify):r.value=t,Object(o.post)("/api/settings/set",r)}function p(e){return Object(o.post)("/api/settings/set",e).catch(c.a)}function m(e){return Object(o.post)("/api/settings/reset",e)}function h(e,t,n){return Object(o.post)("/api/emails/send",{to:e,subject:t,message:n})}function d(){return Object(o.getJSON)("/api/settings/check_secret_key").catch(c.a)}function f(){return Object(o.postJSON)("/api/settings/generate_secret_key").catch(c.a)}function b(e){return Object(o.postJSON)("/api/settings/encrypt",{value:e}).catch(c.a)}},917:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.DaysBeforeDeletingInactiveBranchesAndPRs="sonar.dbcleaner.daysBeforeDeletingInactiveBranchesAndPRs",e.DefaultProjectVisibility="projects.default.visibility",e.ServerBaseUrl="sonar.core.serverBaseURL",e.PluginRiskConsent="sonar.plugins.risk.consent"}(r||(r={}))},944:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(13),a=n(755),o=n.n(a),c=n(876),l=n.n(c),s=n(677),i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};function p(e){var t=e.branchLike,n=u(e,["branchLike"]);return Object(s.h)(t)?r.createElement(l.a,i({},n)):r.createElement(o.a,i({},n))}},973:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return s})),n.d(t,"f",(function(){return i})),n.d(t,"c",(function(){return u}));var r=n(49),a=n(673);function o(e){return Object(r.getJSON)("/api/project_branches/list",{project:e}).then((function(e){return e.branches}),a.a)}function c(e){return Object(r.getJSON)("/api/project_pull_requests/list",{project:e}).then((function(e){return e.pullRequests}),a.a)}function l(e){return Object(r.post)("/api/project_branches/delete",e).catch(a.a)}function s(e){return Object(r.post)("/api/project_pull_requests/delete",e).catch(a.a)}function i(e,t){return Object(r.post)("/api/project_branches/rename",{project:e,name:t}).catch(a.a)}function u(e,t,n){return Object(r.post)("/api/project_branches/set_automatic_deletion_protection",{project:e,branch:t,value:n}).catch(a.a)}}}]);
//# sourceMappingURL=330.1648830816893.chunk.js.map