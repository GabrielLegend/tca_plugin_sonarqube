{"version":3,"sources":["webpack:///./src/main/js/app/components/ProjectAdminContainer.tsx","webpack:///./src/main/js/app/components/a11y/A11ySkipTarget.tsx","webpack:///./src/main/js/app/utils/handleRequiredAuthorization.ts"],"names":["ProjectAdminContainer","this","checkPermissions","isProjectAdmin","configuration","props","component","showSettings","children","anchor","A11ySkipTarget","Consumer","addA11ySkipLink","removeA11ySkipLink","A11ySkipTargetInner","getLink","key","label","weight","id","handleRequiredAuthorization","store","history","returnTo","window","location","pathname","search","hash","dispatch","replace","query","return_to"],"mappings":"6hBAmCe,MAAMA,UAA8B,gBACjD,oBACEC,KAAKC,mBAGP,qBACED,KAAKC,mBAGP,mBACOD,KAAKE,kBACR,cAIJ,iBACE,MAAM,cAAEC,GAAkBH,KAAKI,MAAMC,UACrC,OAAwB,MAAjBF,GAAyBA,EAAcG,aAGhD,SACE,IAAKN,KAAKE,iBACR,OAAO,KAGT,MAAM,EAAyBF,KAAKI,OAA9B,SAAEG,GAAR,EAAqBH,EAArB,kBACA,OACE,gCACE,gBAAC,IAAc,CAACI,OAAO,eACtB,eAAmBD,EAAUH,O,iCChEtC,8DA6Be,SAASK,EAAeL,GACrC,OACE,gBAAC,IAAYM,SAAQ,KAClB,EAAGC,kBAAiBC,wBACnB,gBAACC,EAAmB,eAClBF,gBAAiBA,EACjBC,mBAAoBA,GAChBR,KAYP,MAAMS,UAA4B,gBAAzC,c,oBASE,KAAAC,QAAU,KACR,MAAQN,OAAQO,EAAV,MAAeC,EAAQ,oBAAU,mBAAjC,OAAqDC,GAAWjB,KAAKI,MAC3E,MAAO,CAAEW,MAAKC,QAAOC,WAVvB,oBACEjB,KAAKI,MAAMO,gBAAgBX,KAAKc,WAGlC,uBACEd,KAAKI,MAAMQ,mBAAmBZ,KAAKc,WAQrC,SACE,MAAM,OAAEN,GAAWR,KAAKI,MACxB,OAAO,wBAAMc,GAAE,uBAAkBV,Q,iCChErC,yEAuBe,SAASW,IACtB,MAAMC,EAAQ,oBACRC,EAAU,MAEVC,EAAWC,OAAOC,SAASC,SAAWF,OAAOC,SAASE,OAASH,OAAOC,SAASG,KAErFP,EAAMQ,SAAS,eACfP,EAAQQ,QAAQ,CAAEJ,SAAU,gBAAiBK,MAAO,CAAEC,UAAWT","file":"js/351.m.d9f32afc.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { BranchLike } from '../../types/branch-like';\nimport handleRequiredAuthorization from '../utils/handleRequiredAuthorization';\nimport A11ySkipTarget from './a11y/A11ySkipTarget';\n\ninterface Props {\n  children: JSX.Element;\n  branchLike?: BranchLike;\n  branchLikes: BranchLike[];\n  component: T.Component;\n  isInProgress?: boolean;\n  isPending?: boolean;\n  onBranchesChange: () => void;\n  onComponentChange: (changes: {}) => void;\n}\n\nexport default class ProjectAdminContainer extends React.PureComponent<Props> {\n  componentDidMount() {\n    this.checkPermissions();\n  }\n\n  componentDidUpdate() {\n    this.checkPermissions();\n  }\n\n  checkPermissions() {\n    if (!this.isProjectAdmin()) {\n      handleRequiredAuthorization();\n    }\n  }\n\n  isProjectAdmin() {\n    const { configuration } = this.props.component;\n    return configuration != null && configuration.showSettings;\n  }\n\n  render() {\n    if (!this.isProjectAdmin()) {\n      return null;\n    }\n\n    const { children, ...props } = this.props;\n    return (\n      <>\n        <A11ySkipTarget anchor=\"admin_main\" />\n        {React.cloneElement(children, props)}\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from 'sonar-ui-common/helpers/l10n';\nimport { A11yContext } from './A11yContext';\n\ninterface Props {\n  anchor: string;\n  label?: string;\n  weight?: number;\n}\n\nexport default function A11ySkipTarget(props: Props) {\n  return (\n    <A11yContext.Consumer>\n      {({ addA11ySkipLink, removeA11ySkipLink }) => (\n        <A11ySkipTargetInner\n          addA11ySkipLink={addA11ySkipLink}\n          removeA11ySkipLink={removeA11ySkipLink}\n          {...props}\n        />\n      )}\n    </A11yContext.Consumer>\n  );\n}\n\ninterface InnerProps {\n  addA11ySkipLink: (link: T.A11ySkipLink) => void;\n  removeA11ySkipLink: (link: T.A11ySkipLink) => void;\n}\n\nexport class A11ySkipTargetInner extends React.PureComponent<Props & InnerProps> {\n  componentDidMount() {\n    this.props.addA11ySkipLink(this.getLink());\n  }\n\n  componentWillUnmount() {\n    this.props.removeA11ySkipLink(this.getLink());\n  }\n\n  getLink = (): T.A11ySkipLink => {\n    const { anchor: key, label = translate('skip_to_content'), weight } = this.props;\n    return { key, label, weight };\n  };\n\n  render() {\n    const { anchor } = this.props;\n    return <span id={`a11y_target__${anchor}`} />;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2021 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport getHistory from 'sonar-ui-common/helpers/getHistory';\nimport { requireAuthorization } from '../../store/appState';\nimport getStore from './getStore';\n\nexport default function handleRequiredAuthorization() {\n  const store = getStore();\n  const history = getHistory();\n\n  const returnTo = window.location.pathname + window.location.search + window.location.hash;\n\n  store.dispatch(requireAuthorization());\n  history.replace({ pathname: '/sessions/new', query: { return_to: returnTo } });\n}\n"],"sourceRoot":""}